(window.webpackJsonp=window.webpackJsonp||[]).push([[204],{cgc5:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return d}));var n=t("wx14"),o=t("Ff2n"),i=t("q1tI"),s=t.n(i),r=t("7ljp"),c=t("j1un"),l=(s.a.createElement,{}),b=Object(c.a)({layout:"docs",page_title:"Nomad as a Windows Service",sidebar_title:"Windows Service",description:"Discusses how to register and run Nomad as a native Windows service.",__resourcePath:"docs/install/windows-service.mdx",__scans:{}});function d(e){var a=e.components,t=Object(o.a)(e,["components"]);return Object(r.b)(b,Object(n.a)({},l,t,{components:a,mdxType:"MDXLayout"}),Object(r.b)("h1",{className:"g-type-display-2"},Object(r.b)("a",Object(n.a)({parentName:"h1"},{className:"__permalink-h",href:"#installing-nomad-as-a-windows-service","aria-label":"installing nomad as a windows service permalink"}),"\xbb"),Object(r.b)("a",Object(n.a)({parentName:"h1"},{className:"__target-h",id:"installing-nomad-as-a-windows-service","aria-hidden":""})),"Installing Nomad as a Windows service"),Object(r.b)("p",null,"Nomad can be run as a native Windows service. In order to do this, you will need\nto register the Nomad application with the Windows Service Control Manager using\n",Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"https://msdn.microsoft.com/en-us/library/windows/desktop/ms682107(v=vs.85).aspx"}),Object(r.b)("inlineCode",{parentName:"a"},"sc.exe")),", configure Nomad to log to a file, and then start the Nomad service."),Object(r.b)("div",{className:"alert alert-warning g-type-body",role:"alert"},Object(r.b)("p",{parentName:"div"},"",Object(r.b)("strong",{parentName:"p"},"Note:")," These steps should be run in a PowerShell session with Administrator\ncapabilities.")),Object(r.b)("h2",{className:"g-type-display-3"},Object(r.b)("a",Object(n.a)({parentName:"h2"},{className:"__permalink-h",href:"#register-nomad-with-windows","aria-label":"register nomad with windows permalink"}),"\xbb"),Object(r.b)("a",Object(n.a)({parentName:"h2"},{className:"__target-h",id:"register-nomad-with-windows","aria-hidden":""})),"Register Nomad with Windows"),Object(r.b)("p",null,Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"/downloads"}),"Download")," the Nomad binary for your architecture."),Object(r.b)("p",null,"Use the ",Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"https://msdn.microsoft.com/en-us/library/windows/desktop/ms682107(v=vs.85).aspx"}),Object(r.b)("inlineCode",{parentName:"a"},"sc.exe")),' command to create a Service named "Nomad". The binPath\nargument should include the fully qualified path to the Nomad executable and any\narguments to the nomad command: agent, -config, etc.'),Object(r.b)("pre",{className:"language-plaintext"},Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-plaintext"}),'sc.exe create "Nomad" binPath="\xabfull path to nomad.exe\xbb agent -config=\xabpath to config file or directory\xbb" start= auto\n[SC] CreateService SUCCESS\n')),Object(r.b)("p",null,"If you receive a success message, your service is registered with the service\nmanager."),Object(r.b)("p",null,"If you get an error, please verify the path to the binary and check the\narguments, by running the contents of ",Object(r.b)("inlineCode",{parentName:"p"},"binPath")," directly in a PowerShell session\nand observing the results."),Object(r.b)("h2",{className:"g-type-display-3"},Object(r.b)("a",Object(n.a)({parentName:"h2"},{className:"__permalink-h",href:"#configure-nomad-to-log-to-file","aria-label":"configure nomad to log to file permalink"}),"\xbb"),Object(r.b)("a",Object(n.a)({parentName:"h2"},{className:"__target-h",id:"configure-nomad-to-log-to-file","aria-hidden":""})),"Configure Nomad to log to file"),Object(r.b)("p",null,"Because Windows services run non-interactively and Nomad does not log to the\nWindows Event Viewer, you will need to configure file-based logging in Nomad."),Object(r.b)("p",null,"To do this, set the ",Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"/docs/configuration#log_file"}),Object(r.b)("inlineCode",{parentName:"a"},"log_file"))," argument in your Nomad configuration\nfile or in the binPath argument of the ",Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"https://msdn.microsoft.com/en-us/library/windows/desktop/ms682107(v=vs.85).aspx"}),Object(r.b)("inlineCode",{parentName:"a"},"sc.exe"))," command used to register the\nservice."),Object(r.b)("h2",{className:"g-type-display-3"},Object(r.b)("a",Object(n.a)({parentName:"h2"},{className:"__permalink-h",href:"#start-the-nomad-service","aria-label":"start the nomad service permalink"}),"\xbb"),Object(r.b)("a",Object(n.a)({parentName:"h2"},{className:"__target-h",id:"start-the-nomad-service","aria-hidden":""})),"Start the Nomad service"),Object(r.b)("p",null,"You have two ways to start the service."),Object(r.b)("ul",null,Object(r.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(r.b)("p",{parentName:"li"},"Go to the Windows Service Manager, and look for ",Object(r.b)("strong",{parentName:"p"},"Nomad")," in the service name\ncolumn. Click the ",Object(r.b)("em",{parentName:"p"},"Start")," button to start the service.")),Object(r.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(r.b)("p",{parentName:"li"},"Using the ",Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"https://msdn.microsoft.com/en-us/library/windows/desktop/ms682107(v=vs.85).aspx"}),Object(r.b)("inlineCode",{parentName:"a"},"sc.exe"))," command:"),Object(r.b)("pre",Object(n.a)({parentName:"li"},{className:"language-plaintext"}),Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-plaintext"}),'sc.exe start "Nomad"\n\nSERVICE_NAME: Nomad\n      TYPE               : 10  WIN32_OWN_PROCESS\n      STATE              : 4  RUNNING\n                              (STOPPABLE, NOT_PAUSABLE, ACCEPTS_SHUTDOWN)\n      WIN32_EXIT_CODE    : 0  (0x0)\n      SERVICE_EXIT_CODE  : 0  (0x0)\n      CHECKPOINT         : 0x0\n      WAIT_HINT          : 0x0\n      PID                : 8008\n      FLAGS              :\n')))),Object(r.b)("p",null,"The service automatically starts up during/after boot, so you don't need to\nlaunch Nomad from the command-line again."))}d.isMDXComponent=!0},vsOM:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/docs/install/windows-service",function(){return t("cgc5")}])}},[["vsOM",0,1,2,4,3,5,6]]]);