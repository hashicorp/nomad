(window.webpackJsonp=window.webpackJsonp||[]).push([[230],{QFQp:function(a,e,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/docs/job-specification/dispatch_payload",function(){return t("wu9P")}])},wu9P:function(a,e,t){"use strict";t.r(e),t.d(e,"default",(function(){return m}));var n,c=t("wx14"),p=t("Ff2n"),s=t("q1tI"),o=t.n(s),i=t("7ljp"),l=t("j1un"),b=(o.a.createElement,n="Placement",function(a){return console.warn("Component "+n+" was not imported, exported, or provided by MDXProvider as global scope"),Object(i.b)("div",a)}),r={},d=Object(l.a)({layout:"docs",page_title:"dispatch_payload Stanza - Job Specification",sidebar_title:"dispatch_payload",description:'The "dispatch_payload" stanza allows a task to access dispatch payloads.\nto',__resourcePath:"docs/job-specification/dispatch_payload.mdx",__scans:{}});function m(a){var e=a.components,t=Object(p.a)(a,["components"]);return Object(i.b)(d,Object(c.a)({},r,t,{components:e,mdxType:"MDXLayout"}),Object(i.b)("h1",{className:"g-type-display-2"},Object(i.b)("a",Object(c.a)({parentName:"h1"},{className:"__permalink-h",href:"#dispatch_payload-stanza","aria-label":"dispatch_payload stanza permalink"}),"\xbb"),Object(i.b)("a",Object(c.a)({parentName:"h1"},{className:"__target-h",id:"dispatch_payload-stanza","aria-hidden":""})),Object(i.b)("inlineCode",{parentName:"h1"},"dispatch_payload")," Stanza"),Object(i.b)(b,{groups:["job","group","task","dispatch_payload"],mdxType:"Placement"}),Object(i.b)("p",null,"The ",Object(i.b)("inlineCode",{parentName:"p"},"dispatch_payload")," stanza is used in conjunction with a ",Object(i.b)("a",Object(c.a)({parentName:"p"},{href:"/docs/job-specification/parameterized",title:"Nomad parameterized Job Specification"}),Object(i.b)("inlineCode",{parentName:"a"},"parameterized"))," job\nthat expects a payload. When the job is dispatched with a payload, the payload\nwill be made available to any task that has a ",Object(i.b)("inlineCode",{parentName:"p"},"dispatch_payload")," stanza. The\npayload will be written to the configured file before the task is started. This\nallows the task to use the payload as input or configuration."),Object(i.b)("pre",{className:"language-hcl"},Object(i.b)("code",Object(c.a)({parentName:"pre"},{className:"language-hcl"}),"job ",Object(i.b)("span",Object(c.a)({parentName:"code"},{className:"token string"}),'"docs"')," ",Object(i.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n  group ",Object(i.b)("span",Object(c.a)({parentName:"code"},{className:"token string"}),'"example"')," ",Object(i.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n    task ",Object(i.b)("span",Object(c.a)({parentName:"code"},{className:"token string"}),'"server"')," ",Object(i.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n      ",Object(i.b)("span",Object(c.a)({parentName:"code"},{className:"token keyword"}),"dispatch_payload")," ",Object(i.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n        ",Object(i.b)("span",Object(c.a)({parentName:"code"},{className:"token property"}),"file")," ",Object(i.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(i.b)("span",Object(c.a)({parentName:"code"},{className:"token string"}),'"config.json"'),"\n      ",Object(i.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n    ",Object(i.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n  ",Object(i.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n",Object(i.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n")),Object(i.b)("h2",{className:"g-type-display-3"},Object(i.b)("a",Object(c.a)({parentName:"h2"},{className:"__permalink-h",href:"#dispatch_payload-parameters","aria-label":"dispatch_payload parameters permalink"}),"\xbb"),Object(i.b)("a",Object(c.a)({parentName:"h2"},{className:"__target-h",id:"dispatch_payload-parameters","aria-hidden":""})),Object(i.b)("inlineCode",{parentName:"h2"},"dispatch_payload")," Parameters"),Object(i.b)("ul",null,Object(i.b)("li",Object(c.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(i.b)("a",Object(c.a)({parentName:"li"},{id:"file",className:"__target-lic","aria-hidden":""})),Object(i.b)("a",Object(c.a)({parentName:"li"},{href:"#file","aria-label":"file permalink",className:"__permalink-lic"}),Object(i.b)("inlineCode",{parentName:"a"},"file"))," ",Object(i.b)("inlineCode",{parentName:"li"},'(string: "")')," - Specifies the file name to write the content of\ndispatch payload to. The file is written relative to the ",Object(i.b)("a",Object(c.a)({parentName:"li"},{href:"/docs/runtime/environment#local",title:"Task Local Directory"}),"task's local\ndirectory"),".")),Object(i.b)("h2",{className:"g-type-display-3"},Object(i.b)("a",Object(c.a)({parentName:"h2"},{className:"__permalink-h",href:"#dispatch_payload-examples","aria-label":"dispatch_payload examples permalink"}),"\xbb"),Object(i.b)("a",Object(c.a)({parentName:"h2"},{className:"__target-h",id:"dispatch_payload-examples","aria-hidden":""})),Object(i.b)("inlineCode",{parentName:"h2"},"dispatch_payload")," Examples"),Object(i.b)("p",null,"The following examples only show the ",Object(i.b)("inlineCode",{parentName:"p"},"dispatch_payload")," stanzas. Remember that the\n",Object(i.b)("inlineCode",{parentName:"p"},"dispatch_payload")," stanza is only valid in the placements listed above."),Object(i.b)("h3",{className:"g-type-display-4"},Object(i.b)("a",Object(c.a)({parentName:"h3"},{className:"__permalink-h",href:"#write-payload-to-a-file","aria-label":"write payload to a file permalink"}),"\xbb"),Object(i.b)("a",Object(c.a)({parentName:"h3"},{className:"__target-h",id:"write-payload-to-a-file","aria-hidden":""})),"Write Payload to a File"),Object(i.b)("p",null,"This example shows a ",Object(i.b)("inlineCode",{parentName:"p"},"dispatch_payload")," block in a parameterized job that writes\nthe payload to a ",Object(i.b)("inlineCode",{parentName:"p"},"config.json")," file."),Object(i.b)("pre",{className:"language-hcl"},Object(i.b)("code",Object(c.a)({parentName:"pre"},{className:"language-hcl"}),Object(i.b)("span",Object(c.a)({parentName:"code"},{className:"token keyword"}),"dispatch_payload")," ",Object(i.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(i.b)("span",Object(c.a)({parentName:"code"},{className:"token property"}),"file")," ",Object(i.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(i.b)("span",Object(c.a)({parentName:"code"},{className:"token string"}),'"config.json"'),"\n",Object(i.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n")))}m.isMDXComponent=!0}},[["QFQp",0,1,2,4,3,5,6]]]);