{{#let this.currentEvalDetail as |evaluation|}}
  <Portal @target="eval-detail-portal">
    <div
      data-test-eval-detail
      data-test-eval-detail-is-open={{this.isSideBarOpen}}
      class="sidebar {{if this.isSideBarOpen "pib"}}"
      {{on-click-outside
        @fns.closeSidebar
        capture=true
        exceptSelector="tr[data-eval-row]"
      }}
    >
      {{#if this.isLoading}}
        <div data-test-eval-loading>
          <section class="section has-text-centered">
            <LoadingSpinner />
          </section>
        </div>
      {{/if}}
      {{#if this.error}}
        <div
          data-test-eval-detail-header
          style="display: flex; justify-content: space-between"
        >
          <button
            data-test-eval-sidebar-x
            class="button is-borderless"
            type="button"
            {{on "click" this.closeSidebar}}
          >
            {{x-icon "cancel"}}
          </button>
        </div>
        <div class="error-container">
          <div data-test-eval-error class="error-message">
            <h1 data-test-error-title class="title is-spaced">
              Not Found
            </h1>
            <p data-test-error-message class="subtitle">
              What you're looking for
          couldn't be found. It either doesn't exist or you are not authorized
          to see it.
            </p>
          </div>
        </div>
      {{/if}}
      {{#if this.isSuccess}}
        {{! Evaluation Detail Header}}
        <div
          data-test-eval-detail-header
          style="display: flex; justify-content: space-between"
        >
          <h1 data-test-title class="title">
            {{evaluation.shortId}}
            <span class="bumper-left tag is-primary">
              {{evaluation.status}}
            </span>
          </h1>
          <button
            data-test-eval-sidebar-x
            class="button is-borderless"
            type="button"
            {{on "click" this.closeSidebar}}
          >
            {{x-icon "cancel"}}
          </button>
        </div>
        {{! Start Evaluation Stats}}
        <div class="boxed-section is-small">
          <div
            class="boxed-section-body inline-definitions"
            style="display: flex;"
          >
            <span class="label" style="width: 6.125rem;">
              Evaluation Details
            </span>
            <div style="display: flex; flex-direction: column">
              <span class="pair">
                <span class="term">
                  Job
                </span>
                <LinkTo
                  data-test-evaluation-job
                  @model={{concat evaluation.plainJobId "@" evaluation.namespace
                  }}
                  @route="jobs.job"
                >
                  {{evaluation.plainJobId}}
                </LinkTo>
              </span>
              <span class="pair">
                <span class="term">
                  Triggered By
                </span>
                {{evaluation.triggeredBy}}
              </span>
            </div>
            <div style="display: flex; flex-direction: column">
              <span class="pair">
                <span class="term">
                  Priority
                </span>
                {{evaluation.priority}}
              </span>
            </div>
            <div style="display: flex; flex-direction: column">
              <span class="pair">
                <span class="term">
                  Created
                </span>
                {{format-month-ts evaluation.createTime}}
              </span>
              <span class="pair">
                <span class="term">
                  Placement Failure
                </span>
                {{evaluation.hasPlacementFailures}}
              </span>
            </div>
          </div>
        </div>
        {{! Placement Failures}}
        {{#if evaluation.failedTGAllocs}}
          <div class="boxed-section is-danger">
            <div class="boxed-section-head">
              Placement Failures
            </div>
            <div class="boxed-section-body">
              {{#each evaluation.failedTGAllocs as |placementFailure|}}
                <PlacementFailure @failedTGAlloc={{placementFailure}} />
              {{/each}}
            </div>
          </div>
        {{/if}}
        {{! Related Evaluations}}
        <EvaluationSidebar::RelatedEvaluations
          @fns={{hash
            handleResize=this.handleResize
            handleEvaluationClick=@fns.handleEvaluationClick
          }}
          @data={{hash
            width=this.width
            height=this.height
            parentEvaluation=this.parentEvaluation
            descendentsMap=this.descendentsMap
          }}
        />
        {{! Evaluation JSON Response}}
        <JsonViewer @json={{evaluation}} />
      {{/if}}
    </div>
  </Portal>
{{/let}}