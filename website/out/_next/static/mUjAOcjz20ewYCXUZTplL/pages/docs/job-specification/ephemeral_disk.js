(window.webpackJsonp=window.webpackJsonp||[]).push([[232],{"7pPV":function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/docs/job-specification/ephemeral_disk",function(){return t("YaC8")}])},YaC8:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return d}));var n,c=t("wx14"),s=t("Ff2n"),i=t("q1tI"),p=t.n(i),r=t("7ljp"),l=t("j1un"),b=(p.a.createElement,n="Placement",function(e){return console.warn("Component "+n+" was not imported, exported, or provided by MDXProvider as global scope"),Object(r.b)("div",e)}),m={},o=Object(l.a)({layout:"docs",page_title:"ephemeral_disk Stanza - Job Specification",sidebar_title:"ephemeral_disk",description:'The "ephemeral_disk" stanza describes the ephemeral disk requirements of the\ngroup. Ephemeral disks can be marked as sticky and support live data\nmigrations.',__resourcePath:"docs/job-specification/ephemeral_disk.mdx",__scans:{}});function d(e){var a=e.components,t=Object(s.a)(e,["components"]);return Object(r.b)(o,Object(c.a)({},m,t,{components:a,mdxType:"MDXLayout"}),Object(r.b)("h1",{className:"g-type-display-2"},Object(r.b)("a",Object(c.a)({parentName:"h1"},{className:"__permalink-h",href:"#ephemeral_disk-stanza","aria-label":"ephemeral_disk stanza permalink"}),"\xbb"),Object(r.b)("a",Object(c.a)({parentName:"h1"},{className:"__target-h",id:"ephemeral_disk-stanza","aria-hidden":""})),Object(r.b)("inlineCode",{parentName:"h1"},"ephemeral_disk")," Stanza"),Object(r.b)(b,{groups:["job","group","ephemeral_disk"],mdxType:"Placement"}),Object(r.b)("p",null,"The ",Object(r.b)("inlineCode",{parentName:"p"},"ephemeral_disk")," stanza describes the ephemeral disk requirements of the\ngroup. Ephemeral disks can be marked as sticky and support live data migrations.\nAll tasks in this group will share the same ephemeral disk."),Object(r.b)("pre",{className:"language-hcl"},Object(r.b)("code",Object(c.a)({parentName:"pre"},{className:"language-hcl"}),"job ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token string"}),'"docs"')," ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n  group ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token string"}),'"example"')," ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n    ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token keyword"}),"ephemeral_disk")," ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n      ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token property"}),"migrate")," ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token boolean"}),"true"),"\n      ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token property"}),"size"),"    ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token string"}),'"500"'),"\n      ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token property"}),"sticky"),"  ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token boolean"}),"true"),"\n    ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n  ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n")),Object(r.b)("h2",{className:"g-type-display-3"},Object(r.b)("a",Object(c.a)({parentName:"h2"},{className:"__permalink-h",href:"#ephemeral_disk-parameters","aria-label":"ephemeral_disk parameters permalink"}),"\xbb"),Object(r.b)("a",Object(c.a)({parentName:"h2"},{className:"__target-h",id:"ephemeral_disk-parameters","aria-hidden":""})),Object(r.b)("inlineCode",{parentName:"h2"},"ephemeral_disk")," Parameters"),Object(r.b)("ul",null,Object(r.b)("li",Object(c.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(r.b)("a",Object(c.a)({parentName:"li"},{id:"migrate",className:"__target-lic","aria-hidden":""})),Object(r.b)("p",{parentName:"li"},Object(r.b)("a",Object(c.a)({parentName:"p"},{href:"#migrate","aria-label":"migrate permalink",className:"__permalink-lic"}),Object(r.b)("inlineCode",{parentName:"a"},"migrate"))," ",Object(r.b)("inlineCode",{parentName:"p"},"(bool: false)")," - When ",Object(r.b)("inlineCode",{parentName:"p"},"sticky")," is true, this specifies that the\nNomad client should make a best-effort attempt to migrate the data from a\nremote machine if placement cannot be made on the original node. During data\nmigration, the task will block starting until the data migration has\ncompleted. Migration is atomic and any partially migrated data will be\nremoved if an error is encountered.")),Object(r.b)("li",Object(c.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(r.b)("a",Object(c.a)({parentName:"li"},{id:"size",className:"__target-lic","aria-hidden":""})),Object(r.b)("p",{parentName:"li"},Object(r.b)("a",Object(c.a)({parentName:"p"},{href:"#size","aria-label":"size permalink",className:"__permalink-lic"}),Object(r.b)("inlineCode",{parentName:"a"},"size"))," ",Object(r.b)("inlineCode",{parentName:"p"},"(int: 300)")," - Specifies the size of the ephemeral disk in MB. The\ncurrent Nomad ephemeral storage implementation does not enforce this limit;\nhowever, it is used during job placement.")),Object(r.b)("li",Object(c.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(r.b)("a",Object(c.a)({parentName:"li"},{id:"sticky",className:"__target-lic","aria-hidden":""})),Object(r.b)("p",{parentName:"li"},Object(r.b)("a",Object(c.a)({parentName:"p"},{href:"#sticky","aria-label":"sticky permalink",className:"__permalink-lic"}),Object(r.b)("inlineCode",{parentName:"a"},"sticky"))," ",Object(r.b)("inlineCode",{parentName:"p"},"(bool: false)")," - Specifies that Nomad should make a best-effort\nattempt to place the updated allocation on the same machine. This will move\nthe ",Object(r.b)("inlineCode",{parentName:"p"},"local/")," and ",Object(r.b)("inlineCode",{parentName:"p"},"alloc/data")," directories to the new allocation."))),Object(r.b)("h2",{className:"g-type-display-3"},Object(r.b)("a",Object(c.a)({parentName:"h2"},{className:"__permalink-h",href:"#ephemeral_disk-examples","aria-label":"ephemeral_disk examples permalink"}),"\xbb"),Object(r.b)("a",Object(c.a)({parentName:"h2"},{className:"__target-h",id:"ephemeral_disk-examples","aria-hidden":""})),Object(r.b)("inlineCode",{parentName:"h2"},"ephemeral_disk")," Examples"),Object(r.b)("p",null,"The following examples only show the ",Object(r.b)("inlineCode",{parentName:"p"},"ephemeral_disk")," stanzas. Remember that the\n",Object(r.b)("inlineCode",{parentName:"p"},"ephemeral_disk")," stanza is only valid in the placements listed above."),Object(r.b)("h3",{className:"g-type-display-4"},Object(r.b)("a",Object(c.a)({parentName:"h3"},{className:"__permalink-h",href:"#sticky-volumes","aria-label":"sticky volumes permalink"}),"\xbb"),Object(r.b)("a",Object(c.a)({parentName:"h3"},{className:"__target-h",id:"sticky-volumes","aria-hidden":""})),"Sticky Volumes"),Object(r.b)("p",null,"This example shows enabling sticky volumes with Nomad using ephemeral disks:"),Object(r.b)("pre",{className:"language-hcl"},Object(r.b)("code",Object(c.a)({parentName:"pre"},{className:"language-hcl"}),Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token keyword"}),"ephemeral_disk")," ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token property"}),"sticky")," ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token boolean"}),"true"),"\n",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n")))}d.isMDXComponent=!0}},[["7pPV",0,1,2,4,3,5,6]]]);