(window.webpackJsonp=window.webpackJsonp||[]).push([[199],{"3fzR":function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return m}));var n=t("wx14"),c=t("Ff2n"),r=t("q1tI"),o=t.n(r),s=t("7ljp"),i=t("j1un"),l=(o.a.createElement,{}),b=Object(i.a)({layout:"docs",page_title:"Deployment Guide",sidebar_title:"Reference Install Guide",description:"This deployment guide covers the steps required to install and\nconfigure a single HashiCorp Nomad cluster as defined in the\nNomad Reference Architecture",ea_version:.9,__resourcePath:"docs/install/production/deployment-guide.mdx",__scans:{}});function m(e){var a=e.components,t=Object(c.a)(e,["components"]);return Object(s.b)(b,Object(n.a)({},l,t,{components:a,mdxType:"MDXLayout"}),Object(s.b)("h1",{className:"g-type-display-2"},Object(s.b)("a",Object(n.a)({parentName:"h1"},{className:"__permalink-h",href:"#nomad-reference-install-guide","aria-label":"nomad reference install guide permalink"}),"\xbb"),Object(s.b)("a",Object(n.a)({parentName:"h1"},{className:"__target-h",id:"nomad-reference-install-guide","aria-hidden":""})),"Nomad Reference Install Guide"),Object(s.b)("p",null,"This deployment guide covers the steps required to install and configure a single HashiCorp Nomad cluster as defined in the ",Object(s.b)("a",Object(n.a)({parentName:"p"},{href:"/docs/install/production/reference-architecture"}),"Nomad Reference Architecture"),"."),Object(s.b)("p",null,"These instructions are for installing and configuring Nomad on Linux hosts running the systemd system and service manager."),Object(s.b)("h2",{className:"g-type-display-3"},Object(s.b)("a",Object(n.a)({parentName:"h2"},{className:"__permalink-h",href:"#reference-material","aria-label":"reference material permalink"}),"\xbb"),Object(s.b)("a",Object(n.a)({parentName:"h2"},{className:"__target-h",id:"reference-material","aria-hidden":""})),"Reference Material"),Object(s.b)("p",null,"This deployment guide is designed to work in combination with the ",Object(s.b)("a",Object(n.a)({parentName:"p"},{href:"/docs/install/production/reference-architecture"}),"Nomad Reference Architecture")," and ",Object(s.b)("a",Object(n.a)({parentName:"p"},{href:"https://www.consul.io/docs/guides/deployment-guide.html"}),"Consul Deployment Guide"),". Although it is not a strict requirement to follow the Nomad Reference Architecture, please ensure you are familiar with the overall architecture design. For example, installing Nomad server agents on multiple physical or virtual (with correct anti-affinity) hosts for high-availability."),Object(s.b)("h2",{className:"g-type-display-3"},Object(s.b)("a",Object(n.a)({parentName:"h2"},{className:"__permalink-h",href:"#overview","aria-label":"overview permalink"}),"\xbb"),Object(s.b)("a",Object(n.a)({parentName:"h2"},{className:"__target-h",id:"overview","aria-hidden":""})),"Overview"),Object(s.b)("p",null,"To provide a highly-available single cluster architecture, we recommend Nomad server agents be deployed to more than one host, as shown in the ",Object(s.b)("a",Object(n.a)({parentName:"p"},{href:"/docs/install/production/reference-architecture"}),"Nomad Reference Architecture"),"."),Object(s.b)("p",null,Object(s.b)("img",Object(n.a)({parentName:"p"},{src:"/img/nomad_reference_diagram.png",alt:"Reference diagram"}))),Object(s.b)("p",null,"These setup steps should be completed on all Nomad hosts:"),Object(s.b)("ul",null,Object(s.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(s.b)("a",Object(n.a)({parentName:"li"},{href:"#download-nomad"}),"Download Nomad")),Object(s.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(s.b)("a",Object(n.a)({parentName:"li"},{href:"#install-nomad"}),"Install Nomad")),Object(s.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(s.b)("a",Object(n.a)({parentName:"li"},{href:"#configure-systemd"}),"Configure systemd")),Object(s.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(s.b)("a",Object(n.a)({parentName:"li"},{href:"#configure-nomad"}),"Configure Nomad")),Object(s.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(s.b)("a",Object(n.a)({parentName:"li"},{href:"#start-nomad"}),"Start Nomad"))),Object(s.b)("h2",{className:"g-type-display-3"},Object(s.b)("a",Object(n.a)({parentName:"h2"},{className:"__permalink-h",href:"#download-nomad","aria-label":"download nomad permalink"}),"\xbb"),Object(s.b)("a",Object(n.a)({parentName:"h2"},{className:"__target-h",id:"download-nomad","aria-hidden":""})),"Download Nomad"),Object(s.b)("p",null,"Precompiled Nomad binaries are available for download at ",Object(s.b)("a",Object(n.a)({parentName:"p"},{href:"https://releases.hashicorp.com/nomad/"}),"https://releases.hashicorp.com/nomad/")," and Nomad Enterprise binaries are available for download by following the instructions made available to HashiCorp Enterprise customers."),Object(s.b)("pre",{className:"language-text"},Object(s.b)("code",Object(n.a)({parentName:"pre"},{className:"language-text"}),'export NOMAD_VERSION="0.9.0"\ncurl --silent --remote-name https://releases.hashicorp.com/nomad/${NOMAD_VERSION}/nomad_${NOMAD_VERSION}_linux_amd64.zip\n')),Object(s.b)("p",null,"You may perform checksum verification of the zip packages using the SHA256SUMS and SHA256SUMS.sig files available for the specific release version. HashiCorp provides ",Object(s.b)("a",Object(n.a)({parentName:"p"},{href:"https://www.hashicorp.com/security"}),"a guide on checksum verification")," for precompiled binaries."),Object(s.b)("h2",{className:"g-type-display-3"},Object(s.b)("a",Object(n.a)({parentName:"h2"},{className:"__permalink-h",href:"#install-nomad","aria-label":"install nomad permalink"}),"\xbb"),Object(s.b)("a",Object(n.a)({parentName:"h2"},{className:"__target-h",id:"install-nomad","aria-hidden":""})),"Install Nomad"),Object(s.b)("p",null,"Unzip the downloaded package and move the ",Object(s.b)("inlineCode",{parentName:"p"},"nomad")," binary to ",Object(s.b)("inlineCode",{parentName:"p"},"/usr/local/bin/"),". Check ",Object(s.b)("inlineCode",{parentName:"p"},"nomad")," is available on the system path."),Object(s.b)("pre",{className:"language-text"},Object(s.b)("code",Object(n.a)({parentName:"pre"},{className:"language-text"}),"unzip nomad_${NOMAD_VERSION}_linux_amd64.zip\nsudo chown root:root nomad\nsudo mv nomad /usr/local/bin/\nnomad version\n")),Object(s.b)("p",null,"The ",Object(s.b)("inlineCode",{parentName:"p"},"nomad")," command features opt-in autocompletion for flags, subcommands, and arguments (where supported). Enable autocompletion."),Object(s.b)("pre",{className:"language-text"},Object(s.b)("code",Object(n.a)({parentName:"pre"},{className:"language-text"}),"nomad -autocomplete-install\ncomplete -C /usr/local/bin/nomad nomad\n")),Object(s.b)("p",null,"Create a data directory for Nomad."),Object(s.b)("pre",{className:"language-text"},Object(s.b)("code",Object(n.a)({parentName:"pre"},{className:"language-text"}),"sudo mkdir --parents /opt/nomad\n")),Object(s.b)("h2",{className:"g-type-display-3"},Object(s.b)("a",Object(n.a)({parentName:"h2"},{className:"__permalink-h",href:"#configure-systemd","aria-label":"configure systemd permalink"}),"\xbb"),Object(s.b)("a",Object(n.a)({parentName:"h2"},{className:"__target-h",id:"configure-systemd","aria-hidden":""})),"Configure systemd"),Object(s.b)("p",null,"Systemd uses ",Object(s.b)("a",Object(n.a)({parentName:"p"},{href:"https://www.freedesktop.org/software/systemd/man/systemd.directives.html"}),"documented sane defaults")," so only non-default values must be set in the configuration file."),Object(s.b)("p",null,"Create a Nomad service file at ",Object(s.b)("inlineCode",{parentName:"p"},"/etc/systemd/system/nomad.service"),"."),Object(s.b)("pre",{className:"language-text"},Object(s.b)("code",Object(n.a)({parentName:"pre"},{className:"language-text"}),"sudo touch /etc/systemd/system/nomad.service\n")),Object(s.b)("p",null,"Add this configuration to the Nomad service file:"),Object(s.b)("pre",{className:"language-text"},Object(s.b)("code",Object(n.a)({parentName:"pre"},{className:"language-text"}),"[Unit]\nDescription=Nomad\nDocumentation=https://nomadproject.io/docs/\nWants=network-online.target\nAfter=network-online.target\n\n[Service]\nExecReload=/bin/kill -HUP $MAINPID\nExecStart=/usr/local/bin/nomad agent -config /etc/nomad.d\nKillMode=process\nKillSignal=SIGINT\nLimitNOFILE=infinity\nLimitNPROC=infinity\nRestart=on-failure\nRestartSec=2\nStartLimitBurst=3\nStartLimitIntervalSec=10\nTasksMax=infinity\n\n[Install]\nWantedBy=multi-user.target\n")),Object(s.b)("p",null,"The following parameters are set for the ",Object(s.b)("inlineCode",{parentName:"p"},"[Unit]")," stanza:"),Object(s.b)("ul",null,Object(s.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(s.b)("a",Object(n.a)({parentName:"li"},{href:"https://www.freedesktop.org/software/systemd/man/systemd.unit.html#Description="}),Object(s.b)("inlineCode",{parentName:"a"},"Description"))," - Free-form string describing the nomad service"),Object(s.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(s.b)("a",Object(n.a)({parentName:"li"},{href:"https://www.freedesktop.org/software/systemd/man/systemd.unit.html#Documentation="}),Object(s.b)("inlineCode",{parentName:"a"},"Documentation"))," - Link to the nomad documentation"),Object(s.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(s.b)("a",Object(n.a)({parentName:"li"},{href:"https://www.freedesktop.org/software/systemd/man/systemd.unit.html#Wants="}),Object(s.b)("inlineCode",{parentName:"a"},"Wants"))," - Configure a dependency on the network service"),Object(s.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(s.b)("a",Object(n.a)({parentName:"li"},{href:"https://www.freedesktop.org/software/systemd/man/systemd.unit.html#After="}),Object(s.b)("inlineCode",{parentName:"a"},"After"))," - Configure an ordering dependency on the network service being started before the nomad service")),Object(s.b)("p",null,"The following parameters are set for the ",Object(s.b)("inlineCode",{parentName:"p"},"[Service]")," stanza:"),Object(s.b)("ul",null,Object(s.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(s.b)("a",Object(n.a)({parentName:"li"},{href:"https://www.freedesktop.org/software/systemd/man/systemd.service.html#ExecReload="}),Object(s.b)("inlineCode",{parentName:"a"},"ExecReload"))," - Send Nomad a ",Object(s.b)("inlineCode",{parentName:"li"},"SIGHUP")," signal to trigger a configuration reload"),Object(s.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(s.b)("a",Object(n.a)({parentName:"li"},{href:"https://www.freedesktop.org/software/systemd/man/systemd.service.html#ExecStart="}),Object(s.b)("inlineCode",{parentName:"a"},"ExecStart"))," - Start Nomad with the ",Object(s.b)("inlineCode",{parentName:"li"},"agent")," argument and path to a directory of configuration files"),Object(s.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(s.b)("a",Object(n.a)({parentName:"li"},{href:"https://www.freedesktop.org/software/systemd/man/systemd.kill.html#KillMode="}),Object(s.b)("inlineCode",{parentName:"a"},"KillMode"))," - Treat nomad as a single process"),Object(s.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(s.b)("a",Object(n.a)({parentName:"li"},{href:"https://www.freedesktop.org/software/systemd/man/systemd.exec.html#Process%20Properties"}),Object(s.b)("inlineCode",{parentName:"a"},"LimitNOFILE"),", ",Object(s.b)("inlineCode",{parentName:"a"},"LimitNPROC"))," - Disable limits for file descriptors and processes"),Object(s.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(s.b)("a",Object(n.a)({parentName:"li"},{href:"https://www.freedesktop.org/software/systemd/man/systemd.service.html#RestartSec="}),Object(s.b)("inlineCode",{parentName:"a"},"RestartSec"))," - Restart nomad after 2 seconds of it being considered 'failed'"),Object(s.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(s.b)("a",Object(n.a)({parentName:"li"},{href:"https://www.freedesktop.org/software/systemd/man/systemd.service.html#Restart="}),Object(s.b)("inlineCode",{parentName:"a"},"Restart"))," - Restart nomad unless it returned a clean exit code"),Object(s.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(s.b)("a",Object(n.a)({parentName:"li"},{href:"https://www.freedesktop.org/software/systemd/man/systemd.unit.html#StartLimitIntervalSec=interval"}),Object(s.b)("inlineCode",{parentName:"a"},"StartLimitBurst"),", ",Object(s.b)("inlineCode",{parentName:"a"},"StartLimitIntervalSec"))," - Configure unit start rate limiting"),Object(s.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(s.b)("a",Object(n.a)({parentName:"li"},{href:"https://www.freedesktop.org/software/systemd/man/systemd.resource-control.html#TasksMax=N"}),Object(s.b)("inlineCode",{parentName:"a"},"TasksMax"))," - Disable task limits (only available in systemd >= 226)")),Object(s.b)("p",null,"The following parameters are set for the ",Object(s.b)("inlineCode",{parentName:"p"},"[Install]")," stanza:"),Object(s.b)("ul",null,Object(s.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(s.b)("a",Object(n.a)({parentName:"li"},{href:"https://www.freedesktop.org/software/systemd/man/systemd.unit.html#WantedBy="}),Object(s.b)("inlineCode",{parentName:"a"},"WantedBy"))," - Creates a weak dependency on nomad being started by the multi-user run level")),Object(s.b)("h2",{className:"g-type-display-3"},Object(s.b)("a",Object(n.a)({parentName:"h2"},{className:"__permalink-h",href:"#configure-nomad","aria-label":"configure nomad permalink"}),"\xbb"),Object(s.b)("a",Object(n.a)({parentName:"h2"},{className:"__target-h",id:"configure-nomad","aria-hidden":""})),"Configure Nomad"),Object(s.b)("p",null,"Nomad uses ",Object(s.b)("a",Object(n.a)({parentName:"p"},{href:"/docs/configuration"}),"documented sane defaults")," so only non-default values must be set in the configuration file. Configuration can be read from multiple files and is loaded in lexical order. See the ",Object(s.b)("a",Object(n.a)({parentName:"p"},{href:"/docs/configuration"}),"full description")," for more information about configuration loading and merge semantics."),Object(s.b)("p",null,"Some configuration settings are common to both server and client Nomad agents, while some configuration settings must only exist on one or the other. Follow the ",Object(s.b)("a",Object(n.a)({parentName:"p"},{href:"#common-configuration"}),"common configuration")," guidance on all hosts and then the specific guidance depending on whether you are configuring a Nomad ",Object(s.b)("a",Object(n.a)({parentName:"p"},{href:"#server-configuration"}),"server")," or ",Object(s.b)("a",Object(n.a)({parentName:"p"},{href:"#client-configuration"}),"client"),"."),Object(s.b)("ul",null,Object(s.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(s.b)("a",Object(n.a)({parentName:"li"},{href:"#common-configuration"}),"Common Nomad configuration")),Object(s.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(s.b)("a",Object(n.a)({parentName:"li"},{href:"#server-configuration"}),"Configure a Nomad server")),Object(s.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(s.b)("a",Object(n.a)({parentName:"li"},{href:"#client-configuration"}),"Configure a Nomad client"))),Object(s.b)("h3",{className:"g-type-display-4"},Object(s.b)("a",Object(n.a)({parentName:"h3"},{className:"__permalink-h",href:"#common-configuration","aria-label":"common configuration permalink"}),"\xbb"),Object(s.b)("a",Object(n.a)({parentName:"h3"},{className:"__target-h",id:"common-configuration","aria-hidden":""})),"Common configuration"),Object(s.b)("p",null,"Create a configuration file at ",Object(s.b)("inlineCode",{parentName:"p"},"/etc/nomad.d/nomad.hcl"),":"),Object(s.b)("pre",{className:"language-text"},Object(s.b)("code",Object(n.a)({parentName:"pre"},{className:"language-text"}),"sudo mkdir --parents /etc/nomad.d\nsudo chmod 700 /etc/nomad.d\nsudo touch /etc/nomad.d/nomad.hcl\n")),Object(s.b)("p",null,"Add this configuration to the ",Object(s.b)("inlineCode",{parentName:"p"},"nomad.hcl")," configuration file:"),Object(s.b)("div",{className:"alert alert-warning g-type-body",role:"alert"},Object(s.b)("p",{parentName:"div"},"",Object(s.b)("strong",{parentName:"p"},"Note:")," Replace the ",Object(s.b)("inlineCode",{parentName:"p"},"datacenter")," parameter value with the identifier you will use for the datacenter this Nomad cluster is deployed in.")),Object(s.b)("pre",{className:"language-hcl"},Object(s.b)("code",Object(n.a)({parentName:"pre"},{className:"language-hcl"}),Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),"datacenter")," ",Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"dc1"'),"\n",Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),"data_dir")," ",Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"/opt/nomad"'),"\n")),Object(s.b)("ul",null,Object(s.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(s.b)("a",Object(n.a)({parentName:"li"},{href:"/docs/configuration#datacenter"}),Object(s.b)("inlineCode",{parentName:"a"},"datacenter"))," - The datacenter in which the agent is running."),Object(s.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(s.b)("a",Object(n.a)({parentName:"li"},{href:"/docs/configuration#data_dir"}),Object(s.b)("inlineCode",{parentName:"a"},"data_dir"))," - The data directory for the agent to store state.")),Object(s.b)("h3",{className:"g-type-display-4"},Object(s.b)("a",Object(n.a)({parentName:"h3"},{className:"__permalink-h",href:"#server-configuration","aria-label":"server configuration permalink"}),"\xbb"),Object(s.b)("a",Object(n.a)({parentName:"h3"},{className:"__target-h",id:"server-configuration","aria-hidden":""})),"Server configuration"),Object(s.b)("p",null,"Create a configuration file at ",Object(s.b)("inlineCode",{parentName:"p"},"/etc/nomad.d/server.hcl"),":"),Object(s.b)("pre",{className:"language-text"},Object(s.b)("code",Object(n.a)({parentName:"pre"},{className:"language-text"}),"sudo touch /etc/nomad.d/server.hcl\n")),Object(s.b)("p",null,"Add this configuration to the ",Object(s.b)("inlineCode",{parentName:"p"},"server.hcl")," configuration file:"),Object(s.b)("div",{className:"alert alert-warning g-type-body",role:"alert"},Object(s.b)("p",{parentName:"div"},"",Object(s.b)("strong",{parentName:"p"},"NOTE")," Replace the ",Object(s.b)("inlineCode",{parentName:"p"},"bootstrap_expect")," value with the number of Nomad servers you will use; three or five ",Object(s.b)("a",Object(n.a)({parentName:"p"},{href:"/docs/internals/consensus#deployment-table"}),"is recommended"),".")),Object(s.b)("pre",{className:"language-hcl"},Object(s.b)("code",Object(n.a)({parentName:"pre"},{className:"language-hcl"}),Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"server")," ",Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),"enabled")," ",Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token boolean"}),"true"),"\n  ",Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),"bootstrap_expect")," ",Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token number"}),"3"),"\n",Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n")),Object(s.b)("ul",null,Object(s.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(s.b)("a",Object(n.a)({parentName:"li"},{href:"/docs/configuration/server#enabled"}),Object(s.b)("inlineCode",{parentName:"a"},"server"))," - Specifies if this agent should run in server mode. All other server options depend on this value being set."),Object(s.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(s.b)("a",Object(n.a)({parentName:"li"},{href:"/docs/configuration/server#bootstrap_expect"}),Object(s.b)("inlineCode",{parentName:"a"},"bootstrap_expect"))," - The number of expected servers in the cluster. Either this value should not be provided or the value must agree with other servers in the cluster.")),Object(s.b)("h3",{className:"g-type-display-4"},Object(s.b)("a",Object(n.a)({parentName:"h3"},{className:"__permalink-h",href:"#client-configuration","aria-label":"client configuration permalink"}),"\xbb"),Object(s.b)("a",Object(n.a)({parentName:"h3"},{className:"__target-h",id:"client-configuration","aria-hidden":""})),"Client configuration"),Object(s.b)("p",null,"Create a configuration file at ",Object(s.b)("inlineCode",{parentName:"p"},"/etc/nomad.d/client.hcl"),":"),Object(s.b)("pre",{className:"language-text"},Object(s.b)("code",Object(n.a)({parentName:"pre"},{className:"language-text"}),"sudo touch /etc/nomad.d/client.hcl\n")),Object(s.b)("p",null,"Add this configuration to the ",Object(s.b)("inlineCode",{parentName:"p"},"client.hcl")," configuration file:"),Object(s.b)("pre",{className:"language-hcl"},Object(s.b)("code",Object(n.a)({parentName:"pre"},{className:"language-hcl"}),Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"client")," ",Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),"enabled")," ",Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token boolean"}),"true"),"\n",Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n")),Object(s.b)("ul",null,Object(s.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(s.b)("a",Object(n.a)({parentName:"li"},{href:"/docs/configuration/client#enabled"}),Object(s.b)("inlineCode",{parentName:"a"},"client"))," - Specifies if this agent should run in client mode. All other client options depend on this value being set.")),Object(s.b)("div",{className:"alert alert-warning g-type-body",role:"alert"},Object(s.b)("p",{parentName:"div"},"",Object(s.b)("strong",{parentName:"p"},"NOTE")," The ",Object(s.b)("a",Object(n.a)({parentName:"p"},{href:"/docs/configuration/client#options-parameters"}),Object(s.b)("inlineCode",{parentName:"a"},"options"))," parameter can be used to enable or disable specific configurations on Nomad clients, unique to your use case requirements.")),Object(s.b)("h3",{className:"g-type-display-4"},Object(s.b)("a",Object(n.a)({parentName:"h3"},{className:"__permalink-h",href:"#acl-configuration","aria-label":"acl configuration permalink"}),"\xbb"),Object(s.b)("a",Object(n.a)({parentName:"h3"},{className:"__target-h",id:"acl-configuration","aria-hidden":""})),"ACL configuration"),Object(s.b)("p",null,"The ",Object(s.b)("a",Object(n.a)({parentName:"p"},{href:"https://learn.hashicorp.com/collections/nomad/access-control"}),"Access Control")," guide provides instructions on configuring and enabling ACLs."),Object(s.b)("h3",{className:"g-type-display-4"},Object(s.b)("a",Object(n.a)({parentName:"h3"},{className:"__permalink-h",href:"#tls-configuration","aria-label":"tls configuration permalink"}),"\xbb"),Object(s.b)("a",Object(n.a)({parentName:"h3"},{className:"__target-h",id:"tls-configuration","aria-hidden":""})),"TLS configuration"),Object(s.b)("p",null,"Securing Nomad's cluster communication with mutual TLS (mTLS) is recommended for production deployments and can even ease operations by preventing mistakes and misconfigurations. Nomad clients and servers should not be publicly accessible without mTLS enabled."),Object(s.b)("p",null,"The ",Object(s.b)("a",Object(n.a)({parentName:"p"},{href:"https://learn.hashicorp.com/nomad/transport-security/enable-tls"}),"Securing Nomad with TLS")," guide provides instructions on configuring and enabling TLS."),Object(s.b)("h2",{className:"g-type-display-3"},Object(s.b)("a",Object(n.a)({parentName:"h2"},{className:"__permalink-h",href:"#start-nomad","aria-label":"start nomad permalink"}),"\xbb"),Object(s.b)("a",Object(n.a)({parentName:"h2"},{className:"__target-h",id:"start-nomad","aria-hidden":""})),"Start Nomad"),Object(s.b)("p",null,"Enable and start Nomad using the systemctl command responsible for controlling systemd managed services. Check the status of the nomad service using systemctl."),Object(s.b)("pre",{className:"language-text"},Object(s.b)("code",Object(n.a)({parentName:"pre"},{className:"language-text"}),"sudo systemctl enable nomad\nsudo systemctl start nomad\nsudo systemctl status nomad\n")),Object(s.b)("h2",{className:"g-type-display-3"},Object(s.b)("a",Object(n.a)({parentName:"h2"},{className:"__permalink-h",href:"#next-steps","aria-label":"next steps permalink"}),"\xbb"),Object(s.b)("a",Object(n.a)({parentName:"h2"},{className:"__target-h",id:"next-steps","aria-hidden":""})),"Next Steps"),Object(s.b)("ul",null,Object(s.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),"Read ",Object(s.b)("a",Object(n.a)({parentName:"li"},{href:"https://learn.hashicorp.com/nomad/operating-nomad/outage"}),"Outage Recovery")," to learn\nthe steps required to recover from a Nomad cluster outage."),Object(s.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),"Read ",Object(s.b)("a",Object(n.a)({parentName:"li"},{href:"https://learn.hashicorp.com/nomad/operating-nomad/autopilot"}),"Autopilot")," to learn about\nfeatures in Nomad 0.8 to allow for automatic operator-friendly\nmanagement of Nomad servers.")))}m.isMDXComponent=!0},KTxD:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/docs/install/production/deployment-guide",function(){return t("3fzR")}])}},[["KTxD",0,1,2,4,3,5,6]]]);