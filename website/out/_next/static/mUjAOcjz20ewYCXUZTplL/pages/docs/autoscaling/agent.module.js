(window.webpackJsonp=window.webpackJsonp||[]).push([[48],{WlrT:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return o}));var n=t("wx14"),c=t("Ff2n"),r=t("q1tI"),l=t.n(r),i=t("7ljp"),b=t("j1un"),p=(l.a.createElement,{}),s=Object(b.a)({layout:"docs",page_title:"Agent",sidebar_title:"Agent",description:"The Nomad Autoscaler is a long lived process which coordinates scaling activates.",__resourcePath:"docs/autoscaling/agent.mdx",__scans:{}});function o(e){var{components:a}=e,t=Object(c.a)(e,["components"]);return Object(i.b)(s,Object(n.a)({},p,t,{components:a,mdxType:"MDXLayout"}),Object(i.b)("h1",{className:"g-type-display-2"},Object(i.b)("a",Object(n.a)({parentName:"h1"},{className:"__permalink-h",href:"#nomad-autoscaler-agent","aria-label":"nomad autoscaler agent permalink"}),"\xbb"),Object(i.b)("a",Object(n.a)({parentName:"h1"},{className:"__target-h",id:"nomad-autoscaler-agent","aria-hidden":""})),"Nomad Autoscaler Agent"),Object(i.b)("p",null,"The Nomad Autoscaler agent has a variety of parameters that can be specified\nvia configuration files or command-line flags. Configuration files are written\nin ",Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"https://github.com/hashicorp/hcl/tree/hcl2"}),"HCL"),". The Nomad Autoscaler can read and combine parameters from\nmultiple configuration files or directories to configure the agent."),Object(i.b)("h2",{className:"g-type-display-3"},Object(i.b)("a",Object(n.a)({parentName:"h2"},{className:"__permalink-h",href:"#nomad-namespaces","aria-label":"nomad namespaces permalink"}),"\xbb"),Object(i.b)("a",Object(n.a)({parentName:"h2"},{className:"__target-h",id:"nomad-namespaces","aria-hidden":""})),"Nomad Namespaces"),Object(i.b)("p",null,"The Nomad Autoscaler currently has limited support for\n",Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"https://learn.hashicorp.com/nomad/governance-and-policy/namespaces"}),"Nomad Namespaces"),". The ",Object(i.b)("inlineCode",{parentName:"p"},"nomad")," configuration below supports\nspecifying a namespace; if configured with a namespace, the Autoscaler will\nretrieve scaling policies and perform autoscaling only for jobs in that\nnamespace. A future version will include support for multiple namespaces."),Object(i.b)("h2",{className:"g-type-display-3"},Object(i.b)("a",Object(n.a)({parentName:"h2"},{className:"__permalink-h",href:"#nomad-acls","aria-label":"nomad acls permalink"}),"\xbb"),Object(i.b)("a",Object(n.a)({parentName:"h2"},{className:"__target-h",id:"nomad-acls","aria-hidden":""})),"Nomad ACLs"),Object(i.b)("p",null,"The Nomad Autoscaler can be configured to interact with an ACL-enabled Nomad\ncluster. Nomad 0.11 includes the ",Object(i.b)("inlineCode",{parentName:"p"},"scale")," ACL policy disposition specifically for\nsupporting the operations of the Nomad Autoscaler. Therefore, the\nfollowing policy is sufficient for creating an ACL token that can be used by\nthe autoscaler for fetching scaling policies and scaling jobs:"),Object(i.b)("pre",{className:"language-hcl"},Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-hcl"}),"namespace ",Object(i.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"default"')," ",Object(i.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(i.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),"policy")," ",Object(i.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(i.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"scale"'),"\n",Object(i.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n")),Object(i.b)("p",null,"Other APM and target plugins may require additional ACLs; see the plugin documentation for more information."),Object(i.b)("h2",{className:"g-type-display-3"},Object(i.b)("a",Object(n.a)({parentName:"h2"},{className:"__permalink-h",href:"#load-order-and-merging","aria-label":"load order and merging permalink"}),"\xbb"),Object(i.b)("a",Object(n.a)({parentName:"h2"},{className:"__target-h",id:"load-order-and-merging","aria-hidden":""})),"Load Order and Merging"),Object(i.b)("p",null,"The Nomad Autoscaler agent supports multiple configuration files, which can be\nprovided using the ",Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"/docs/autoscaling/cli#config"}),Object(i.b)("inlineCode",{parentName:"a"},"-config"))," CLI flag. The flag can\naccept either a file or folder. In the case of a folder, any ",Object(i.b)("inlineCode",{parentName:"p"},".hcl")," and ",Object(i.b)("inlineCode",{parentName:"p"},".json"),"\nfiles in the folder will be loaded and merged in lexicographical order. Directories\nare not loaded recursively."),Object(i.b)("p",null,"For example:"),Object(i.b)("pre",{className:"language-shell-session"},Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-shell-session"}),Object(i.b)("span",Object(n.a)({parentName:"code"},{className:"token command"}),Object(i.b)("span",Object(n.a)({parentName:"span"},{className:"token sh important"}),"$")," ",Object(i.b)("span",Object(n.a)({parentName:"span"},{className:"token bash language-bash"}),"nomad-autoscaler agent -config",Object(i.b)("span",Object(n.a)({parentName:"span"},{className:"token operator"}),"="),"autoscaler.conf -config",Object(i.b)("span",Object(n.a)({parentName:"span"},{className:"token operator"}),"="),"/etc/nomad-autoscaler -config",Object(i.b)("span",Object(n.a)({parentName:"span"},{className:"token operator"}),"="),"extra.json")),"\n")),Object(i.b)("p",null,"This will load configuration from ",Object(i.b)("inlineCode",{parentName:"p"},"autoscaler.conf"),", from ",Object(i.b)("inlineCode",{parentName:"p"},".hcl")," and ",Object(i.b)("inlineCode",{parentName:"p"},".json")," files\nunder ",Object(i.b)("inlineCode",{parentName:"p"},"/etc/nomad-autoscaler"),", and finally from ",Object(i.b)("inlineCode",{parentName:"p"},"extra.json"),". As each file is\nprocessed, its contents are merged into the existing configuration. When merging,\nany non-empty values from the latest config file will append or replace\nparameters in the current configuration. An empty value means ",Object(i.b)("inlineCode",{parentName:"p"},'""')," for strings,\n",Object(i.b)("inlineCode",{parentName:"p"},"0")," for integer or float values, and ",Object(i.b)("inlineCode",{parentName:"p"},"false")," for booleans."),Object(i.b)("h2",{className:"g-type-display-3"},Object(i.b)("a",Object(n.a)({parentName:"h2"},{className:"__permalink-h",href:"#sighup-reload","aria-label":"sighup reload permalink"}),"\xbb"),Object(i.b)("a",Object(n.a)({parentName:"h2"},{className:"__target-h",id:"sighup-reload","aria-hidden":""})),"SIGHUP Reload"),Object(i.b)("p",null,"The Nomad Autoscaler agent supports handling the ",Object(i.b)("inlineCode",{parentName:"p"},"SIGHUP")," signal for reloading without the need for\nrestarting the agent. When sending a ",Object(i.b)("inlineCode",{parentName:"p"},"SIGHUP")," signal to the agent process, the agent will perform the\nfollowing actions."),Object(i.b)("ul",null,Object(i.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),"reload the contents of the scaling policy directory as defined by the ",Object(i.b)("a",Object(n.a)({parentName:"li"},{href:"/docs/autoscaling/cli#policy-dir"}),Object(i.b)("inlineCode",{parentName:"a"},"-policy-dir")),"\nparameter.")),Object(i.b)("h2",{className:"g-type-display-3"},Object(i.b)("a",Object(n.a)({parentName:"h2"},{className:"__permalink-h",href:"#general-parameters","aria-label":"general parameters permalink"}),"\xbb"),Object(i.b)("a",Object(n.a)({parentName:"h2"},{className:"__target-h",id:"general-parameters","aria-hidden":""})),"General Parameters"),Object(i.b)("ul",null,Object(i.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(i.b)("a",Object(n.a)({parentName:"li"},{id:"log_level",className:"__target-lic","aria-hidden":""})),Object(i.b)("p",{parentName:"li"},Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"#log_level","aria-label":"log_level permalink",className:"__permalink-lic"}),Object(i.b)("inlineCode",{parentName:"a"},"log_level"))," ",Object(i.b)("inlineCode",{parentName:"p"},'(string: "INFO")')," - Specify the verbosity level of Nomad\nAutoscaler's logs. Valid values include DEBUG, INFO, and WARN, in decreasing\norder of verbosity.")),Object(i.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(i.b)("a",Object(n.a)({parentName:"li"},{id:"log_json",className:"__target-lic","aria-hidden":""})),Object(i.b)("p",{parentName:"li"},Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"#log_json","aria-label":"log_json permalink",className:"__permalink-lic"}),Object(i.b)("inlineCode",{parentName:"a"},"log_json"))," ",Object(i.b)("inlineCode",{parentName:"p"},"(bool: false)")," - Output logs in a JSON format.")),Object(i.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(i.b)("a",Object(n.a)({parentName:"li"},{id:"plugin_dir",className:"__target-lic","aria-hidden":""})),Object(i.b)("p",{parentName:"li"},Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"#plugin_dir","aria-label":"plugin_dir permalink",className:"__permalink-lic"}),Object(i.b)("inlineCode",{parentName:"a"},"plugin_dir"))," ",Object(i.b)("inlineCode",{parentName:"p"},'(string: "./plugins")')," - The plugin directory is used to\ndiscover Nomad Autoscaler plugins."))),Object(i.b)("h2",{className:"g-type-display-3"},Object(i.b)("a",Object(n.a)({parentName:"h2"},{className:"__permalink-h",href:"#http-block","aria-label":"http block permalink"}),"\xbb"),Object(i.b)("a",Object(n.a)({parentName:"h2"},{className:"__target-h",id:"http-block","aria-hidden":""})),Object(i.b)("inlineCode",{parentName:"h2"},"http")," Block"),Object(i.b)("p",null,"The ",Object(i.b)("inlineCode",{parentName:"p"},"http")," block configures the Nomad Autoscaler's HTTP endpoint."),Object(i.b)("pre",{className:"language-hcl"},Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-hcl"}),Object(i.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"http")," ",Object(i.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(i.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),"bind_address")," ",Object(i.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(i.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"10.0.0.10"'),"\n  ",Object(i.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),"bind_port"),"    ",Object(i.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(i.b)("span",Object(n.a)({parentName:"code"},{className:"token number"}),"9999"),"\n",Object(i.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n")),Object(i.b)("h3",{className:"g-type-display-4"},Object(i.b)("a",Object(n.a)({parentName:"h3"},{className:"__permalink-h",href:"#http-parameters","aria-label":"http parameters permalink"}),"\xbb"),Object(i.b)("a",Object(n.a)({parentName:"h3"},{className:"__target-h",id:"http-parameters","aria-hidden":""})),Object(i.b)("inlineCode",{parentName:"h3"},"http")," Parameters"),Object(i.b)("ul",null,Object(i.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(i.b)("a",Object(n.a)({parentName:"li"},{id:"bind_address",className:"__target-lic","aria-hidden":""})),Object(i.b)("p",{parentName:"li"},Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"#bind_address","aria-label":"bind_address permalink",className:"__permalink-lic"}),Object(i.b)("inlineCode",{parentName:"a"},"bind_address"))," ",Object(i.b)("inlineCode",{parentName:"p"},'(string: "127.0.0.1")')," - The HTTP address that the server will\nbind to.")),Object(i.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(i.b)("a",Object(n.a)({parentName:"li"},{id:"bind_port",className:"__target-lic","aria-hidden":""})),Object(i.b)("p",{parentName:"li"},Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"#bind_port","aria-label":"bind_port permalink",className:"__permalink-lic"}),Object(i.b)("inlineCode",{parentName:"a"},"bind_port"))," ",Object(i.b)("inlineCode",{parentName:"p"},"(int: 8080)")," - The port that the server will bind to."))),Object(i.b)("h2",{className:"g-type-display-3"},Object(i.b)("a",Object(n.a)({parentName:"h2"},{className:"__permalink-h",href:"#nomad-block","aria-label":"nomad block permalink"}),"\xbb"),Object(i.b)("a",Object(n.a)({parentName:"h2"},{className:"__target-h",id:"nomad-block","aria-hidden":""})),Object(i.b)("inlineCode",{parentName:"h2"},"nomad")," Block"),Object(i.b)("p",null,"The ",Object(i.b)("inlineCode",{parentName:"p"},"nomad")," block configures the Nomad Autoscaler's Nomad client."),Object(i.b)("pre",{className:"language-hcl"},Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-hcl"}),Object(i.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"nomad")," ",Object(i.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(i.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),"address")," ",Object(i.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(i.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"http://my-nomad.systems:4646"'),"\n  ",Object(i.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),"region"),"  ",Object(i.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(i.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"esp-vlc-1"'),"\n",Object(i.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n")),Object(i.b)("h3",{className:"g-type-display-4"},Object(i.b)("a",Object(n.a)({parentName:"h3"},{className:"__permalink-h",href:"#nomad-parameters","aria-label":"nomad parameters permalink"}),"\xbb"),Object(i.b)("a",Object(n.a)({parentName:"h3"},{className:"__target-h",id:"nomad-parameters","aria-hidden":""})),Object(i.b)("inlineCode",{parentName:"h3"},"nomad")," Parameters"),Object(i.b)("ul",null,Object(i.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(i.b)("a",Object(n.a)({parentName:"li"},{id:"address",className:"__target-lic","aria-hidden":""})),Object(i.b)("p",{parentName:"li"},Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"#address","aria-label":"address permalink",className:"__permalink-lic"}),Object(i.b)("inlineCode",{parentName:"a"},"address"))," ",Object(i.b)("inlineCode",{parentName:"p"},'(string: "http://127.0.0.1:4646")')," - The address of the Nomad server\nin the form of ",Object(i.b)("inlineCode",{parentName:"p"},"protocol://addr:port"),".")),Object(i.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(i.b)("a",Object(n.a)({parentName:"li"},{id:"region",className:"__target-lic","aria-hidden":""})),Object(i.b)("p",{parentName:"li"},Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"#region","aria-label":"region permalink",className:"__permalink-lic"}),Object(i.b)("inlineCode",{parentName:"a"},"region"))," ",Object(i.b)("inlineCode",{parentName:"p"},'(string: "global")')," - The region of the Nomad servers to connect with.")),Object(i.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(i.b)("a",Object(n.a)({parentName:"li"},{id:"namespace",className:"__target-lic","aria-hidden":""})),Object(i.b)("p",{parentName:"li"},Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"#namespace","aria-label":"namespace permalink",className:"__permalink-lic"}),Object(i.b)("inlineCode",{parentName:"a"},"namespace"))," ",Object(i.b)("inlineCode",{parentName:"p"},'(string: "")')," - The target namespace for queries and actions bound\nto a namespace.")),Object(i.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(i.b)("a",Object(n.a)({parentName:"li"},{id:"token",className:"__target-lic","aria-hidden":""})),Object(i.b)("p",{parentName:"li"},Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"#token","aria-label":"token permalink",className:"__permalink-lic"}),Object(i.b)("inlineCode",{parentName:"a"},"token"))," ",Object(i.b)("inlineCode",{parentName:"p"},'(string: "")')," - The SecretID of an ACL token to use to authenticate\nAPI requests with.")),Object(i.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(i.b)("a",Object(n.a)({parentName:"li"},{id:"http_auth",className:"__target-lic","aria-hidden":""})),Object(i.b)("p",{parentName:"li"},Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"#http_auth","aria-label":"http_auth permalink",className:"__permalink-lic"}),Object(i.b)("inlineCode",{parentName:"a"},"http_auth"))," ",Object(i.b)("inlineCode",{parentName:"p"},'(string: "")')," - The authentication information to use when connecting\nto a Nomad API which is using HTTP authentication.")),Object(i.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(i.b)("a",Object(n.a)({parentName:"li"},{id:"ca_cert",className:"__target-lic","aria-hidden":""})),Object(i.b)("p",{parentName:"li"},Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"#ca_cert","aria-label":"ca_cert permalink",className:"__permalink-lic"}),Object(i.b)("inlineCode",{parentName:"a"},"ca_cert"))," ",Object(i.b)("inlineCode",{parentName:"p"},'(string: "")')," - Path to a PEM encoded CA cert file to use to verify\nthe Nomad server SSL certificate.")),Object(i.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(i.b)("a",Object(n.a)({parentName:"li"},{id:"ca_path",className:"__target-lic","aria-hidden":""})),Object(i.b)("p",{parentName:"li"},Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"#ca_path","aria-label":"ca_path permalink",className:"__permalink-lic"}),Object(i.b)("inlineCode",{parentName:"a"},"ca_path"))," ",Object(i.b)("inlineCode",{parentName:"p"},'(string: "")')," - Path to a directory of PEM encoded CA cert files to\nverify the Nomad server SSL certificate.")),Object(i.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(i.b)("a",Object(n.a)({parentName:"li"},{id:"client_cert",className:"__target-lic","aria-hidden":""})),Object(i.b)("p",{parentName:"li"},Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"#client_cert","aria-label":"client_cert permalink",className:"__permalink-lic"}),Object(i.b)("inlineCode",{parentName:"a"},"client_cert"))," ",Object(i.b)("inlineCode",{parentName:"p"},'(string: "")')," - Path to a PEM encoded client certificate for TLS\nauthentication to the Nomad server.")),Object(i.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(i.b)("a",Object(n.a)({parentName:"li"},{id:"client_key",className:"__target-lic","aria-hidden":""})),Object(i.b)("p",{parentName:"li"},Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"#client_key","aria-label":"client_key permalink",className:"__permalink-lic"}),Object(i.b)("inlineCode",{parentName:"a"},"client_key"))," ",Object(i.b)("inlineCode",{parentName:"p"},'(string: "")')," - Path to an unencrypted PEM encoded private key\nmatching the client certificate.")),Object(i.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(i.b)("a",Object(n.a)({parentName:"li"},{id:"tls_server_name",className:"__target-lic","aria-hidden":""})),Object(i.b)("p",{parentName:"li"},Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"#tls_server_name","aria-label":"tls_server_name permalink",className:"__permalink-lic"}),Object(i.b)("inlineCode",{parentName:"a"},"tls_server_name"))," ",Object(i.b)("inlineCode",{parentName:"p"},'(string: "")')," - The server name to use as the SNI host when\nconnecting via TLS.")),Object(i.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(i.b)("a",Object(n.a)({parentName:"li"},{id:"skip_verify",className:"__target-lic","aria-hidden":""})),Object(i.b)("p",{parentName:"li"},Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"#skip_verify","aria-label":"skip_verify permalink",className:"__permalink-lic"}),Object(i.b)("inlineCode",{parentName:"a"},"skip_verify"))," ",Object(i.b)("inlineCode",{parentName:"p"},"(bool: false)")," - Do not verify TLS certificates. This is strongly\ndiscouraged."))),Object(i.b)("h2",{className:"g-type-display-3"},Object(i.b)("a",Object(n.a)({parentName:"h2"},{className:"__permalink-h",href:"#policy-block","aria-label":"policy block permalink"}),"\xbb"),Object(i.b)("a",Object(n.a)({parentName:"h2"},{className:"__target-h",id:"policy-block","aria-hidden":""})),Object(i.b)("inlineCode",{parentName:"h2"},"policy")," Block"),Object(i.b)("p",null,"The ",Object(i.b)("inlineCode",{parentName:"p"},"policy")," block configures the Nomad Autoscaler's policy handling."),Object(i.b)("pre",{className:"language-hcl"},Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-hcl"}),Object(i.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"policy")," ",Object(i.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(i.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),"dir"),"              ",Object(i.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(i.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"/opt/nomad-autoscaler/policies"'),"\n  ",Object(i.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),"default_cooldown")," ",Object(i.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(i.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"2m"'),"\n",Object(i.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n")),Object(i.b)("h3",{className:"g-type-display-4"},Object(i.b)("a",Object(n.a)({parentName:"h3"},{className:"__permalink-h",href:"#policy-parameters","aria-label":"policy parameters permalink"}),"\xbb"),Object(i.b)("a",Object(n.a)({parentName:"h3"},{className:"__target-h",id:"policy-parameters","aria-hidden":""})),Object(i.b)("inlineCode",{parentName:"h3"},"policy")," Parameters"),Object(i.b)("ul",null,Object(i.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(i.b)("a",Object(n.a)({parentName:"li"},{id:"dir",className:"__target-lic","aria-hidden":""})),Object(i.b)("p",{parentName:"li"},Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"#dir","aria-label":"dir permalink",className:"__permalink-lic"}),Object(i.b)("inlineCode",{parentName:"a"},"dir"))," ",Object(i.b)("inlineCode",{parentName:"p"},'(string: "")')," - The path to a directory used to load scaling policies.")),Object(i.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(i.b)("a",Object(n.a)({parentName:"li"},{id:"default_cooldown",className:"__target-lic","aria-hidden":""})),Object(i.b)("p",{parentName:"li"},Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"#default_cooldown","aria-label":"default_cooldown permalink",className:"__permalink-lic"}),Object(i.b)("inlineCode",{parentName:"a"},"default_cooldown"))," ",Object(i.b)("inlineCode",{parentName:"p"},'(string: "5m")')," - The default cooldown that will be applied\nto all scaling policies which do not specify a cooldown period.")),Object(i.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(i.b)("a",Object(n.a)({parentName:"li"},{id:"default_evaluation_interval",className:"__target-lic","aria-hidden":""})),Object(i.b)("p",{parentName:"li"},Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"#default_evaluation_interval","aria-label":"default_evaluation_interval permalink",className:"__permalink-lic"}),Object(i.b)("inlineCode",{parentName:"a"},"default_evaluation_interval"))," ",Object(i.b)("inlineCode",{parentName:"p"},'(string: "10s")')," - The default evaluation interval\nthat will be applied to all scaling policies which do not specify an evaluation\ninterval."))),Object(i.b)("h2",{className:"g-type-display-3"},Object(i.b)("a",Object(n.a)({parentName:"h2"},{className:"__permalink-h",href:"#apm-block","aria-label":"apm block permalink"}),"\xbb"),Object(i.b)("a",Object(n.a)({parentName:"h2"},{className:"__target-h",id:"apm-block","aria-hidden":""})),Object(i.b)("inlineCode",{parentName:"h2"},"apm")," Block"),Object(i.b)("p",null,"The ",Object(i.b)("inlineCode",{parentName:"p"},"apm")," block is used to configure application performance metric (APM) plugins."),Object(i.b)("pre",{className:"language-hcl"},Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-hcl"}),"apm ",Object(i.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"example-apm-plugin"')," ",Object(i.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(i.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),"driver")," ",Object(i.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(i.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"example-apm-plugin"'),"\n  ",Object(i.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),"args"),"   ",Object(i.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(i.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"["),Object(i.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"-my-flag"'),Object(i.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"]"),"\n\n  ",Object(i.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),"config")," ",Object(i.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(i.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n    ",Object(i.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),"address")," ",Object(i.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(i.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"http://127.0.0.1:9090"'),"\n  ",Object(i.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n",Object(i.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n")),Object(i.b)("h3",{className:"g-type-display-4"},Object(i.b)("a",Object(n.a)({parentName:"h3"},{className:"__permalink-h",href:"#apm-parameters","aria-label":"apm parameters permalink"}),"\xbb"),Object(i.b)("a",Object(n.a)({parentName:"h3"},{className:"__target-h",id:"apm-parameters","aria-hidden":""})),Object(i.b)("inlineCode",{parentName:"h3"},"apm")," Parameters"),Object(i.b)("ul",null,Object(i.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(i.b)("a",Object(n.a)({parentName:"li"},{id:"args",className:"__target-lic","aria-hidden":""})),Object(i.b)("p",{parentName:"li"},Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"#args","aria-label":"args permalink",className:"__permalink-lic"}),Object(i.b)("inlineCode",{parentName:"a"},"args"))," ",Object(i.b)("inlineCode",{parentName:"p"},"(array<string>: [])")," - Specifies a set of arguments to pass to the\nplugin binary when it is executed.")),Object(i.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(i.b)("a",Object(n.a)({parentName:"li"},{id:"driver",className:"__target-lic","aria-hidden":""})),Object(i.b)("p",{parentName:"li"},Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"#driver","aria-label":"driver permalink",className:"__permalink-lic"}),Object(i.b)("inlineCode",{parentName:"a"},"driver"))," ",Object(i.b)("inlineCode",{parentName:"p"},'(string: "")')," - The plugin's executable name relative to to the\nplugin_dir. If the plugin has a suffix, such as .exe, this should be omitted.")),Object(i.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(i.b)("a",Object(n.a)({parentName:"li"},{id:"config",className:"__target-lic","aria-hidden":""})),Object(i.b)("p",{parentName:"li"},Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"#config","aria-label":"config permalink",className:"__permalink-lic"}),Object(i.b)("inlineCode",{parentName:"a"},"config"))," ",Object(i.b)("inlineCode",{parentName:"p"},"(map<string><string>: nil)")," - Specifies configuration values for\nthe plugin either as HCL or JSON. The accepted values are plugin specific.\nPlease refer to the individual plugin's documentation."))),Object(i.b)("h2",{className:"g-type-display-3"},Object(i.b)("a",Object(n.a)({parentName:"h2"},{className:"__permalink-h",href:"#target-block","aria-label":"target block permalink"}),"\xbb"),Object(i.b)("a",Object(n.a)({parentName:"h2"},{className:"__target-h",id:"target-block","aria-hidden":""})),Object(i.b)("inlineCode",{parentName:"h2"},"target")," Block"),Object(i.b)("p",null,"The ",Object(i.b)("inlineCode",{parentName:"p"},"target")," block is used to configure scaling target plugins."),Object(i.b)("pre",{className:"language-hcl"},Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-hcl"}),"target ",Object(i.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"example-target-plugin"')," ",Object(i.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(i.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),"driver")," ",Object(i.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(i.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"example-target-plugin"'),"\n  ",Object(i.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),"args"),"   ",Object(i.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(i.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"["),Object(i.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"-my-flag"'),Object(i.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"]"),"\n\n  ",Object(i.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),"config")," ",Object(i.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(i.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n    ",Object(i.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),"region")," ",Object(i.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(i.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"esp-vlc-1"'),"\n  ",Object(i.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n",Object(i.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n")),Object(i.b)("h3",{className:"g-type-display-4"},Object(i.b)("a",Object(n.a)({parentName:"h3"},{className:"__permalink-h",href:"#target-parameters","aria-label":"target parameters permalink"}),"\xbb"),Object(i.b)("a",Object(n.a)({parentName:"h3"},{className:"__target-h",id:"target-parameters","aria-hidden":""})),Object(i.b)("inlineCode",{parentName:"h3"},"target")," Parameters"),Object(i.b)("ul",null,Object(i.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(i.b)("a",Object(n.a)({parentName:"li"},{id:"args-1",className:"__target-lic","aria-hidden":""})),Object(i.b)("p",{parentName:"li"},Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"#args-1","aria-label":"args permalink",className:"__permalink-lic"}),Object(i.b)("inlineCode",{parentName:"a"},"args"))," ",Object(i.b)("inlineCode",{parentName:"p"},"(array<string>: [])")," - Specifies a set of arguments to pass to the\nplugin binary when it is executed.")),Object(i.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(i.b)("a",Object(n.a)({parentName:"li"},{id:"driver-1",className:"__target-lic","aria-hidden":""})),Object(i.b)("p",{parentName:"li"},Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"#driver-1","aria-label":"driver permalink",className:"__permalink-lic"}),Object(i.b)("inlineCode",{parentName:"a"},"driver"))," ",Object(i.b)("inlineCode",{parentName:"p"},'(string: "")')," - The plugin's executable name relative to to the\nplugin_dir. If the plugin has a suffix, such as .exe, this should be omitted.")),Object(i.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(i.b)("a",Object(n.a)({parentName:"li"},{id:"config-1",className:"__target-lic","aria-hidden":""})),Object(i.b)("p",{parentName:"li"},Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"#config-1","aria-label":"config permalink",className:"__permalink-lic"}),Object(i.b)("inlineCode",{parentName:"a"},"config"))," ",Object(i.b)("inlineCode",{parentName:"p"},"(map<string><string>: nil)")," - Specifies configuration values for\nthe plugin either as HCL or JSON. The accepted values are plugin specific.\nPlease refer to the individual plugin's documentation."))),Object(i.b)("h2",{className:"g-type-display-3"},Object(i.b)("a",Object(n.a)({parentName:"h2"},{className:"__permalink-h",href:"#strategy-block","aria-label":"strategy block permalink"}),"\xbb"),Object(i.b)("a",Object(n.a)({parentName:"h2"},{className:"__target-h",id:"strategy-block","aria-hidden":""})),Object(i.b)("inlineCode",{parentName:"h2"},"strategy")," Block"),Object(i.b)("p",null,"The ",Object(i.b)("inlineCode",{parentName:"p"},"strategy")," block is used to configure scaling strategy plugins."),Object(i.b)("pre",{className:"language-hcl"},Object(i.b)("code",Object(n.a)({parentName:"pre"},{className:"language-hcl"}),"strategy ",Object(i.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"example-strategy-plugin"')," ",Object(i.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(i.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),"driver")," ",Object(i.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(i.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"example-strategy-plugin"'),"\n  ",Object(i.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),"args"),"   ",Object(i.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(i.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"["),Object(i.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"-my-flag"'),Object(i.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"]"),"\n\n  ",Object(i.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),"config")," ",Object(i.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(i.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n    ",Object(i.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),"algorithm")," ",Object(i.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(i.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"complex"'),"\n  ",Object(i.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n",Object(i.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n")),Object(i.b)("h3",{className:"g-type-display-4"},Object(i.b)("a",Object(n.a)({parentName:"h3"},{className:"__permalink-h",href:"#strategy-parameters","aria-label":"strategy parameters permalink"}),"\xbb"),Object(i.b)("a",Object(n.a)({parentName:"h3"},{className:"__target-h",id:"strategy-parameters","aria-hidden":""})),Object(i.b)("inlineCode",{parentName:"h3"},"strategy")," Parameters"),Object(i.b)("ul",null,Object(i.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(i.b)("a",Object(n.a)({parentName:"li"},{id:"args-2",className:"__target-lic","aria-hidden":""})),Object(i.b)("p",{parentName:"li"},Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"#args-2","aria-label":"args permalink",className:"__permalink-lic"}),Object(i.b)("inlineCode",{parentName:"a"},"args"))," ",Object(i.b)("inlineCode",{parentName:"p"},"(array<string>: [])")," - Specifies a set of arguments to pass to the\nplugin binary when it is executed.")),Object(i.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(i.b)("a",Object(n.a)({parentName:"li"},{id:"driver-2",className:"__target-lic","aria-hidden":""})),Object(i.b)("p",{parentName:"li"},Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"#driver-2","aria-label":"driver permalink",className:"__permalink-lic"}),Object(i.b)("inlineCode",{parentName:"a"},"driver"))," ",Object(i.b)("inlineCode",{parentName:"p"},'(string: "")')," - The plugin's executable name relative to to the\nplugin_dir. If the plugin has a suffix, such as .exe, this should be omitted.")),Object(i.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(i.b)("a",Object(n.a)({parentName:"li"},{id:"config-2",className:"__target-lic","aria-hidden":""})),Object(i.b)("p",{parentName:"li"},Object(i.b)("a",Object(n.a)({parentName:"p"},{href:"#config-2","aria-label":"config permalink",className:"__permalink-lic"}),Object(i.b)("inlineCode",{parentName:"a"},"config"))," ",Object(i.b)("inlineCode",{parentName:"p"},"(map<string><string>: nil)")," - Specifies configuration values for\nthe plugin either as HCL or JSON. The accepted values are plugin specific.\nPlease refer to the individual plugin's documentation."))))}o.isMDXComponent=!0},luPh:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/docs/autoscaling/agent",function(){return t("WlrT")}])}},[["luPh",0,1,2,4,3,5,6]]]);