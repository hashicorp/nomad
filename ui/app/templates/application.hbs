<HeadLayout />
{{title (if this.system.shouldShowRegions (concat this.system.activeRegion " - ")) "Nomad" separator=" - "}}
<SvgPatterns />
{{#unless this.error}}
  {{outlet}}
{{else}}
  <div class="error-container">
    <div data-test-error class="error-message">
      {{#if this.isNoLeader}}
        <h1 data-test-error-title class="title is-spaced">No Cluster Leader</h1>
        <p data-test-error-message class="subtitle">
          The cluster has no leader. <a href="https://www.nomadproject.io/guides/outage.html"> Read about Outage Recovery.</a>
        </p>
      {{else if this.is500}}
        <h1 data-test-error-title class="title is-spaced">Server Error</h1>
        <p data-test-error-message class="subtitle">A server error prevented data from being sent to the client.</p>
      {{else if this.is404}}
        <h1 data-test-error-title class="title is-spaced">Not Found</h1>
        <p data-test-error-message class="subtitle">What you're looking for couldn't be found. It either doesn't exist or you are not authorized to see it.</p>
      {{else if this.is403}}
        <h1 data-test-error-title class="title is-spaced">Not Authorized</h1>
        {{#if this.token.secret}}
          <p data-test-error-message class="subtitle">Your <LinkTo @route="settings.tokens" data-test-error-acl-link>ACL token</LinkTo> does not provide the required permissions. Contact your administrator if this is an error.</p>
        {{else}}
          <p data-test-error-message class="subtitle">Provide an <LinkTo @route="settings.tokens" data-test-error-acl-link>ACL token</LinkTo> with requisite permissions to view this.</p>
        {{/if}}
      {{else}}
        <h1 data-test-error-title class="title is-spaced">Error</h1>
        <p data-test-error-message class="subtitle">Something went wrong.</p>
      {{/if}}
      {{#if (eq this.config.environment "development")}}
        <pre class="error-stack-trace"><code>{{this.errorStr}}</code></pre>
      {{/if}}
    </div>
    <div class="error-links">
      <LinkTo @route="jobs" data-test-error-jobs-link class="button is-white">Go to Jobs</LinkTo>
      <LinkTo @route="clients" data-test-error-clients-link class="button is-white">Go to Clients</LinkTo>
    </div>
  </div>
{{/unless}}
