(window.webpackJsonp=window.webpackJsonp||[]).push([[108],{"+Xqf":function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return m}));var n=t("wx14"),i=t("Ff2n"),r=t("q1tI"),l=t.n(r),c=t("7ljp"),b=t("j1un"),s=(l.a.createElement,{}),o=Object(b.a)({layout:"docs",page_title:"Commands: monitor",sidebar_title:"monitor",description:"Stream the logs of a running nomad agent.\n",__resourcePath:"docs/commands/monitor.mdx",__scans:{}});function m(e){var{components:a}=e,t=Object(i.a)(e,["components"]);return Object(c.b)(o,Object(n.a)({},s,t,{components:a,mdxType:"MDXLayout"}),Object(c.b)("h1",{className:"g-type-display-2"},Object(c.b)("a",Object(n.a)({parentName:"h1"},{className:"__permalink-h",href:"#command-monitor","aria-label":"command monitor permalink"}),"\xbb"),Object(c.b)("a",Object(n.a)({parentName:"h1"},{className:"__target-h",id:"command-monitor","aria-hidden":""})),"Command: monitor"),Object(c.b)("p",null,"The ",Object(c.b)("inlineCode",{parentName:"p"},"nomad monitor")," command streams log messages for a given agent."),Object(c.b)("h2",{className:"g-type-display-3"},Object(c.b)("a",Object(n.a)({parentName:"h2"},{className:"__permalink-h",href:"#usage","aria-label":"usage permalink"}),"\xbb"),Object(c.b)("a",Object(n.a)({parentName:"h2"},{className:"__target-h",id:"usage","aria-hidden":""})),"Usage"),Object(c.b)("pre",{className:"language-plaintext"},Object(c.b)("code",Object(n.a)({parentName:"pre"},{className:"language-plaintext"}),"nomad monitor [options]\n")),Object(c.b)("p",null,"The nomad monitor command can be used to stream the logs of a\nrunning Nomad agent. Monitor will follow logs and exit when\ninterrupted or until the remote agent quits."),Object(c.b)("p",null,'The power of the monitor command is that it allows you to log\nthe agent at a relatively high log level (such as "warn"),\nbut still access debug logs and watch the debug logs if necessary.\nThe monitor command also allows you to specify a single client node id to follow.'),Object(c.b)("h2",{className:"g-type-display-3"},Object(c.b)("a",Object(n.a)({parentName:"h2"},{className:"__permalink-h",href:"#general-options","aria-label":"general options permalink"}),"\xbb"),Object(c.b)("a",Object(n.a)({parentName:"h2"},{className:"__target-h",id:"general-options","aria-hidden":""})),"General Options"),Object(c.b)("ul",null,Object(c.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(c.b)("a",Object(n.a)({parentName:"li"},{id:"address",className:"__target-lic","aria-hidden":""})),Object(c.b)("p",{parentName:"li"},Object(c.b)("a",Object(n.a)({parentName:"p"},{href:"#address","aria-label":"address permalink",className:"__permalink-lic"}),Object(c.b)("inlineCode",{parentName:"a"},"-address=<addr>")),": The address of the Nomad server. Overrides the ",Object(c.b)("inlineCode",{parentName:"p"},"NOMAD_ADDR"),"\nenvironment variable if set. Defaults to ",Object(c.b)("inlineCode",{parentName:"p"},"http://127.0.0.1:4646"),".")),Object(c.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(c.b)("a",Object(n.a)({parentName:"li"},{id:"region",className:"__target-lic","aria-hidden":""})),Object(c.b)("p",{parentName:"li"},Object(c.b)("a",Object(n.a)({parentName:"p"},{href:"#region","aria-label":"region permalink",className:"__permalink-lic"}),Object(c.b)("inlineCode",{parentName:"a"},"-region=<region>")),": The region of the Nomad server to forward commands to.\nOverrides the ",Object(c.b)("inlineCode",{parentName:"p"},"NOMAD_REGION")," environment variable if set. Defaults to the\nAgent's local region.")),Object(c.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(c.b)("a",Object(n.a)({parentName:"li"},{id:"namespace",className:"__target-lic","aria-hidden":""})),Object(c.b)("p",{parentName:"li"},Object(c.b)("a",Object(n.a)({parentName:"p"},{href:"#namespace","aria-label":"namespace permalink",className:"__permalink-lic"}),Object(c.b)("inlineCode",{parentName:"a"},"-namespace=<namespace>")),": The target namespace for queries and actions bound\nto a namespace. Overrides the NOMAD_NAMESPACE environment variable if set.\nIf set to '*', job and alloc subcommands query all namespacecs authorized to\nuser. Defaults to the \"default\" namespace.")),Object(c.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(c.b)("a",Object(n.a)({parentName:"li"},{id:"no-color",className:"__target-lic","aria-hidden":""})),Object(c.b)("p",{parentName:"li"},Object(c.b)("a",Object(n.a)({parentName:"p"},{href:"#no-color","aria-label":"no color permalink",className:"__permalink-lic"}),Object(c.b)("inlineCode",{parentName:"a"},"-no-color")),": Disables colored command output. Alternatively,\n",Object(c.b)("inlineCode",{parentName:"p"},"NOMAD_CLI_NO_COLOR")," may be set.")),Object(c.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(c.b)("a",Object(n.a)({parentName:"li"},{id:"ca-cert",className:"__target-lic","aria-hidden":""})),Object(c.b)("p",{parentName:"li"},Object(c.b)("a",Object(n.a)({parentName:"p"},{href:"#ca-cert","aria-label":"ca cert permalink",className:"__permalink-lic"}),Object(c.b)("inlineCode",{parentName:"a"},"-ca-cert=<path>")),": Path to a PEM encoded CA cert file to use to verify the\nNomad server SSL certificate. Overrides the ",Object(c.b)("inlineCode",{parentName:"p"},"NOMAD_CACERT")," environment\nvariable if set.")),Object(c.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(c.b)("a",Object(n.a)({parentName:"li"},{id:"ca-path",className:"__target-lic","aria-hidden":""})),Object(c.b)("p",{parentName:"li"},Object(c.b)("a",Object(n.a)({parentName:"p"},{href:"#ca-path","aria-label":"ca path permalink",className:"__permalink-lic"}),Object(c.b)("inlineCode",{parentName:"a"},"-ca-path=<path>")),": Path to a directory of PEM encoded CA cert files to verify\nthe Nomad server SSL certificate. If both ",Object(c.b)("inlineCode",{parentName:"p"},"-ca-cert")," and ",Object(c.b)("inlineCode",{parentName:"p"},"-ca-path")," are\nspecified, ",Object(c.b)("inlineCode",{parentName:"p"},"-ca-cert")," is used. Overrides the ",Object(c.b)("inlineCode",{parentName:"p"},"NOMAD_CAPATH")," environment\nvariable if set.")),Object(c.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(c.b)("a",Object(n.a)({parentName:"li"},{id:"client-cert",className:"__target-lic","aria-hidden":""})),Object(c.b)("p",{parentName:"li"},Object(c.b)("a",Object(n.a)({parentName:"p"},{href:"#client-cert","aria-label":"client cert permalink",className:"__permalink-lic"}),Object(c.b)("inlineCode",{parentName:"a"},"-client-cert=<path>")),": Path to a PEM encoded client certificate for TLS\nauthentication to the Nomad server. Must also specify ",Object(c.b)("inlineCode",{parentName:"p"},"-client-key"),". Overrides\nthe ",Object(c.b)("inlineCode",{parentName:"p"},"NOMAD_CLIENT_CERT")," environment variable if set.")),Object(c.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(c.b)("a",Object(n.a)({parentName:"li"},{id:"client-key",className:"__target-lic","aria-hidden":""})),Object(c.b)("p",{parentName:"li"},Object(c.b)("a",Object(n.a)({parentName:"p"},{href:"#client-key","aria-label":"client key permalink",className:"__permalink-lic"}),Object(c.b)("inlineCode",{parentName:"a"},"-client-key=<path>")),": Path to an unencrypted PEM encoded private key matching\nthe client certificate from ",Object(c.b)("inlineCode",{parentName:"p"},"-client-cert"),". Overrides the ",Object(c.b)("inlineCode",{parentName:"p"},"NOMAD_CLIENT_KEY"),"\nenvironment variable if set.")),Object(c.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(c.b)("a",Object(n.a)({parentName:"li"},{id:"tls-server-name",className:"__target-lic","aria-hidden":""})),Object(c.b)("p",{parentName:"li"},Object(c.b)("a",Object(n.a)({parentName:"p"},{href:"#tls-server-name","aria-label":"tls server name permalink",className:"__permalink-lic"}),Object(c.b)("inlineCode",{parentName:"a"},"-tls-server-name=<value>")),": The server name to use as the SNI host when connecting\nvia TLS. Overrides the ",Object(c.b)("inlineCode",{parentName:"p"},"NOMAD_TLS_SERVER_NAME")," environment variable if set.")),Object(c.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(c.b)("a",Object(n.a)({parentName:"li"},{id:"tls-skip-verify",className:"__target-lic","aria-hidden":""})),Object(c.b)("p",{parentName:"li"},Object(c.b)("a",Object(n.a)({parentName:"p"},{href:"#tls-skip-verify","aria-label":"tls skip verify permalink",className:"__permalink-lic"}),Object(c.b)("inlineCode",{parentName:"a"},"-tls-skip-verify")),": Do not verify TLS certificate. This is highly not\nrecommended. Verification will also be skipped if ",Object(c.b)("inlineCode",{parentName:"p"},"NOMAD_SKIP_VERIFY")," is set.")),Object(c.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(c.b)("a",Object(n.a)({parentName:"li"},{id:"token",className:"__target-lic","aria-hidden":""})),Object(c.b)("p",{parentName:"li"},Object(c.b)("a",Object(n.a)({parentName:"p"},{href:"#token","aria-label":"token permalink",className:"__permalink-lic"}),Object(c.b)("inlineCode",{parentName:"a"},"-token")),": The SecretID of an ACL token to use to authenticate API requests with.\nOverrides the ",Object(c.b)("inlineCode",{parentName:"p"},"NOMAD_TOKEN")," environment variable if set."))),Object(c.b)("h2",{className:"g-type-display-3"},Object(c.b)("a",Object(n.a)({parentName:"h2"},{className:"__permalink-h",href:"#monitor-options","aria-label":"monitor options permalink"}),"\xbb"),Object(c.b)("a",Object(n.a)({parentName:"h2"},{className:"__target-h",id:"monitor-options","aria-hidden":""})),"Monitor Options"),Object(c.b)("ul",null,Object(c.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(c.b)("a",Object(n.a)({parentName:"li"},{id:"log-level",className:"__target-lic","aria-hidden":""})),Object(c.b)("p",{parentName:"li"},Object(c.b)("a",Object(n.a)({parentName:"p"},{href:"#log-level","aria-label":"log level permalink",className:"__permalink-lic"}),Object(c.b)("inlineCode",{parentName:"a"},"-log-level")),": The log level to use for log streaming. Defaults to ",Object(c.b)("inlineCode",{parentName:"p"},"info"),".\nPossible values include ",Object(c.b)("inlineCode",{parentName:"p"},"trace"),", ",Object(c.b)("inlineCode",{parentName:"p"},"debug"),", ",Object(c.b)("inlineCode",{parentName:"p"},"info"),", ",Object(c.b)("inlineCode",{parentName:"p"},"warn"),", ",Object(c.b)("inlineCode",{parentName:"p"},"error"))),Object(c.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(c.b)("a",Object(n.a)({parentName:"li"},{id:"node-id",className:"__target-lic","aria-hidden":""})),Object(c.b)("p",{parentName:"li"},Object(c.b)("a",Object(n.a)({parentName:"p"},{href:"#node-id","aria-label":"node id permalink",className:"__permalink-lic"}),Object(c.b)("inlineCode",{parentName:"a"},"-node-id")),": Specifies the client node-id to stream logs from. If no\nnode-id is given the nomad server from the -address flag will be used.")),Object(c.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(c.b)("a",Object(n.a)({parentName:"li"},{id:"server-id",className:"__target-lic","aria-hidden":""})),Object(c.b)("p",{parentName:"li"},Object(c.b)("a",Object(n.a)({parentName:"p"},{href:"#server-id","aria-label":"server id permalink",className:"__permalink-lic"}),Object(c.b)("inlineCode",{parentName:"a"},"-server-id")),": Specifies the nomad server id to stream logs from. Accepts\nserver names from ",Object(c.b)("inlineCode",{parentName:"p"},"nomad server members")," and also a special ",Object(c.b)("inlineCode",{parentName:"p"},"leader")," option\nwhich will target the current leader.")),Object(c.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(c.b)("a",Object(n.a)({parentName:"li"},{id:"json",className:"__target-lic","aria-hidden":""})),Object(c.b)("p",{parentName:"li"},Object(c.b)("a",Object(n.a)({parentName:"p"},{href:"#json","aria-label":"json permalink",className:"__permalink-lic"}),Object(c.b)("inlineCode",{parentName:"a"},"-json")),": Stream logs in json format"))),Object(c.b)("h2",{className:"g-type-display-3"},Object(c.b)("a",Object(n.a)({parentName:"h2"},{className:"__permalink-h",href:"#examples","aria-label":"examples permalink"}),"\xbb"),Object(c.b)("a",Object(n.a)({parentName:"h2"},{className:"__target-h",id:"examples","aria-hidden":""})),"Examples"),Object(c.b)("pre",{className:"language-shell-session"},Object(c.b)("code",Object(n.a)({parentName:"pre"},{className:"language-shell-session"}),Object(c.b)("span",Object(n.a)({parentName:"code"},{className:"token command"}),Object(c.b)("span",Object(n.a)({parentName:"span"},{className:"token sh important"}),"$")," ",Object(c.b)("span",Object(n.a)({parentName:"span"},{className:"token bash language-bash"}),"nomad monitor -log-level",Object(c.b)("span",Object(n.a)({parentName:"span"},{className:"token operator"}),"="),"DEBUG -node-id",Object(c.b)("span",Object(n.a)({parentName:"span"},{className:"token operator"}),"="),"a57b2adb-1a30-2dda-8df0-25abb0881952")),"\n",Object(c.b)("span",Object(n.a)({parentName:"code"},{className:"token output"}),"2019-11-04T12:22:08.528-0500 [DEBUG] http: request complete: method=GET path=/v1/agent/health?type=server duration=1.445739ms\n2019-11-04T12:22:09.892-0500 [DEBUG] nomad: memberlist: Stream connection from=127.0.0.1:53628\n\n"),Object(c.b)("span",Object(n.a)({parentName:"code"},{className:"token command"}),Object(c.b)("span",Object(n.a)({parentName:"span"},{className:"token sh important"}),"$")," ",Object(c.b)("span",Object(n.a)({parentName:"span"},{className:"token bash language-bash"}),"nomad monitor -log-level",Object(c.b)("span",Object(n.a)({parentName:"span"},{className:"token operator"}),"="),"DEBUG -json",Object(c.b)("span",Object(n.a)({parentName:"span"},{className:"token operator"}),"="),"true")),"\n",Object(c.b)("span",Object(n.a)({parentName:"code"},{className:"token output"}),'{"@level":"debug","@message":"request complete"...}\n\n'))))}m.isMDXComponent=!0},QiCy:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/docs/commands/monitor",function(){return t("+Xqf")}])}},[["QiCy",0,1,2,4,3,5,6]]]);