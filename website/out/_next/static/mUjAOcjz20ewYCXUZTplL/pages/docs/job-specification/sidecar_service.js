(window.webpackJsonp=window.webpackJsonp||[]).push([[251],{JKME:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/docs/job-specification/sidecar_service",function(){return t("tIfv")}])},tIfv:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return j}));var c,n=t("wx14"),s=t("Ff2n"),b=t("q1tI"),o=t.n(b),p=t("7ljp"),r=t("j1un"),i=(o.a.createElement,c="Placement",function(e){return console.warn("Component "+c+" was not imported, exported, or provided by MDXProvider as global scope"),Object(p.b)("div",e)}),m={},l=Object(r.a)({layout:"docs",page_title:"sidecar_service Stanza - Job Specification",sidebar_title:"sidecar_service",description:'The "sidecar_service" stanza allows specifying options for configuring\nsidecar proxies used in Consul Connect integration',__resourcePath:"docs/job-specification/sidecar_service.mdx",__scans:{}});function j(e){var a=e.components,t=Object(s.a)(e,["components"]);return Object(p.b)(l,Object(n.a)({},m,t,{components:a,mdxType:"MDXLayout"}),Object(p.b)("h1",{className:"g-type-display-2"},Object(p.b)("a",Object(n.a)({parentName:"h1"},{className:"__permalink-h",href:"#sidecar_service-stanza","aria-label":"sidecar_service stanza permalink"}),"\xbb"),Object(p.b)("a",Object(n.a)({parentName:"h1"},{className:"__target-h",id:"sidecar_service-stanza","aria-hidden":""})),Object(p.b)("inlineCode",{parentName:"h1"},"sidecar_service")," Stanza"),Object(p.b)(i,{groups:["job","group","service","connect","sidecar_service"],mdxType:"Placement"}),Object(p.b)("p",null,"The ",Object(p.b)("inlineCode",{parentName:"p"},"sidecar_service")," stanza allows configuring various options for the sidecar\nproxy managed by Nomad for ",Object(p.b)("a",Object(n.a)({parentName:"p"},{href:"/docs/integrations/consul-connect"}),"Consul\nConnect")," integration. It is\nvalid only within the context of a connect stanza."),Object(p.b)("pre",{className:"language-hcl"},Object(p.b)("code",Object(n.a)({parentName:"pre"},{className:"language-hcl"}),"job ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"countdash"')," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),"datacenters")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"["),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"dc1"'),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"]"),"\n\n  group ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"api"')," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n    ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"network")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n      ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),"mode")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"bridge"'),"\n    ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n\n    ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"service")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n      ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),"name")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"count-api"'),"\n      ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),"port")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"9001"'),"\n\n      ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"connect")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n        ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"sidecar_service")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n      ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n    ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n\n    task ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"web"')," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n      ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),"driver")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"docker"'),"\n\n      ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"config")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n        ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),"image")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"hashicorpnomad/counter-api:v2"'),"\n      ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n    ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n  ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n")),Object(p.b)("h2",{className:"g-type-display-3"},Object(p.b)("a",Object(n.a)({parentName:"h2"},{className:"__permalink-h",href:"#sidecar_service-parameters","aria-label":"sidecar_service parameters permalink"}),"\xbb"),Object(p.b)("a",Object(n.a)({parentName:"h2"},{className:"__target-h",id:"sidecar_service-parameters","aria-hidden":""})),Object(p.b)("inlineCode",{parentName:"h2"},"sidecar_service")," Parameters"),Object(p.b)("ul",null,Object(p.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(p.b)("a",Object(n.a)({parentName:"li"},{id:"tags",className:"__target-lic","aria-hidden":""})),Object(p.b)("p",{parentName:"li"},Object(p.b)("a",Object(n.a)({parentName:"p"},{href:"#tags","aria-label":"tags permalink",className:"__permalink-lic"}),Object(p.b)("inlineCode",{parentName:"a"},"tags"))," ",Object(p.b)("code",null,"(array","<","string",">",": nil)")," - Custom Consul service tags for the sidecar service.")),Object(p.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(p.b)("a",Object(n.a)({parentName:"li"},{id:"port",className:"__target-lic","aria-hidden":""})),Object(p.b)("p",{parentName:"li"},Object(p.b)("a",Object(n.a)({parentName:"p"},{href:"#port","aria-label":"port permalink",className:"__permalink-lic"}),Object(p.b)("inlineCode",{parentName:"a"},"port"))," ",Object(p.b)("inlineCode",{parentName:"p"},"(string: )")," - Port label for sidecar service.")),Object(p.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(p.b)("a",Object(n.a)({parentName:"li"},{id:"proxy",className:"__target-lic","aria-hidden":""})),Object(p.b)("p",{parentName:"li"},Object(p.b)("a",Object(n.a)({parentName:"p"},{href:"#proxy","aria-label":"proxy permalink",className:"__permalink-lic"}),Object(p.b)("inlineCode",{parentName:"a"},"proxy"))," ",Object(p.b)("code",null,"(",Object(p.b)("a",Object(n.a)({parentName:"p"},{href:"/docs/job-specification/proxy",title:"Nomad sidecar proxy config Specification"}),"proxy"),": nil)")," - This is used to configure the sidecar proxy service."))),Object(p.b)("h2",{className:"g-type-display-3"},Object(p.b)("a",Object(n.a)({parentName:"h2"},{className:"__permalink-h",href:"#sidecar_service-examples","aria-label":"sidecar_service examples permalink"}),"\xbb"),Object(p.b)("a",Object(n.a)({parentName:"h2"},{className:"__target-h",id:"sidecar_service-examples","aria-hidden":""})),Object(p.b)("inlineCode",{parentName:"h2"},"sidecar_service")," Examples"),Object(p.b)("p",null,"The following example is a minimal ",Object(p.b)("inlineCode",{parentName:"p"},"sidecar_service")," stanza with defaults"),Object(p.b)("pre",{className:"language-hcl"},Object(p.b)("code",Object(n.a)({parentName:"pre"},{className:"language-hcl"}),"  ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"connect")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n    ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"sidecar_service")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n  ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n")),Object(p.b)("p",null,"The following example includes specifying upstreams."),Object(p.b)("pre",{className:"language-hcl"},Object(p.b)("code",Object(n.a)({parentName:"pre"},{className:"language-hcl"}),"   ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"sidecar_service")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n     ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"proxy")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n       ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"upstreams")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n         ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),"destination_name")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"count-api"'),"\n         ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),"local_bind_port")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token number"}),"8080"),"\n       ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n     ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n   ",Object(p.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n\n")))}j.isMDXComponent=!0}},[["JKME",0,1,2,4,3,5,6]]]);