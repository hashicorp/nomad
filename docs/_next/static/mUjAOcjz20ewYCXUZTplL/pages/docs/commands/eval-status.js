(window.webpackJsonp=window.webpackJsonp||[]).push([[90],{PV2j:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return m}));var n=t("wx14"),i=t("Ff2n"),l=t("q1tI"),c=t.n(l),s=t("7ljp"),r=t("j1un"),b=(c.a.createElement,{}),o=Object(r.a)({layout:"docs",page_title:"Commands: eval status",sidebar_title:"eval status",description:"The eval status command is used to see the status and potential failed allocations of an evaluation.\n",__resourcePath:"docs/commands/eval-status.mdx",__scans:{}});function m(e){var a=e.components,t=Object(i.a)(e,["components"]);return Object(s.b)(o,Object(n.a)({},b,t,{components:a,mdxType:"MDXLayout"}),Object(s.b)("h1",{className:"g-type-display-2"},Object(s.b)("a",Object(n.a)({parentName:"h1"},{className:"__permalink-h",href:"#command-eval-status","aria-label":"command eval status permalink"}),"\xbb"),Object(s.b)("a",Object(n.a)({parentName:"h1"},{className:"__target-h",id:"command-eval-status","aria-hidden":""})),"Command: eval status"),Object(s.b)("p",null,"The ",Object(s.b)("inlineCode",{parentName:"p"},"eval status")," command is used to display information about an existing\nevaluation. In the case an evaluation could not place all the requested\nallocations, this command can be used to determine the failure reasons."),Object(s.b)("p",null,"Optionally, it can also be invoked in a monitor mode to track an outstanding\nevaluation. In this mode, logs will be output describing state changes to the\nevaluation or its associated allocations. The monitor will exit when the\nevaluation reaches a terminal state."),Object(s.b)("h2",{className:"g-type-display-3"},Object(s.b)("a",Object(n.a)({parentName:"h2"},{className:"__permalink-h",href:"#usage","aria-label":"usage permalink"}),"\xbb"),Object(s.b)("a",Object(n.a)({parentName:"h2"},{className:"__target-h",id:"usage","aria-hidden":""})),"Usage"),Object(s.b)("pre",{className:"language-plaintext"},Object(s.b)("code",Object(n.a)({parentName:"pre"},{className:"language-plaintext"}),"nomad eval status [options] <evaluation>\n")),Object(s.b)("p",null,"An evaluation ID or prefix must be provided. If there is an exact match, the\nthe status will be shown. Otherwise, a list of matching evaluations and\ninformation will be displayed."),Object(s.b)("p",null,"If the ",Object(s.b)("inlineCode",{parentName:"p"},"-monitor")," flag is passed, an interactive monitoring session will be\nstarted in the terminal. It is safe to exit the monitor at any time using\nctrl+c. The command will exit when the given evaluation reaches a terminal\nstate (completed or failed). Exit code 0 is returned on successful\nevaluation, and if there are no scheduling problems. If there are\njob placement issues encountered (unsatisfiable constraints,\nresource exhaustion, etc), then the exit code will be 2. Any other\nerrors, including client connection issues or internal errors, are\nindicated by exit code 1."),Object(s.b)("h2",{className:"g-type-display-3"},Object(s.b)("a",Object(n.a)({parentName:"h2"},{className:"__permalink-h",href:"#general-options","aria-label":"general options permalink"}),"\xbb"),Object(s.b)("a",Object(n.a)({parentName:"h2"},{className:"__target-h",id:"general-options","aria-hidden":""})),"General Options"),Object(s.b)("ul",null,Object(s.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(s.b)("a",Object(n.a)({parentName:"li"},{id:"address",className:"__target-lic","aria-hidden":""})),Object(s.b)("p",{parentName:"li"},Object(s.b)("a",Object(n.a)({parentName:"p"},{href:"#address","aria-label":"address permalink",className:"__permalink-lic"}),Object(s.b)("inlineCode",{parentName:"a"},"-address=<addr>")),": The address of the Nomad server. Overrides the ",Object(s.b)("inlineCode",{parentName:"p"},"NOMAD_ADDR"),"\nenvironment variable if set. Defaults to ",Object(s.b)("inlineCode",{parentName:"p"},"http://127.0.0.1:4646"),".")),Object(s.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(s.b)("a",Object(n.a)({parentName:"li"},{id:"region",className:"__target-lic","aria-hidden":""})),Object(s.b)("p",{parentName:"li"},Object(s.b)("a",Object(n.a)({parentName:"p"},{href:"#region","aria-label":"region permalink",className:"__permalink-lic"}),Object(s.b)("inlineCode",{parentName:"a"},"-region=<region>")),": The region of the Nomad server to forward commands to.\nOverrides the ",Object(s.b)("inlineCode",{parentName:"p"},"NOMAD_REGION")," environment variable if set. Defaults to the\nAgent's local region.")),Object(s.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(s.b)("a",Object(n.a)({parentName:"li"},{id:"namespace",className:"__target-lic","aria-hidden":""})),Object(s.b)("p",{parentName:"li"},Object(s.b)("a",Object(n.a)({parentName:"p"},{href:"#namespace","aria-label":"namespace permalink",className:"__permalink-lic"}),Object(s.b)("inlineCode",{parentName:"a"},"-namespace=<namespace>")),": The target namespace for queries and actions bound\nto a namespace. Overrides the NOMAD_NAMESPACE environment variable if set.\nIf set to '*', job and alloc subcommands query all namespacecs authorized to\nuser. Defaults to the \"default\" namespace.")),Object(s.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(s.b)("a",Object(n.a)({parentName:"li"},{id:"no-color",className:"__target-lic","aria-hidden":""})),Object(s.b)("p",{parentName:"li"},Object(s.b)("a",Object(n.a)({parentName:"p"},{href:"#no-color","aria-label":"no color permalink",className:"__permalink-lic"}),Object(s.b)("inlineCode",{parentName:"a"},"-no-color")),": Disables colored command output. Alternatively,\n",Object(s.b)("inlineCode",{parentName:"p"},"NOMAD_CLI_NO_COLOR")," may be set.")),Object(s.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(s.b)("a",Object(n.a)({parentName:"li"},{id:"ca-cert",className:"__target-lic","aria-hidden":""})),Object(s.b)("p",{parentName:"li"},Object(s.b)("a",Object(n.a)({parentName:"p"},{href:"#ca-cert","aria-label":"ca cert permalink",className:"__permalink-lic"}),Object(s.b)("inlineCode",{parentName:"a"},"-ca-cert=<path>")),": Path to a PEM encoded CA cert file to use to verify the\nNomad server SSL certificate. Overrides the ",Object(s.b)("inlineCode",{parentName:"p"},"NOMAD_CACERT")," environment\nvariable if set.")),Object(s.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(s.b)("a",Object(n.a)({parentName:"li"},{id:"ca-path",className:"__target-lic","aria-hidden":""})),Object(s.b)("p",{parentName:"li"},Object(s.b)("a",Object(n.a)({parentName:"p"},{href:"#ca-path","aria-label":"ca path permalink",className:"__permalink-lic"}),Object(s.b)("inlineCode",{parentName:"a"},"-ca-path=<path>")),": Path to a directory of PEM encoded CA cert files to verify\nthe Nomad server SSL certificate. If both ",Object(s.b)("inlineCode",{parentName:"p"},"-ca-cert")," and ",Object(s.b)("inlineCode",{parentName:"p"},"-ca-path")," are\nspecified, ",Object(s.b)("inlineCode",{parentName:"p"},"-ca-cert")," is used. Overrides the ",Object(s.b)("inlineCode",{parentName:"p"},"NOMAD_CAPATH")," environment\nvariable if set.")),Object(s.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(s.b)("a",Object(n.a)({parentName:"li"},{id:"client-cert",className:"__target-lic","aria-hidden":""})),Object(s.b)("p",{parentName:"li"},Object(s.b)("a",Object(n.a)({parentName:"p"},{href:"#client-cert","aria-label":"client cert permalink",className:"__permalink-lic"}),Object(s.b)("inlineCode",{parentName:"a"},"-client-cert=<path>")),": Path to a PEM encoded client certificate for TLS\nauthentication to the Nomad server. Must also specify ",Object(s.b)("inlineCode",{parentName:"p"},"-client-key"),". Overrides\nthe ",Object(s.b)("inlineCode",{parentName:"p"},"NOMAD_CLIENT_CERT")," environment variable if set.")),Object(s.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(s.b)("a",Object(n.a)({parentName:"li"},{id:"client-key",className:"__target-lic","aria-hidden":""})),Object(s.b)("p",{parentName:"li"},Object(s.b)("a",Object(n.a)({parentName:"p"},{href:"#client-key","aria-label":"client key permalink",className:"__permalink-lic"}),Object(s.b)("inlineCode",{parentName:"a"},"-client-key=<path>")),": Path to an unencrypted PEM encoded private key matching\nthe client certificate from ",Object(s.b)("inlineCode",{parentName:"p"},"-client-cert"),". Overrides the ",Object(s.b)("inlineCode",{parentName:"p"},"NOMAD_CLIENT_KEY"),"\nenvironment variable if set.")),Object(s.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(s.b)("a",Object(n.a)({parentName:"li"},{id:"tls-server-name",className:"__target-lic","aria-hidden":""})),Object(s.b)("p",{parentName:"li"},Object(s.b)("a",Object(n.a)({parentName:"p"},{href:"#tls-server-name","aria-label":"tls server name permalink",className:"__permalink-lic"}),Object(s.b)("inlineCode",{parentName:"a"},"-tls-server-name=<value>")),": The server name to use as the SNI host when connecting\nvia TLS. Overrides the ",Object(s.b)("inlineCode",{parentName:"p"},"NOMAD_TLS_SERVER_NAME")," environment variable if set.")),Object(s.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(s.b)("a",Object(n.a)({parentName:"li"},{id:"tls-skip-verify",className:"__target-lic","aria-hidden":""})),Object(s.b)("p",{parentName:"li"},Object(s.b)("a",Object(n.a)({parentName:"p"},{href:"#tls-skip-verify","aria-label":"tls skip verify permalink",className:"__permalink-lic"}),Object(s.b)("inlineCode",{parentName:"a"},"-tls-skip-verify")),": Do not verify TLS certificate. This is highly not\nrecommended. Verification will also be skipped if ",Object(s.b)("inlineCode",{parentName:"p"},"NOMAD_SKIP_VERIFY")," is set.")),Object(s.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(s.b)("a",Object(n.a)({parentName:"li"},{id:"token",className:"__target-lic","aria-hidden":""})),Object(s.b)("p",{parentName:"li"},Object(s.b)("a",Object(n.a)({parentName:"p"},{href:"#token","aria-label":"token permalink",className:"__permalink-lic"}),Object(s.b)("inlineCode",{parentName:"a"},"-token")),": The SecretID of an ACL token to use to authenticate API requests with.\nOverrides the ",Object(s.b)("inlineCode",{parentName:"p"},"NOMAD_TOKEN")," environment variable if set."))),Object(s.b)("h2",{className:"g-type-display-3"},Object(s.b)("a",Object(n.a)({parentName:"h2"},{className:"__permalink-h",href:"#eval-status-options","aria-label":"eval status options permalink"}),"\xbb"),Object(s.b)("a",Object(n.a)({parentName:"h2"},{className:"__target-h",id:"eval-status-options","aria-hidden":""})),"Eval Status Options"),Object(s.b)("ul",null,Object(s.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(s.b)("a",Object(n.a)({parentName:"li"},{id:"monitor",className:"__target-lic","aria-hidden":""})),Object(s.b)("a",Object(n.a)({parentName:"li"},{href:"#monitor","aria-label":"monitor permalink",className:"__permalink-lic"}),Object(s.b)("inlineCode",{parentName:"a"},"-monitor")),": Monitor an outstanding evaluation"),Object(s.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(s.b)("a",Object(n.a)({parentName:"li"},{id:"verbose",className:"__target-lic","aria-hidden":""})),Object(s.b)("a",Object(n.a)({parentName:"li"},{href:"#verbose","aria-label":"verbose permalink",className:"__permalink-lic"}),Object(s.b)("inlineCode",{parentName:"a"},"-verbose")),": Show full information."),Object(s.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(s.b)("a",Object(n.a)({parentName:"li"},{id:"json",className:"__target-lic","aria-hidden":""})),Object(s.b)("a",Object(n.a)({parentName:"li"},{href:"#json","aria-label":"json permalink",className:"__permalink-lic"}),Object(s.b)("inlineCode",{parentName:"a"},"-json"))," : Output the evaluation in its JSON format."),Object(s.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(s.b)("a",Object(n.a)({parentName:"li"},{id:"t",className:"__target-lic","aria-hidden":""})),Object(s.b)("a",Object(n.a)({parentName:"li"},{href:"#t","aria-label":"t permalink",className:"__permalink-lic"}),Object(s.b)("inlineCode",{parentName:"a"},"-t"))," : Format and display evaluation using a Go template.")),Object(s.b)("h2",{className:"g-type-display-3"},Object(s.b)("a",Object(n.a)({parentName:"h2"},{className:"__permalink-h",href:"#examples","aria-label":"examples permalink"}),"\xbb"),Object(s.b)("a",Object(n.a)({parentName:"h2"},{className:"__target-h",id:"examples","aria-hidden":""})),"Examples"),Object(s.b)("p",null,"Show the status of an evaluation that has placement failures"),Object(s.b)("pre",{className:"language-shell-session"},Object(s.b)("code",Object(n.a)({parentName:"pre"},{className:"language-shell-session"}),Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token command"}),Object(s.b)("span",Object(n.a)({parentName:"span"},{className:"token sh important"}),"$")," ",Object(s.b)("span",Object(n.a)({parentName:"span"},{className:"token bash language-bash"}),"nomad ",Object(s.b)("span",Object(n.a)({parentName:"span"},{className:"token builtin class-name"}),"eval")," status 2ae0e6a5")),"\n",Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token output"}),'ID                 = 2ae0e6a5\nStatus             = complete\nStatus Description = complete\nType               = service\nTriggeredBy        = job-register\nJob ID             = example\nPriority           = 50\nPlacement Failures = true\n\n==> Failed Placements\nTask Group "cache" (failed to place 1 allocation):\n  * Class "foo" filtered 1 nodes\n  * Constraint "'),Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token command"}),Object(s.b)("span",Object(n.a)({parentName:"span"},{className:"token sh important"}),"$"),Object(s.b)("span",Object(n.a)({parentName:"span"},{className:"token bash language-bash"}),Object(s.b)("span",Object(n.a)({parentName:"span"},{className:"token punctuation"}),"{"),"attr.kernel.name",Object(s.b)("span",Object(n.a)({parentName:"span"},{className:"token punctuation"}),"}")," ",Object(s.b)("span",Object(n.a)({parentName:"span"},{className:"token operator"}),"=")," windows",Object(s.b)("span",Object(n.a)({parentName:"span"},{className:"token string"}),'" filtered 1 nodes\n\n\nEvaluation "'),"67493a64")),Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token output"}),'" waiting for additional capacity to place remainder\n'))),Object(s.b)("p",null,"Monitor an existing evaluation"),Object(s.b)("pre",{className:"language-shell-session"},Object(s.b)("code",Object(n.a)({parentName:"pre"},{className:"language-shell-session"}),Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token command"}),Object(s.b)("span",Object(n.a)({parentName:"span"},{className:"token sh important"}),"$")," ",Object(s.b)("span",Object(n.a)({parentName:"span"},{className:"token bash language-bash"}),"nomad ",Object(s.b)("span",Object(n.a)({parentName:"span"},{className:"token builtin class-name"}),"eval")," status -monitor 8262bc83")),"\n",Object(s.b)("span",Object(n.a)({parentName:"code"},{className:"token output"}),'==> Monitoring evaluation "8262bc83"\n    Allocation "bd6bd0de" created: node "6f299da5", group "group1"\n    Evaluation status changed: "pending" -> "complete"\n==> Evaluation "8262bc83" finished with status "complete"\n'))))}m.isMDXComponent=!0},Urd7:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/docs/commands/eval-status",function(){return t("PV2j")}])}},[["Urd7",0,1,2,4,3,5,6]]]);