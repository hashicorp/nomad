<div class="boxed-section">
    <div class="boxed-section-head">
    Job Definition
    <div class="pull-right" style="display: flex">
        {{#if @data.hasSpecification}}
        <div class="job-definition-toggle" data-test-toggle={{@data.view}}>
            <button 
                class="button is-small is-borderless {{if (eq @data.view "job-spec") "is-active"}}"
                type="button"
                {{on "click" @fns.onToggle}}
            >
                Job Spec
            </button>
            <button 
                class="button is-small is-borderless {{if (eq @data.view "full-definition") "is-active"}}"
                type="button"
                {{on "click" @fns.onToggle}}
                data-test-toggle-full
            >
                Full Definition
            </button>
        </div>
        {{/if}}
        <button
            class="button is-light is-compact"
            type="button"
            {{on "click" @fns.onEdit}}
            data-test-edit-job
        >
            Edit
        </button>
        </div>
    </div>
    <div class="boxed-section-body is-full-bleed">
    {{#if (eq @data.view "job-spec")}}
        <div 
            data-test-job-spec-view 
            {{code-mirror
            content=@data.definition
            mode="ruby"
            readOnly=true
            screenReaderLabel="Job specification"          
            theme="hashi"
            }} 
        />
    {{else}}
        <JsonViewer data-test-definition-view @json={{@data.definition}} />
    {{/if}}
    </div>
    {{#if (and @data.hasVariables (eq @data.view "job-spec"))}}
        <h1 class="title is-3">HCL Variables:  current version</h1>
        <div 
            data-test-job-variables
            {{code-mirror
            content=(stringify-object @data.variables)
            readOnly=true
            screenReaderLabel="Job specification variables"          
            theme="hashi-read-only"
            }} 
        />
    {{/if}}
</div>