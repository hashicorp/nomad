(window.webpackJsonp=window.webpackJsonp||[]).push([[191],{IS15:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/docs/drivers/podman",function(){return t("X2w+")}])},"X2w+":function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return i}));var n=t("wx14"),c=t("Ff2n"),b=t("q1tI"),s=t.n(b),o=t("7ljp"),r=t("j1un"),l=(s.a.createElement,{}),p=Object(r.a)({layout:"docs",page_title:"Drivers: podman",sidebar_title:"Podman",description:"The Podman task driver uses podman (https://podman.io/) for containerizing tasks.",__resourcePath:"docs/drivers/podman.mdx",__scans:{}});function i(e){var{components:a}=e,t=Object(c.a)(e,["components"]);return Object(o.b)(p,Object(n.a)({},l,t,{components:a,mdxType:"MDXLayout"}),Object(o.b)("h1",{className:"g-type-display-2"},Object(o.b)("a",Object(n.a)({parentName:"h1"},{className:"__permalink-h",href:"#podman-task-driver","aria-label":"podman task driver permalink"}),"\xbb"),Object(o.b)("a",Object(n.a)({parentName:"h1"},{className:"__target-h",id:"podman-task-driver","aria-hidden":""})),"Podman Task Driver"),Object(o.b)("p",null,"Name: ",Object(o.b)("inlineCode",{parentName:"p"},"podman")),Object(o.b)("p",null,"Homepage: ",Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"https://github.com/hashicorp/nomad-driver-podman"}),"https://github.com/hashicorp/nomad-driver-podman")),Object(o.b)("p",null,"The Podman task driver plugin for Nomad uses the ",Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"https://podman.io/"}),"Pod Manager (podman)"),"\ndaemonless container runtime for executing Nomad tasks. Podman supports OCI\ncontainers and its command line tool is meant to be ",Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"https://podman.io/whatis.html"}),"a drop-in replacement for\nDocker's"),"."),Object(o.b)("p",null,"See the project's ",Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"https://github.com/hashicorp/nomad-driver-podman"}),"homepage")," for details."),Object(o.b)("h2",{className:"g-type-display-3"},Object(o.b)("a",Object(n.a)({parentName:"h2"},{className:"__permalink-h",href:"#client-requirements","aria-label":"client requirements permalink"}),"\xbb"),Object(o.b)("a",Object(n.a)({parentName:"h2"},{className:"__target-h",id:"client-requirements","aria-hidden":""})),"Client Requirements"),Object(o.b)("p",null,"The Podman task driver is not builtin to Nomad. It must be ",Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"https://releases.hashicorp.com/nomad-driver-podman"}),"downloaded")," onto the client host\nin the configured plugin directory."),Object(o.b)("ul",null,Object(o.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),"Linux host with ",Object(o.b)("a",Object(n.a)({parentName:"li"},{href:"https://podman.io/"}),Object(o.b)("inlineCode",{parentName:"a"},"podman"))," installed."),Object(o.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(o.b)("a",Object(n.a)({parentName:"li"},{href:"https://releases.hashicorp.com/nomad-driver-podman"}),Object(o.b)("inlineCode",{parentName:"a"},"nomad-driver-podman"))," binary in Nomad's ",Object(o.b)("a",Object(n.a)({parentName:"li"},{href:"/docs/configuration#plugin_dir"}),Object(o.b)("inlineCode",{parentName:"a"},"plugin_dir")),".")),Object(o.b)("p",null,"You need a varlink enabled Podman binary and a system socket activation unit, see ",Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"https://podman.io/blogs/2019/01/16/podman-varlink.html"}),"https://podman.io/blogs/2019/01/16/podman-varlink.html"),"."),Object(o.b)("p",null,"Since the Nomad agent, nomad-driver-podman plugin binary, and Podman will\nreside on the same host, skip the ssh aspects of the Podman varlink\ndocumentation above."),Object(o.b)("h2",{className:"g-type-display-3"},Object(o.b)("a",Object(n.a)({parentName:"h2"},{className:"__permalink-h",href:"#capabilities","aria-label":"capabilities permalink"}),"\xbb"),Object(o.b)("a",Object(n.a)({parentName:"h2"},{className:"__target-h",id:"capabilities","aria-hidden":""})),"Capabilities"),Object(o.b)("p",null,"The ",Object(o.b)("inlineCode",{parentName:"p"},"podman")," driver implements the following ",Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"/docs/internals/plugins/task-drivers#capabilities-capabilities-error"}),"capabilities"),"."),Object(o.b)("table",null,Object(o.b)("thead",{parentName:"table"},Object(o.b)("tr",{parentName:"thead"},Object(o.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Feature"),Object(o.b)("th",Object(n.a)({parentName:"tr"},{align:null}),"Implementation"))),Object(o.b)("tbody",{parentName:"table"},Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(o.b)("inlineCode",{parentName:"td"},"nomad alloc signal")),Object(o.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"true")),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(n.a)({parentName:"tr"},{align:null}),Object(o.b)("inlineCode",{parentName:"td"},"nomad alloc exec")),Object(o.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"false")),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"filesystem isolation"),Object(o.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"none")),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"network isolation"),Object(o.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"host, group, task, none")),Object(o.b)("tr",{parentName:"tbody"},Object(o.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"volume mounting"),Object(o.b)("td",Object(n.a)({parentName:"tr"},{align:null}),"none")))),Object(o.b)("h2",{className:"g-type-display-3"},Object(o.b)("a",Object(n.a)({parentName:"h2"},{className:"__permalink-h",href:"#known-limitations","aria-label":"known limitations permalink"}),"\xbb"),Object(o.b)("a",Object(n.a)({parentName:"h2"},{className:"__target-h",id:"known-limitations","aria-hidden":""})),"Known Limitations"),Object(o.b)("p",null,"The Podman task driver is under active development. It currently does not support ",Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"https://github.com/hashicorp/nomad-driver-podman/issues/4"}),"stderr logging")," and ",Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"https://github.com/hashicorp/nomad-driver-podman/issues/41"}),"devices"),".\nPodman recently released ",Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"https://podman.io/blogs/2020/06/29/podman-v2-announce.html"}),"Podman v2"),". The task driver currently supports v1\nand will be working on supporting v2 in upcoming releases."),Object(o.b)("h2",{className:"g-type-display-3"},Object(o.b)("a",Object(n.a)({parentName:"h2"},{className:"__permalink-h",href:"#task-configuration","aria-label":"task configuration permalink"}),"\xbb"),Object(o.b)("a",Object(n.a)({parentName:"h2"},{className:"__target-h",id:"task-configuration","aria-hidden":""})),"Task Configuration"),Object(o.b)("p",null,"Due to Podman's similarity to Docker, the example job created by ",Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"/docs/commands/job/init"}),Object(o.b)("inlineCode",{parentName:"a"},"nomad init -short"))," is easily adapted to use Podman instead:"),Object(o.b)("pre",{className:"language-hcl"},Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-hcl"}),"job ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"example"')," ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),"datacenters")," ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"["),Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"dc1"'),Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"]"),"\n\n  group ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"cache"')," ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n    task ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"redis"')," ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n      ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),"driver")," ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"podman"'),"\n\n      ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"config")," ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n        ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),"image")," ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"docker://redis:3.2"'),"\n\n        ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"port_map")," ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n          ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),"db")," ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token number"}),"6379"),"\n        ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n      ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n\n      ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"resources")," ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n        ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),"cpu"),"    ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token number"}),"500"),"\n        ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),"memory")," ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token number"}),"256"),"\n\n        ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"network")," ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n          ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),"mbits")," ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token number"}),"10"),"\n          port  ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"db"'),"  ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n        ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n      ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n    ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n  ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n")),Object(o.b)("ul",null,Object(o.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(o.b)("a",Object(n.a)({parentName:"li"},{id:"image",className:"__target-lic","aria-hidden":""})),Object(o.b)("a",Object(n.a)({parentName:"li"},{href:"#image","aria-label":"image permalink",className:"__permalink-lic"}),Object(o.b)("inlineCode",{parentName:"a"},"image"))," - The image to run.")),Object(o.b)("pre",{className:"language-hcl"},Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-hcl"}),Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"config")," ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),"image")," ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"docker://redis"'),"\n",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n")),Object(o.b)("ul",null,Object(o.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(o.b)("a",Object(n.a)({parentName:"li"},{id:"command",className:"__target-lic","aria-hidden":""})),Object(o.b)("a",Object(n.a)({parentName:"li"},{href:"#command","aria-label":"command permalink",className:"__permalink-lic"}),Object(o.b)("inlineCode",{parentName:"a"},"command"))," - (Optional) The command to run when starting the container.")),Object(o.b)("pre",{className:"language-hcl"},Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-hcl"}),Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"config")," ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),"command")," ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"some-command"'),"\n",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n")),Object(o.b)("ul",null,Object(o.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(o.b)("a",Object(n.a)({parentName:"li"},{id:"args",className:"__target-lic","aria-hidden":""})),Object(o.b)("a",Object(n.a)({parentName:"li"},{href:"#args","aria-label":"args permalink",className:"__permalink-lic"}),Object(o.b)("inlineCode",{parentName:"a"},"args"))," - (Optional) A list of arguments to the optional command. If no\n",Object(o.b)("em",{parentName:"li"},"command")," is specified, the arguments are passed directly to the container.")),Object(o.b)("pre",{className:"language-hcl"},Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-hcl"}),Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"config")," ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),"args")," ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"["),"\n    ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"arg1"'),",\n    ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"arg2"'),",\n  ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"]"),"\n",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n")),Object(o.b)("ul",null,Object(o.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(o.b)("a",Object(n.a)({parentName:"li"},{id:"volumes",className:"__target-lic","aria-hidden":""})),Object(o.b)("a",Object(n.a)({parentName:"li"},{href:"#volumes","aria-label":"volumes permalink",className:"__permalink-lic"}),Object(o.b)("inlineCode",{parentName:"a"},"volumes"))," - (Optional) A list of ",Object(o.b)("inlineCode",{parentName:"li"},"host_path:container_path")," strings to bind\nhost paths to container paths.")),Object(o.b)("pre",{className:"language-hcl"},Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-hcl"}),Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"config")," ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),"volumes")," ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"["),"\n    ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"/some/host/data:/container/data"'),"\n  ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"]"),"\n",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n")),Object(o.b)("ul",null,Object(o.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(o.b)("a",Object(n.a)({parentName:"li"},{id:"tmpfs",className:"__target-lic","aria-hidden":""})),Object(o.b)("a",Object(n.a)({parentName:"li"},{href:"#tmpfs","aria-label":"tmpfs permalink",className:"__permalink-lic"}),Object(o.b)("inlineCode",{parentName:"a"},"tmpfs"))," - (Optional) A list of ",Object(o.b)("inlineCode",{parentName:"li"},"/container_path")," strings for tmpfs mount\npoints. See ",Object(o.b)("inlineCode",{parentName:"li"},"podman run --tmpfs")," options for details.")),Object(o.b)("pre",{className:"language-hcl"},Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-hcl"}),Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"config")," ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),"tmpfs")," ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"["),"\n    ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"/var"'),"\n  ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"]"),"\n",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n")),Object(o.b)("ul",null,Object(o.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(o.b)("a",Object(n.a)({parentName:"li"},{id:"hostname",className:"__target-lic","aria-hidden":""})),Object(o.b)("p",{parentName:"li"},Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"#hostname","aria-label":"hostname permalink",className:"__permalink-lic"}),Object(o.b)("inlineCode",{parentName:"a"},"hostname"))," - (Optional) The hostname to assign to the container. When\nlaunching more than one of a task (using count) with this option set, every\ncontainer the task starts will have the same hostname.")),Object(o.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(o.b)("a",Object(n.a)({parentName:"li"},{id:"init",className:"__target-lic","aria-hidden":""})),Object(o.b)("p",{parentName:"li"},Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"#init","aria-label":"init permalink",className:"__permalink-lic"}),Object(o.b)("inlineCode",{parentName:"a"},"init"))," - Run an init inside the container that forwards signals and reaps processes."))),Object(o.b)("pre",{className:"language-hcl"},Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-hcl"}),Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"config")," ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),"init")," ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token boolean"}),"true"),"\n",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n")),Object(o.b)("ul",null,Object(o.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(o.b)("a",Object(n.a)({parentName:"li"},{id:"init_path",className:"__target-lic","aria-hidden":""})),Object(o.b)("a",Object(n.a)({parentName:"li"},{href:"#init_path","aria-label":"init_path permalink",className:"__permalink-lic"}),Object(o.b)("inlineCode",{parentName:"a"},"init_path"))," - Path to the container-init binary.")),Object(o.b)("pre",{className:"language-hcl"},Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-hcl"}),Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"config")," ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),"init")," ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token boolean"}),"true"),"\n  ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),"init_path")," ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"/usr/libexec/podman/catatonit"'),"\n",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n")),Object(o.b)("ul",null,Object(o.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(o.b)("a",Object(n.a)({parentName:"li"},{id:"user",className:"__target-lic","aria-hidden":""})),Object(o.b)("p",{parentName:"li"},Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"#user","aria-label":"user permalink",className:"__permalink-lic"}),Object(o.b)("inlineCode",{parentName:"a"},"user"))," - Run the command as a specific user/uid within the container. See\n",Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"/docs/job-specification/task#user"}),"task configuration"),".")),Object(o.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(o.b)("a",Object(n.a)({parentName:"li"},{id:"memory_reservation",className:"__target-lic","aria-hidden":""})),Object(o.b)("p",{parentName:"li"},Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"#memory_reservation","aria-label":"memory_reservation permalink",className:"__permalink-lic"}),Object(o.b)("inlineCode",{parentName:"a"},"memory_reservation"))," - Memory soft limit (unit = b (bytes), k (kilobytes), m\n(megabytes), or g (gigabytes))"))),Object(o.b)("p",null,"After setting memory reservation, when the system detects memory contention or\nlow memory, containers are forced to restrict their consumption to their\nreservation. So you should always set the value below --memory, otherwise the\nhard limit will take precedence. By default, memory reservation will be the\nsame as memory limit."),Object(o.b)("pre",{className:"language-hcl"},Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-hcl"}),Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"config")," ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),"memory_reservation")," ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"100m"'),"\n",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n")),Object(o.b)("ul",null,Object(o.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(o.b)("a",Object(n.a)({parentName:"li"},{id:"memory_swap",className:"__target-lic","aria-hidden":""})),Object(o.b)("a",Object(n.a)({parentName:"li"},{href:"#memory_swap","aria-label":"memory_swap permalink",className:"__permalink-lic"}),Object(o.b)("inlineCode",{parentName:"a"},"memory_swap"))," - A limit value equal to memory plus swap. The swap limit\nshould always be larger than the ",Object(o.b)("a",Object(n.a)({parentName:"li"},{href:"/docs/job-specification/resources#memory"}),"memory value"),".")),Object(o.b)("p",null,"Unit can be b (bytes), k (kilobytes), m (megabytes), or g (gigabytes). If you\ndon't specify a unit, b is used. Set LIMIT to -1 to enable unlimited swap."),Object(o.b)("pre",{className:"language-hcl"},Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-hcl"}),Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"config")," ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),"memory_swap")," ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"180m"'),"\n",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n")),Object(o.b)("ul",null,Object(o.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(o.b)("a",Object(n.a)({parentName:"li"},{id:"memory_swappiness",className:"__target-lic","aria-hidden":""})),Object(o.b)("a",Object(n.a)({parentName:"li"},{href:"#memory_swappiness","aria-label":"memory_swappiness permalink",className:"__permalink-lic"}),Object(o.b)("inlineCode",{parentName:"a"},"memory_swappiness"))," - Tune a container's memory swappiness behavior. Accepts\nan integer between 0 and 100.")),Object(o.b)("pre",{className:"language-hcl"},Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-hcl"}),Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"config")," ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),"memory_swappiness")," ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token number"}),"60"),"\n",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n")),Object(o.b)("ul",null,Object(o.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(o.b)("a",Object(n.a)({parentName:"li"},{id:"network_mode",className:"__target-lic","aria-hidden":""})),Object(o.b)("p",{parentName:"li"},Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"#network_mode","aria-label":"network_mode permalink",className:"__permalink-lic"}),Object(o.b)("inlineCode",{parentName:"a"},"network_mode"))," - Set the ",Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"http://docs.podman.io/en/latest/markdown/podman-run.1.html#options"}),"network mode")," for the container. This will be\noverridden by nomad if a group network is created and passed in by Nomad."),Object(o.b)("ul",{parentName:"li"},Object(o.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(o.b)("a",Object(n.a)({parentName:"li"},{id:"bridge",className:"__target-lic","aria-hidden":""})),Object(o.b)("a",Object(n.a)({parentName:"li"},{href:"#bridge","aria-label":"bridge permalink",className:"__permalink-lic"}),Object(o.b)("inlineCode",{parentName:"a"},"bridge"))," - (default for rootful) create a network stack on the default bridge"),Object(o.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(o.b)("a",Object(n.a)({parentName:"li"},{id:"none",className:"__target-lic","aria-hidden":""})),Object(o.b)("a",Object(n.a)({parentName:"li"},{href:"#none","aria-label":"none permalink",className:"__permalink-lic"}),Object(o.b)("inlineCode",{parentName:"a"},"none"))," - no networking"),Object(o.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(o.b)("a",Object(n.a)({parentName:"li"},{id:"container-id",className:"__target-lic","aria-hidden":""})),Object(o.b)("a",Object(n.a)({parentName:"li"},{href:"#container-id","aria-label":"container id permalink",className:"__permalink-lic"}),Object(o.b)("inlineCode",{parentName:"a"},"container:id"))," - reuse another container's network stack"),Object(o.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(o.b)("a",Object(n.a)({parentName:"li"},{id:"host",className:"__target-lic","aria-hidden":""})),Object(o.b)("a",Object(n.a)({parentName:"li"},{href:"#host","aria-label":"host permalink",className:"__permalink-lic"}),Object(o.b)("inlineCode",{parentName:"a"},"host"))," - use the Podman host network stack. Note: the host mode gives the container\nfull access to local system services such as D-bus and is therefore considered insecure."),Object(o.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(o.b)("a",Object(n.a)({parentName:"li"},{id:"slirp4netns",className:"__target-lic","aria-hidden":""})),Object(o.b)("a",Object(n.a)({parentName:"li"},{href:"#slirp4netns","aria-label":"slirp4netns permalink",className:"__permalink-lic"}),Object(o.b)("inlineCode",{parentName:"a"},"slirp4netns"))," - use ",Object(o.b)("inlineCode",{parentName:"li"},"slirp4netns")," to create a user network stack. This is the default for\nrootless containers. Podman currently does not support this option for rootful containers (",Object(o.b)("a",Object(n.a)({parentName:"li"},{href:"https://github.com/containers/libpod/issues/6097"}),"issue"),")")))),Object(o.b)("h2",{className:"g-type-display-3"},Object(o.b)("a",Object(n.a)({parentName:"h2"},{className:"__permalink-h",href:"#networking","aria-label":"networking permalink"}),"\xbb"),Object(o.b)("a",Object(n.a)({parentName:"h2"},{className:"__target-h",id:"networking","aria-hidden":""})),"Networking"),Object(o.b)("p",null,"Podman supports forwarding and exposing ports like Docker. See ",Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"/docs/drivers/docker#forwarding-and-exposing-ports"}),"Docker Driver\nconfiguration")," for details."),Object(o.b)("h2",{className:"g-type-display-3"},Object(o.b)("a",Object(n.a)({parentName:"h2"},{className:"__permalink-h",href:"#plugin-options","aria-label":"plugin options permalink"}),"\xbb"),Object(o.b)("a",Object(n.a)({parentName:"h2"},{className:"__target-h",id:"plugin-options","aria-hidden":""})),"Plugin Options"),Object(o.b)("p",null,"The Podman plugin has options which may be customized in the agent's\nconfiguration file."),Object(o.b)("ul",null,Object(o.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(o.b)("a",Object(n.a)({parentName:"li"},{id:"volumes-1",className:"__target-lic","aria-hidden":""})),Object(o.b)("p",{parentName:"li"},Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"#volumes-1","aria-label":"volumes permalink",className:"__permalink-lic"}),Object(o.b)("inlineCode",{parentName:"a"},"volumes"))," stanza:"),Object(o.b)("ul",{parentName:"li"},Object(o.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(o.b)("a",Object(n.a)({parentName:"li"},{id:"enabled",className:"__target-lic","aria-hidden":""})),Object(o.b)("a",Object(n.a)({parentName:"li"},{href:"#enabled","aria-label":"enabled permalink",className:"__permalink-lic"}),Object(o.b)("inlineCode",{parentName:"a"},"enabled"))," - Defaults to ",Object(o.b)("inlineCode",{parentName:"li"},"true"),". Allows tasks to bind host paths (volumes)\ninside their container."),Object(o.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(o.b)("a",Object(n.a)({parentName:"li"},{id:"selinuxlabel",className:"__target-lic","aria-hidden":""})),Object(o.b)("a",Object(n.a)({parentName:"li"},{href:"#selinuxlabel","aria-label":"selinuxlabel permalink",className:"__permalink-lic"}),Object(o.b)("inlineCode",{parentName:"a"},"selinuxlabel"))," - Allows the operator to set a SELinux label to the\nallocation and task local bind-mounts to containers. If used with\n",Object(o.b)("inlineCode",{parentName:"li"},"volumes.enabled")," set to false, the labels will still be applied to the\nstandard binds in the container.")))),Object(o.b)("pre",{className:"language-hcl"},Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-hcl"}),"plugin ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"nomad-driver-podman"')," ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"config")," ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n    ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"volumes")," ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n      ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),"enabled"),"      ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token boolean"}),"true"),"\n      ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),"selinuxlabel")," ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"z"'),"\n    ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n  ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n")),Object(o.b)("ul",null,Object(o.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(o.b)("a",Object(n.a)({parentName:"li"},{id:"gc",className:"__target-lic","aria-hidden":""})),Object(o.b)("p",{parentName:"li"},Object(o.b)("a",Object(n.a)({parentName:"p"},{href:"#gc","aria-label":"gc permalink",className:"__permalink-lic"}),Object(o.b)("inlineCode",{parentName:"a"},"gc"))," stanza:"),Object(o.b)("ul",{parentName:"li"},Object(o.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(o.b)("a",Object(n.a)({parentName:"li"},{id:"container",className:"__target-lic","aria-hidden":""})),Object(o.b)("a",Object(n.a)({parentName:"li"},{href:"#container","aria-label":"container permalink",className:"__permalink-lic"}),Object(o.b)("inlineCode",{parentName:"a"},"container"))," - Defaults to ",Object(o.b)("inlineCode",{parentName:"li"},"true"),". This option can be used to disable\nNomad from removing a container when the task exits.")))),Object(o.b)("pre",{className:"language-hcl"},Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-hcl"}),"plugin ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"nomad-driver-podman"')," ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"config")," ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n    ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"gc")," ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n      ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),"container")," ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token boolean"}),"false"),"\n    ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n  ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n")),Object(o.b)("ul",null,Object(o.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(o.b)("a",Object(n.a)({parentName:"li"},{id:"recover_stopped",className:"__target-lic","aria-hidden":""})),Object(o.b)("a",Object(n.a)({parentName:"li"},{href:"#recover_stopped","aria-label":"recover_stopped permalink",className:"__permalink-lic"}),Object(o.b)("inlineCode",{parentName:"a"},"recover_stopped"))," - Defaults to ",Object(o.b)("inlineCode",{parentName:"li"},"true"),". Allows the driver to start and reuse\na previously stopped container after a Nomad client restart.\nConsider a simple single node system and a complete reboot. All previously managed containers\nwill be reused instead of disposed and recreated.")),Object(o.b)("pre",{className:"language-hcl"},Object(o.b)("code",Object(n.a)({parentName:"pre"},{className:"language-hcl"}),"plugin ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"nomad-driver-podman"')," ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"config")," ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n    ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),"recover_stopped")," ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token boolean"}),"false"),"\n  ",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n",Object(o.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n")))}i.isMDXComponent=!0}},[["IS15",0,1,2,4,3,5,6]]]);