(window.webpackJsonp=window.webpackJsonp||[]).push([[184],{"3Zxq":function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/docs/drivers/external/iis",function(){return t("WLX4")}])},WLX4:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return o}));var n=t("wx14"),i=t("Ff2n"),c=t("q1tI"),r=t.n(c),l=t("7ljp"),b=t("j1un"),s=(r.a.createElement,{}),p=Object(b.a)({layout:"docs",page_title:"Drivers: nomad-driver-iis",sidebar_title:"Windows IIS",description:"The IIS driver is used for running Windows IIS services.",__resourcePath:"docs/drivers/external/iis.mdx",__scans:{}});function o(e){var a=e.components,t=Object(i.a)(e,["components"]);return Object(l.b)(p,Object(n.a)({},s,t,{components:a,mdxType:"MDXLayout"}),Object(l.b)("h1",{className:"g-type-display-2"},Object(l.b)("a",Object(n.a)({parentName:"h1"},{className:"__permalink-h",href:"#windows-iis-driver","aria-label":"windows iis driver permalink"}),"\xbb"),Object(l.b)("a",Object(n.a)({parentName:"h1"},{className:"__target-h",id:"windows-iis-driver","aria-hidden":""})),"Windows IIS Driver"),Object(l.b)("p",null,"Name: ",Object(l.b)("inlineCode",{parentName:"p"},"win_iis")),Object(l.b)("p",null,'The Nomad IIS driver provides an interface for running Windows IIS website tasks.\nA "website" is a combination of an application pool and a site (app, vdir, etc.).\nEach allocation will create an application pool and site with the name being the allocation ID (guid).'),Object(l.b)("p",null,"For more detailed instructions on how to set up and use this driver, please\nrefer to the ",Object(l.b)("a",Object(n.a)({parentName:"p"},{href:"https://github.com/Roblox/nomad-driver-iis"}),"project README.md"),"."),Object(l.b)("h2",{className:"g-type-display-3"},Object(l.b)("a",Object(n.a)({parentName:"h2"},{className:"__permalink-h",href:"#task-configuration","aria-label":"task configuration permalink"}),"\xbb"),Object(l.b)("a",Object(n.a)({parentName:"h2"},{className:"__target-h",id:"task-configuration","aria-hidden":""})),"Task Configuration"),Object(l.b)("pre",{className:"language-hcl"},Object(l.b)("code",Object(n.a)({parentName:"pre"},{className:"language-hcl"}),"task ",Object(l.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"iis-test"')," ",Object(l.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(l.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),"driver")," ",Object(l.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(l.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"win_iis"'),"\n\n  ",Object(l.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"config")," ",Object(l.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n    ",Object(l.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),"path")," ",Object(l.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(l.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"C:\\\\inetpub\\\\wwwroot"'),"\n    ",Object(l.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"apppool_identity")," ",Object(l.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n      ",Object(l.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),"identity"),Object(l.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"="),Object(l.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"SpecificUser"'),"\n      ",Object(l.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),"username"),Object(l.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"="),Object(l.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"vagrant"'),"\n      ",Object(l.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),"password"),Object(l.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"="),Object(l.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"vagrant"'),"\n    ",Object(l.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n  ",Object(l.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n",Object(l.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n")),Object(l.b)("p",null,"The IIS task driver supports the following parameters:"),Object(l.b)("ul",null,Object(l.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(l.b)("a",Object(n.a)({parentName:"li"},{id:"path",className:"__target-lic","aria-hidden":""})),Object(l.b)("p",{parentName:"li"},Object(l.b)("a",Object(n.a)({parentName:"p"},{href:"#path","aria-label":"path permalink",className:"__permalink-lic"}),Object(l.b)("inlineCode",{parentName:"a"},"path"))," (string) - (Required) The path of the website directory.")),Object(l.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(l.b)("a",Object(n.a)({parentName:"li"},{id:"site_config_path",className:"__target-lic","aria-hidden":""})),Object(l.b)("p",{parentName:"li"},Object(l.b)("a",Object(n.a)({parentName:"p"},{href:"#site_config_path","aria-label":"site_config_path permalink",className:"__permalink-lic"}),Object(l.b)("inlineCode",{parentName:"a"},"site_config_path"))," (string) - (Optional) The path should point to a valid IIS Site XML that is generated from an export.")),Object(l.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(l.b)("a",Object(n.a)({parentName:"li"},{id:"apppool_config_path",className:"__target-lic","aria-hidden":""})),Object(l.b)("p",{parentName:"li"},Object(l.b)("a",Object(n.a)({parentName:"p"},{href:"#apppool_config_path","aria-label":"apppool_config_path permalink",className:"__permalink-lic"}),Object(l.b)("inlineCode",{parentName:"a"},"apppool_config_path"))," (string) - (Optional) The path should point to a valid IIS Application Pool XML that is generated from an export.")),Object(l.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(l.b)("a",Object(n.a)({parentName:"li"},{id:"apppool_identity",className:"__target-lic","aria-hidden":""})),Object(l.b)("p",{parentName:"li"},Object(l.b)("a",Object(n.a)({parentName:"p"},{href:"#apppool_identity","aria-label":"apppool_identity permalink",className:"__permalink-lic"}),Object(l.b)("inlineCode",{parentName:"a"},"apppool_identity"))," - (Optional) ",Object(l.b)("inlineCode",{parentName:"p"},"ApplicationPoolIdentity")," (default). The identity which the Application Pool will run under."),Object(l.b)("ul",{parentName:"li"},Object(l.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(l.b)("a",Object(n.a)({parentName:"li"},{id:"identity",className:"__target-lic","aria-hidden":""})),Object(l.b)("a",Object(n.a)({parentName:"li"},{href:"#identity","aria-label":"identity permalink",className:"__permalink-lic"}),Object(l.b)("inlineCode",{parentName:"a"},"identity"))," (string) - (Required) An identity is required to be set for Application Pools. Accepted inputs are ",Object(l.b)("inlineCode",{parentName:"li"},"LocalService"),", ",Object(l.b)("inlineCode",{parentName:"li"},"LocalSystem"),", ",Object(l.b)("inlineCode",{parentName:"li"},"NetworkService"),", ",Object(l.b)("inlineCode",{parentName:"li"},"SpecificUser"),", and ",Object(l.b)("inlineCode",{parentName:"li"},"ApplicationPoolIdentity"),"."),Object(l.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(l.b)("a",Object(n.a)({parentName:"li"},{id:"username",className:"__target-lic","aria-hidden":""})),Object(l.b)("a",Object(n.a)({parentName:"li"},{href:"#username","aria-label":"username permalink",className:"__permalink-lic"}),Object(l.b)("inlineCode",{parentName:"a"},"username"))," (string) - (Optional) If ",Object(l.b)("inlineCode",{parentName:"li"},"SpecificUser")," was chosen, then provide the username."),Object(l.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(l.b)("a",Object(n.a)({parentName:"li"},{id:"password",className:"__target-lic","aria-hidden":""})),Object(l.b)("a",Object(n.a)({parentName:"li"},{href:"#password","aria-label":"password permalink",className:"__permalink-lic"}),Object(l.b)("inlineCode",{parentName:"a"},"password"))," (string) - (Optional) If ",Object(l.b)("inlineCode",{parentName:"li"},"SpecificUser")," was chosen, then provide the password."))),Object(l.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(l.b)("a",Object(n.a)({parentName:"li"},{id:"bindings",className:"__target-lic","aria-hidden":""})),Object(l.b)("p",{parentName:"li"},Object(l.b)("a",Object(n.a)({parentName:"p"},{href:"#bindings","aria-label":"bindings permalink",className:"__permalink-lic"}),Object(l.b)("inlineCode",{parentName:"a"},"bindings"))," - (Optional) Bindings set here will be set for IIS."),Object(l.b)("ul",{parentName:"li"},Object(l.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(l.b)("a",Object(n.a)({parentName:"li"},{id:"hostname",className:"__target-lic","aria-hidden":""})),Object(l.b)("a",Object(n.a)({parentName:"li"},{href:"#hostname","aria-label":"hostname permalink",className:"__permalink-lic"}),Object(l.b)("inlineCode",{parentName:"a"},"hostname"))," (string)      - (Optional) IIS hostname for a binding."),Object(l.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(l.b)("a",Object(n.a)({parentName:"li"},{id:"ipaddress",className:"__target-lic","aria-hidden":""})),Object(l.b)("a",Object(n.a)({parentName:"li"},{href:"#ipaddress","aria-label":"ipaddress permalink",className:"__permalink-lic"}),Object(l.b)("inlineCode",{parentName:"a"},"ipaddress"))," (string)     - (Optional). ",Object(l.b)("inlineCode",{parentName:"li"},"*")," (default). IIS allows a binding to specify the IP Address being sent out."),Object(l.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(l.b)("a",Object(n.a)({parentName:"li"},{id:"resource_port",className:"__target-lic","aria-hidden":""})),Object(l.b)("a",Object(n.a)({parentName:"li"},{href:"#resource_port","aria-label":"resource_port permalink",className:"__permalink-lic"}),Object(l.b)("inlineCode",{parentName:"a"},"resource_port"))," (string) - (Optional) Use a label from an established network stanza port. It is recommended to use this approach over using ",Object(l.b)("inlineCode",{parentName:"li"},"port"),"."),Object(l.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(l.b)("a",Object(n.a)({parentName:"li"},{id:"port",className:"__target-lic","aria-hidden":""})),Object(l.b)("a",Object(n.a)({parentName:"li"},{href:"#port","aria-label":"port permalink",className:"__permalink-lic"}),Object(l.b)("inlineCode",{parentName:"a"},"port"))," (number)          - (Optional) Specify a static port to use for the website. A port must be specified between ",Object(l.b)("inlineCode",{parentName:"li"},"resource_port")," or ",Object(l.b)("inlineCode",{parentName:"li"},"port"),". Ports set this way will not be recognized by nomad."),Object(l.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(l.b)("a",Object(n.a)({parentName:"li"},{id:"type",className:"__target-lic","aria-hidden":""})),Object(l.b)("a",Object(n.a)({parentName:"li"},{href:"#type","aria-label":"type permalink",className:"__permalink-lic"}),Object(l.b)("inlineCode",{parentName:"a"},"type"))," (string)          - (Optional) Specifies which binding type IIS should use such as ",Object(l.b)("inlineCode",{parentName:"li"},"http")," or ",Object(l.b)("inlineCode",{parentName:"li"},"https"),"."),Object(l.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(l.b)("a",Object(n.a)({parentName:"li"},{id:"cert_hash",className:"__target-lic","aria-hidden":""})),Object(l.b)("a",Object(n.a)({parentName:"li"},{href:"#cert_hash","aria-label":"cert_hash permalink",className:"__permalink-lic"}),Object(l.b)("inlineCode",{parentName:"a"},"cert_hash"))," (string)     - (Optional) For SSL support, supply the cert hash here of a cert installed on the system.")))),Object(l.b)("p",null,"For optional parameters default value is assumed ",Object(l.b)("inlineCode",{parentName:"p"},"nil"),", if the default value is not specified in the documentation."),Object(l.b)("h2",{className:"g-type-display-3"},Object(l.b)("a",Object(n.a)({parentName:"h2"},{className:"__permalink-h",href:"#networking","aria-label":"networking permalink"}),"\xbb"),Object(l.b)("a",Object(n.a)({parentName:"h2"},{className:"__target-h",id:"networking","aria-hidden":""})),"Networking"),Object(l.b)("p",null,"Currently, ",Object(l.b)("inlineCode",{parentName:"p"},"nomad-driver-iis")," only supports host networking. No special configuration is needed as ",Object(l.b)("inlineCode",{parentName:"p"},"nomad-driver-iis"),"\nrelies on IIS to manage the networking for Windows IIS website tasks."),Object(l.b)("h2",{className:"g-type-display-3"},Object(l.b)("a",Object(n.a)({parentName:"h2"},{className:"__permalink-h",href:"#client-requirements","aria-label":"client requirements permalink"}),"\xbb"),Object(l.b)("a",Object(n.a)({parentName:"h2"},{className:"__target-h",id:"client-requirements","aria-hidden":""})),"Client Requirements"),Object(l.b)("p",null,Object(l.b)("inlineCode",{parentName:"p"},"nomad-driver-iis")," requires the following:"),Object(l.b)("ul",null,Object(l.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(l.b)("p",{parentName:"li"},"Windows 2016+")),Object(l.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(l.b)("p",{parentName:"li"},"Web Server enabled for IIS")),Object(l.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(l.b)("p",{parentName:"li"},"The Nomad IIS driver binary (",Object(l.b)("a",Object(n.a)({parentName:"p"},{href:"https://github.com/Roblox/nomad-driver-iis"}),"build instructions"),")"))),Object(l.b)("h2",{className:"g-type-display-3"},Object(l.b)("a",Object(n.a)({parentName:"h2"},{className:"__permalink-h",href:"#plugin_options","aria-label":"plugin options permalink"}),"\xbb"),Object(l.b)("a",Object(n.a)({parentName:"h2"},{className:"__target-h __compat",id:"plugin_options","aria-hidden":""})),Object(l.b)("a",Object(n.a)({parentName:"h2"},{className:"__target-h",id:"plugin-options","aria-hidden":""})),"Plugin Options"),Object(l.b)("ul",null,Object(l.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(l.b)("a",Object(n.a)({parentName:"li"},{id:"enabled",className:"__target-lic","aria-hidden":""})),Object(l.b)("p",{parentName:"li"},Object(l.b)("a",Object(n.a)({parentName:"p"},{href:"#enabled","aria-label":"enabled permalink",className:"__permalink-lic"}),Object(l.b)("inlineCode",{parentName:"a"},"enabled"))," - The ",Object(l.b)("inlineCode",{parentName:"p"},"IIS")," driver may be disabled on hosts by setting this option to ",Object(l.b)("inlineCode",{parentName:"p"},"false")," (defaults to ",Object(l.b)("inlineCode",{parentName:"p"},"true"),").")),Object(l.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(l.b)("a",Object(n.a)({parentName:"li"},{id:"stats_interval",className:"__target-lic","aria-hidden":""})),Object(l.b)("p",{parentName:"li"},Object(l.b)("a",Object(n.a)({parentName:"p"},{href:"#stats_interval","aria-label":"stats_interval permalink",className:"__permalink-lic"}),Object(l.b)("inlineCode",{parentName:"a"},"stats_interval"))," - This value defines how frequently you want to send ",Object(l.b)("inlineCode",{parentName:"p"},"TaskStats")," to nomad client. (defaults to ",Object(l.b)("inlineCode",{parentName:"p"},"1 second"),")."))),Object(l.b)("p",null,"An example of using these plugin options with the new ",Object(l.b)("a",Object(n.a)({parentName:"p"},{href:"/docs/configuration/plugin"}),"plugin\nsyntax")," is shown below:"),Object(l.b)("pre",{className:"language-hcl"},Object(l.b)("code",Object(n.a)({parentName:"pre"},{className:"language-hcl"}),"plugin ",Object(l.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"win_iis"')," ",Object(l.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(l.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"client")," ",Object(l.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n    ",Object(l.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),"enabled")," ",Object(l.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(l.b)("span",Object(n.a)({parentName:"code"},{className:"token boolean"}),"true"),"\n    ",Object(l.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),"stats_interval")," ",Object(l.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(l.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"30s"'),"\n  ",Object(l.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n",Object(l.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n")),Object(l.b)("p",null,"Please note the plugin name should match whatever name you have specified for the external driver in the ",Object(l.b)("a",Object(n.a)({parentName:"p"},{href:"/docs/configuration#plugin_dir"}),"plugin_dir")," directory."),Object(l.b)("h2",{className:"g-type-display-3"},Object(l.b)("a",Object(n.a)({parentName:"h2"},{className:"__permalink-h",href:"#client-attributes","aria-label":"client attributes permalink"}),"\xbb"),Object(l.b)("a",Object(n.a)({parentName:"h2"},{className:"__target-h",id:"client-attributes","aria-hidden":""})),"Client Attributes"),Object(l.b)("p",null,"The ",Object(l.b)("inlineCode",{parentName:"p"},"IIS")," driver will set the following client attributes:"),Object(l.b)("ul",null,Object(l.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(l.b)("a",Object(n.a)({parentName:"li"},{id:"driver-win_iis-iis_version",className:"__target-lic","aria-hidden":""})),Object(l.b)("a",Object(n.a)({parentName:"li"},{href:"#driver-win_iis-iis_version","aria-label":"driver win_iis iis_version permalink",className:"__permalink-lic"}),Object(l.b)("inlineCode",{parentName:"a"},"driver.win_iis.iis_version"))," - Sets to IIS version of IIS which is running on nomad client.")))}o.isMDXComponent=!0}},[["3Zxq",0,1,2,4,3,5,6]]]);