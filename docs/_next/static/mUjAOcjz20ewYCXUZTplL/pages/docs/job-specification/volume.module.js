(window.webpackJsonp=window.webpackJsonp||[]).push([[258],{"1WC8":function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/docs/job-specification/volume",function(){return t("FYKQ")}])},FYKQ:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return u}));var n,c=t("wx14"),o=t("Ff2n"),s=t("q1tI"),l=t.n(s),i=t("7ljp"),b=t("j1un"),r=(l.a.createElement,n="Placement",function(e){return console.warn("Component "+n+" was not imported, exported, or provided by MDXProvider as global scope"),Object(i.b)("div",e)}),p={},m=Object(b.a)({layout:"docs",page_title:"volume Stanza - Job Specification",sidebar_title:"volume",description:'The "volume" stanza allows the group to specify that it requires a given volume from the cluster. Nomad will automatically handle ensuring that the volume is available and mounted into the task.',__resourcePath:"docs/job-specification/volume.mdx",__scans:{}});function u(e){var{components:a}=e,t=Object(o.a)(e,["components"]);return Object(i.b)(m,Object(c.a)({},p,t,{components:a,mdxType:"MDXLayout"}),Object(i.b)("h1",{className:"g-type-display-2"},Object(i.b)("a",Object(c.a)({parentName:"h1"},{className:"__permalink-h",href:"#volume-stanza","aria-label":"volume stanza permalink"}),"\xbb"),Object(i.b)("a",Object(c.a)({parentName:"h1"},{className:"__target-h",id:"volume-stanza","aria-hidden":""})),Object(i.b)("inlineCode",{parentName:"h1"},"volume")," Stanza"),Object(i.b)(r,{groups:["job","group","volume"],mdxType:"Placement"}),Object(i.b)("p",null,"The ",Object(i.b)("inlineCode",{parentName:"p"},"volume")," stanza allows the group to specify that it requires a\ngiven volume from the cluster."),Object(i.b)("p",null,"The key of the stanza is the name of the volume as it will be exposed\nto task configuration."),Object(i.b)("pre",{className:"language-hcl"},Object(i.b)("code",Object(c.a)({parentName:"pre"},{className:"language-hcl"}),"job ",Object(i.b)("span",Object(c.a)({parentName:"code"},{className:"token string"}),'"docs"')," ",Object(i.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n  group ",Object(i.b)("span",Object(c.a)({parentName:"code"},{className:"token string"}),'"example"')," ",Object(i.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n    volume ",Object(i.b)("span",Object(c.a)({parentName:"code"},{className:"token string"}),'"certs"')," ",Object(i.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n      ",Object(i.b)("span",Object(c.a)({parentName:"code"},{className:"token property"}),"type"),"      ",Object(i.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(i.b)("span",Object(c.a)({parentName:"code"},{className:"token string"}),'"host"'),"\n      ",Object(i.b)("span",Object(c.a)({parentName:"code"},{className:"token property"}),"source"),"    ",Object(i.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(i.b)("span",Object(c.a)({parentName:"code"},{className:"token string"}),'"ca-certificates"'),"\n      ",Object(i.b)("span",Object(c.a)({parentName:"code"},{className:"token property"}),"read_only")," ",Object(i.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(i.b)("span",Object(c.a)({parentName:"code"},{className:"token boolean"}),"true"),"\n    ",Object(i.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n  ",Object(i.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n",Object(i.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n")),Object(i.b)("p",null,"The Nomad server will ensure that the allocations are only scheduled\non hosts that have a set of volumes that meet the criteria specified\nin the ",Object(i.b)("inlineCode",{parentName:"p"},"volume")," stanzas. These may be ",Object(i.b)("a",Object(c.a)({parentName:"p"},{href:"/docs/configuration/client/#host_volume-stanza"}),"host volumes"),"\nconfigured on the client, or ",Object(i.b)("a",Object(c.a)({parentName:"p"},{href:"/docs/commands/volume/register"}),"CSI volumes")," dynamically\nmounted by ",Object(i.b)("a",Object(c.a)({parentName:"p"},{href:"/docs/job-specification/csi_plugin"}),"CSI plugins"),"."),Object(i.b)("p",null,"The Nomad client will make the volumes available to tasks according to\nthe ",Object(i.b)("a",Object(c.a)({parentName:"p"},{href:"/docs/job-specification/volume_mount",title:"Nomad volume_mount Job Specification"}),"volume_mount")," stanza in the ",Object(i.b)("inlineCode",{parentName:"p"},"task")," configuration."),Object(i.b)("h2",{className:"g-type-display-3"},Object(i.b)("a",Object(c.a)({parentName:"h2"},{className:"__permalink-h",href:"#volume-parameters","aria-label":"volume parameters permalink"}),"\xbb"),Object(i.b)("a",Object(c.a)({parentName:"h2"},{className:"__target-h",id:"volume-parameters","aria-hidden":""})),Object(i.b)("inlineCode",{parentName:"h2"},"volume")," Parameters"),Object(i.b)("ul",null,Object(i.b)("li",Object(c.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(i.b)("a",Object(c.a)({parentName:"li"},{id:"type",className:"__target-lic","aria-hidden":""})),Object(i.b)("p",{parentName:"li"},Object(i.b)("a",Object(c.a)({parentName:"p"},{href:"#type","aria-label":"type permalink",className:"__permalink-lic"}),Object(i.b)("inlineCode",{parentName:"a"},"type"))," ",Object(i.b)("inlineCode",{parentName:"p"},'(string: "")')," - Specifies the type of a given volume. The\nvalid volume types are ",Object(i.b)("inlineCode",{parentName:"p"},'"host"')," and ",Object(i.b)("inlineCode",{parentName:"p"},'"csi"'),".")),Object(i.b)("li",Object(c.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(i.b)("a",Object(c.a)({parentName:"li"},{id:"source",className:"__target-lic","aria-hidden":""})),Object(i.b)("p",{parentName:"li"},Object(i.b)("a",Object(c.a)({parentName:"p"},{href:"#source","aria-label":"source permalink",className:"__permalink-lic"}),Object(i.b)("inlineCode",{parentName:"a"},"source"))," ",Object(i.b)("inlineCode",{parentName:"p"},"(string: <required>)")," - The name of the volume to\nrequest. When using ",Object(i.b)("inlineCode",{parentName:"p"},"host_volume"),"'s this should match the published\nname of the host volume. When using ",Object(i.b)("inlineCode",{parentName:"p"},"csi")," volumes, this should match\nthe ID of the registered volume.")),Object(i.b)("li",Object(c.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(i.b)("a",Object(c.a)({parentName:"li"},{id:"read_only",className:"__target-lic","aria-hidden":""})),Object(i.b)("p",{parentName:"li"},Object(i.b)("a",Object(c.a)({parentName:"p"},{href:"#read_only","aria-label":"read_only permalink",className:"__permalink-lic"}),Object(i.b)("inlineCode",{parentName:"a"},"read_only"))," ",Object(i.b)("inlineCode",{parentName:"p"},"(bool: false)")," - Specifies that the group only requires\nread only access to a volume and is used as the default value for\nthe ",Object(i.b)("inlineCode",{parentName:"p"},"volume_mount -> read_only")," configuration. This value is also\nused for validating ",Object(i.b)("inlineCode",{parentName:"p"},"host_volume")," ACLs and for scheduling when a\nmatching ",Object(i.b)("inlineCode",{parentName:"p"},"host_volume")," requires ",Object(i.b)("inlineCode",{parentName:"p"},"read_only")," usage."))))}u.isMDXComponent=!0}},[["1WC8",0,1,2,4,3,5,6]]]);