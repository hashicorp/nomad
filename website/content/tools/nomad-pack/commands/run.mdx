---
layout: commands
page_title: "Commands: Run"
sidebar_title: "run"
description: "Run a new pack or update an existing pack"
---

# Nomad-Pack Run

Command: `nomad-pack run`

Run a new pack or update an existing pack

@include "tools/nomad-pack/commands/run_desc.mdx"

## Usage

Usage: `nomad-pack run <pack-name> [options]`


	Install the specified Nomad Pack to a configured Nomad cluster.

Examples:
	# Run an example pack with the default deployment name "example".
	nomad-pack run example

	# Run an example pack with the specified deployment name "dev"
	nomad-pack run example --name=dev

	# Run an example pack with override variables in a variable file
	nomad-pack run example --var-file="./overrides.hcl"

	# Run an example pack with cli variable overrides
	nomad-pack run example --var="redis_image_version=latest" --var="redis_resources={"cpu": "1000", "memory": "512"}"

	# Run a pack under development from the filesystem - supports current
	# working directory or relative path
	nomad-pack run .

#### Operation Options

- `-var-file=<string>` - Specifies the path to a variable override file. This can
						be provided multiple times on a single command to result
						in a list of files.
- `-allow-unset-vars` - Suppress errors from unset variables without default values.
					Equivalent of setting the NOMAD_PACK_ALLOW_UNSET_VARS environment variable to "1" or "true".
- `-ignore-missing-vars` - Determines whether override variables not present in the
					pack should be ignored or produce an error.
- `-var=<key=value>` - Specifies single override variables in the form of HCL
					syntax and can be specified multiple times per command.
- `-name=<string>` - If set, this will be the unique identifier of this deployed
					instance of the specified pack. If not set, the pack name
					will be used. This is useful for running more than one
					instance of a pack within the same cluster. Note that this
					name must be globally unique within a cluster. Running the
					run command multiple times with the same name, will just
					re-submit the same pack, and apply changes if you have made
					any to the underlying pack. Be mindful that, whether you
					have made changes or not, the underlying Allocations will be
					replaced. When managing packs, the name specified here is
					the name that should be passed to nomad-pack's plan and
					destroy commands.
- `-parser-v1` - Use the legacy syntax parser to parse your job. This
			enables pack to run packs for earlier versions while you are
			migrating them to the new syntax

#### Nomad Cluster Options

- `-address=<string>` - The address of the Nomad server.
					Overrides the NOMAD_ADDR environment variable if set.
- `-namespace=<string>` - The target namespace for queries and actions bound to a namespace.
					Overrides the NOMAD_NAMESPACE environment variable if set.
- `-region=<string>` - The region of the Nomad servers to forward commands to.
					Overrides the NOMAD_REGION environment variable if set.
- `-ca-cert=<string>` - Path to a PEM encoded CA cert file to use to verify the
					Nomad server SSL certificate. Overrides the NOMAD_CACERT
					environment variable if set.
- `-client-cert=<string>` - Path to a PEM encoded client certificate for TLS authentication
					to the Nomad server. Must also specify --client-key. Overrides
					the NOMAD_CLIENT_CERT environment variable if set.
- `-client-key=<string>` - Path to an unencrypted PEM encoded private key matching the
					client certificate from --client-cert. Overrides the
					NOMAD_CLIENT_KEY environment variable if set.
- `-tls-server-name=<string>` - The server name to use as the SNI host when connecting via
					TLS. Overrides the NOMAD_TLS_SERVER_NAME environment variable
					if set.
- `-token=<string>` - The SecretID of an ACL token to use to authenticate API requests with.
					Overrides the NOMAD_TOKEN environment variable if set.
- `-tls-skip-verify` - Do not verify TLS certificate. This is highly not recommended.
						Verification will also be skipped if NOMAD_SKIP_VERIFY is set.

#### Run Options

- `-registry=<string>` - Specific registry name containing the pack to be run.
- `-ref=<string>` - Specific git ref of the pack to be run.
					Supports tags, SHA, and latest. If no ref is specified,
					defaults to latest.

					Using ref with a file path is not supported.
- `-check-index=<uint>` - If set, the job is only registered or updated if the passed
					job modify index matches the server side version. If a
					check-index value of zero is passed, the job is only
					registered if it does not yet exist. If a non-zero value is
					passed, it ensures that the job is being updated from a
					known state. The use of this flag is most common in
					conjunction with job plan command.
- `-consul-token=<string>` - If set, the passed Consul token is stored in the job before
					sending to the Nomad servers. This allows passing the Consul
					token without storing it in the job file. This overrides the
					token found in the $CONSUL_HTTP_TOKEN environment variable
					and that found in the job.
- `-consul-namespace=<string>` - If set, any services in the job will be registered into the
					specified Consul namespace. Any template block reading from
					Consul KV will be scoped to the the specified Consul
					namespace. If Consul ACLs are enabled and the
					allow_unauthenticated Nomad server Consul configuration is
					not enabled, then a Consul token must be supplied with
					appropriate service and KV Consul ACL policy permissions.
- `-vault-token=<string>` - If set, the passed Vault token is stored in the job before
					sending to the Nomad servers. This allows passing the Vault
					token without storing it in the job file. This overrides the
					token found in the $VAULT_TOKEN environment variable and
					that found in the job.
- `-vault-namespace=<string>` - If set, the passed Vault namespace is stored in the job
					before sending to the Nomad servers.
- `-policy-override` - Sets the flag to force override any soft mandatory Sentinel
					policies.
- `-preserve-counts` - If set, the existing task group counts will be preserved
					when updating a job.

@include "tools/nomad-pack/commands/run_more.mdx"
