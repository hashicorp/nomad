(window.webpackJsonp=window.webpackJsonp||[]).push([[186],{OdmN:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return o}));var n=t("wx14"),c=t("Ff2n"),b=t("q1tI"),l=t.n(b),r=t("7ljp"),i=t("j1un"),s=(l.a.createElement,{}),p=Object(i.a)({layout:"docs",page_title:"Drivers: LXC",sidebar_title:"LXC",description:"The LXC task driver is used to run application containers using LXC.",__resourcePath:"docs/drivers/external/lxc.mdx",__scans:{}});function o(e){var a=e.components,t=Object(c.a)(e,["components"]);return Object(r.b)(p,Object(n.a)({},s,t,{components:a,mdxType:"MDXLayout"}),Object(r.b)("h1",{className:"g-type-display-2"},Object(r.b)("a",Object(n.a)({parentName:"h1"},{className:"__permalink-h",href:"#lxc-driver","aria-label":"lxc driver permalink"}),"\xbb"),Object(r.b)("a",Object(n.a)({parentName:"h1"},{className:"__target-h",id:"lxc-driver","aria-hidden":""})),"LXC Driver"),Object(r.b)("p",null,"Name: ",Object(r.b)("inlineCode",{parentName:"p"},"lxc")),Object(r.b)("p",null,"The ",Object(r.b)("inlineCode",{parentName:"p"},"lxc")," driver provides an interface for using LXC for running application\ncontainers. You can download the external LXC driver ",Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"https://releases.hashicorp.com/nomad-driver-lxc"}),"here"),". For more detailed instructions on how to set up and use this driver, please refer to the ",Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"https://learn.hashicorp.com/nomad/using-plugins/lxc"}),"LXC guide"),"."),Object(r.b)("div",{className:"alert alert-warning g-type-body",role:"alert"},Object(r.b)("p",{parentName:"div"},"",Object(r.b)("strong",{parentName:"p"},"Note:")," The LXC client set up has changed in Nomad 0.9. You must use the new ",Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"/docs/configuration/plugin"}),"plugin syntax")," and install the external LXC driver in the ",Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"/docs/configuration#plugin_dir"}),"plugin_dir")," prior to upgrading. See ",Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"#plugin-options"}),"plugin options")," below for an example. Note the job specification remains the same.")),Object(r.b)("h2",{className:"g-type-display-3"},Object(r.b)("a",Object(n.a)({parentName:"h2"},{className:"__permalink-h",href:"#task-configuration","aria-label":"task configuration permalink"}),"\xbb"),Object(r.b)("a",Object(n.a)({parentName:"h2"},{className:"__target-h",id:"task-configuration","aria-hidden":""})),"Task Configuration"),Object(r.b)("pre",{className:"language-hcl"},Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-hcl"}),"task ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"busybox"')," ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),"driver")," ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"lxc"'),"\n\n  ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"config")," ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n    ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),"log_level")," ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"trace"'),"\n    ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),"verbosity")," ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"verbose"'),"\n    ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),"template")," ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"/usr/share/lxc/templates/lxc-busybox"'),"\n    ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),"template_args")," ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"["),Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"]"),"\n\n    ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token comment"}),"# these optional values can be set in the template"),"\n    ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),"distro")," ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"="),"          ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'""'),"\n    ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),"release")," ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"="),"         ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'""'),"\n    ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),"arch")," ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"="),"            ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'""'),"\n    ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),"image_variant")," ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"="),"   ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"default"'),"\n    ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),"image_server")," ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"="),"    ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"images.linuxcontainers.org"'),"\n    ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),"gpg_key_id")," ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"="),"      ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'""'),"\n    ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),"gpg_key_server")," ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"="),"  ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'""'),"\n    ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),"disable_gpg")," ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"="),"     ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token boolean"}),"false"),"\n    ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),"flush_cache")," ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"="),"     ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token boolean"}),"false"),"\n    ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),"force_cache")," ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"="),"     ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token boolean"}),"false"),"\n  ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n")),Object(r.b)("p",null,"The ",Object(r.b)("inlineCode",{parentName:"p"},"lxc")," driver supports the following configuration in the job spec:"),Object(r.b)("ul",null,Object(r.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(r.b)("a",Object(n.a)({parentName:"li"},{id:"template",className:"__target-lic","aria-hidden":""})),Object(r.b)("p",{parentName:"li"},Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"#template","aria-label":"template permalink",className:"__permalink-lic"}),Object(r.b)("inlineCode",{parentName:"a"},"template"))," - The LXC template to run."),Object(r.b)("pre",Object(n.a)({parentName:"li"},{className:"language-hcl"}),Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-hcl"}),Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"config")," ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),"template")," ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"/usr/share/lxc/templates/lxc-alpine"'),"\n",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n"))),Object(r.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(r.b)("a",Object(n.a)({parentName:"li"},{id:"template_args",className:"__target-lic","aria-hidden":""})),Object(r.b)("p",{parentName:"li"},Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"#template_args","aria-label":"template_args permalink",className:"__permalink-lic"}),Object(r.b)("inlineCode",{parentName:"a"},"template_args"))," - A list of argument strings to pass into the template.")),Object(r.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(r.b)("a",Object(n.a)({parentName:"li"},{id:"log_level",className:"__target-lic","aria-hidden":""})),Object(r.b)("p",{parentName:"li"},Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"#log_level","aria-label":"log_level permalink",className:"__permalink-lic"}),Object(r.b)("inlineCode",{parentName:"a"},"log_level"))," - (Optional) LXC library's logging level. Defaults to ",Object(r.b)("inlineCode",{parentName:"p"},"error"),".\nMust be one of ",Object(r.b)("inlineCode",{parentName:"p"},"trace"),", ",Object(r.b)("inlineCode",{parentName:"p"},"debug"),", ",Object(r.b)("inlineCode",{parentName:"p"},"info"),", ",Object(r.b)("inlineCode",{parentName:"p"},"warn"),", or ",Object(r.b)("inlineCode",{parentName:"p"},"error"),"."),Object(r.b)("pre",Object(n.a)({parentName:"li"},{className:"language-hcl"}),Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-hcl"}),Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"config")," ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),"log_level")," ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"debug"'),"\n",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n"))),Object(r.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(r.b)("a",Object(n.a)({parentName:"li"},{id:"verbosity",className:"__target-lic","aria-hidden":""})),Object(r.b)("p",{parentName:"li"},Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"#verbosity","aria-label":"verbosity permalink",className:"__permalink-lic"}),Object(r.b)("inlineCode",{parentName:"a"},"verbosity"))," - (Optional) Enables extra verbosity in the LXC library's\nlogging. Defaults to ",Object(r.b)("inlineCode",{parentName:"p"},"quiet"),". Must be one of ",Object(r.b)("inlineCode",{parentName:"p"},"quiet")," or ",Object(r.b)("inlineCode",{parentName:"p"},"verbose"),"."),Object(r.b)("pre",Object(n.a)({parentName:"li"},{className:"language-hcl"}),Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-hcl"}),Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"config")," ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),"verbosity")," ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"quiet"'),"\n",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n"))),Object(r.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(r.b)("a",Object(n.a)({parentName:"li"},{id:"volumes",className:"__target-lic","aria-hidden":""})),Object(r.b)("p",{parentName:"li"},Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"#volumes","aria-label":"volumes permalink",className:"__permalink-lic"}),Object(r.b)("inlineCode",{parentName:"a"},"volumes"))," - (Optional) A list of ",Object(r.b)("inlineCode",{parentName:"p"},"host_path:container_path")," strings to bind-mount host paths to container paths. Mounting host paths outside of the allocation directory can be disabled on clients by setting the ",Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"#volumes_enabled"}),Object(r.b)("inlineCode",{parentName:"a"},"volumes_enabled"))," option set to false. This will limit volumes to directories that exist inside the allocation directory."),Object(r.b)("div",Object(n.a)({parentName:"li"},{className:"alert alert-warning g-type-body",role:"alert"}),Object(r.b)("p",{parentName:"div"},"",Object(r.b)("strong",{parentName:"p"},"Note:")," Unlike the similar option for the docker driver, this\noption must not have an absolute path as the ",Object(r.b)("inlineCode",{parentName:"p"},"container_path"),"\ncomponent. This will cause an error when submitting a job.")),Object(r.b)("p",{parentName:"li"},"Setting this does not affect the standard bind-mounts of ",Object(r.b)("inlineCode",{parentName:"p"},"alloc"),",\n",Object(r.b)("inlineCode",{parentName:"p"},"local"),", and ",Object(r.b)("inlineCode",{parentName:"p"},"secrets"),", which are always created."),Object(r.b)("pre",Object(n.a)({parentName:"li"},{className:"language-hcl"}),Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-hcl"}),Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"config")," ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),"volumes")," ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"["),"\n    ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token comment"}),"# Use absolute paths to mount arbitrary paths on the host"),"\n    ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"/path/on/host:path/in/container"'),",\n\n    ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token comment"}),"# Use relative paths to rebind paths already in the allocation dir"),"\n    ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"relative/to/task:also/in/container"'),"\n  ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"]"),"\n",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n"))),Object(r.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(r.b)("a",Object(n.a)({parentName:"li"},{id:"release",className:"__target-lic","aria-hidden":""})),Object(r.b)("p",{parentName:"li"},Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"#release","aria-label":"release permalink",className:"__permalink-lic"}),Object(r.b)("inlineCode",{parentName:"a"},"release"))," - (Optional) The name/version of the distribution. By default this is set by the template.")),Object(r.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(r.b)("a",Object(n.a)({parentName:"li"},{id:"arch",className:"__target-lic","aria-hidden":""})),Object(r.b)("p",{parentName:"li"},Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"#arch","aria-label":"arch permalink",className:"__permalink-lic"}),Object(r.b)("inlineCode",{parentName:"a"},"arch"))," - (Optional) The architecture of the container. By default this is set by the template.")),Object(r.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(r.b)("a",Object(n.a)({parentName:"li"},{id:"image_server",className:"__target-lic","aria-hidden":""})),Object(r.b)("p",{parentName:"li"},Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"#image_server","aria-label":"image_server permalink",className:"__permalink-lic"}),Object(r.b)("inlineCode",{parentName:"a"},"image_server"))," - (Optional) The hostname of the image server. Defaults to ",Object(r.b)("inlineCode",{parentName:"p"},"images.linuxcontainers.org"),".")),Object(r.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(r.b)("a",Object(n.a)({parentName:"li"},{id:"image_variant",className:"__target-lic","aria-hidden":""})),Object(r.b)("p",{parentName:"li"},Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"#image_variant","aria-label":"image_variant permalink",className:"__permalink-lic"}),Object(r.b)("inlineCode",{parentName:"a"},"image_variant"))," - (Optional) The variant of the image. Defaults to ",Object(r.b)("inlineCode",{parentName:"p"},"default")," or as set by the template.")),Object(r.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(r.b)("a",Object(n.a)({parentName:"li"},{id:"disable_gpg",className:"__target-lic","aria-hidden":""})),Object(r.b)("p",{parentName:"li"},Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"#disable_gpg","aria-label":"disable_gpg permalink",className:"__permalink-lic"}),Object(r.b)("inlineCode",{parentName:"a"},"disable_gpg"))," - (Optional) Disable GPG validation of images. Defaults to ",Object(r.b)("inlineCode",{parentName:"p"},"false"),", and enabling this flag is not recommended.")),Object(r.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(r.b)("a",Object(n.a)({parentName:"li"},{id:"flush_cache",className:"__target-lic","aria-hidden":""})),Object(r.b)("p",{parentName:"li"},Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"#flush_cache","aria-label":"flush_cache permalink",className:"__permalink-lic"}),Object(r.b)("inlineCode",{parentName:"a"},"flush_cache"))," - (Optional) Flush the local copy of the image (if present) and force it to be fetched from the image server. Defaults to ",Object(r.b)("inlineCode",{parentName:"p"},"false"),".")),Object(r.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(r.b)("a",Object(n.a)({parentName:"li"},{id:"force_cache",className:"__target-lic","aria-hidden":""})),Object(r.b)("p",{parentName:"li"},Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"#force_cache","aria-label":"force_cache permalink",className:"__permalink-lic"}),Object(r.b)("inlineCode",{parentName:"a"},"force_cache"))," - (Optional) Force the use of the local copy even if expired. Defaults to ",Object(r.b)("inlineCode",{parentName:"p"},"false"),".")),Object(r.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(r.b)("a",Object(n.a)({parentName:"li"},{id:"gpg_key_server",className:"__target-lic","aria-hidden":""})),Object(r.b)("p",{parentName:"li"},Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"#gpg_key_server","aria-label":"gpg_key_server permalink",className:"__permalink-lic"}),Object(r.b)("inlineCode",{parentName:"a"},"gpg_key_server")),": GPG key server used for checking image signatures. Default is set by the underlying LXC library.")),Object(r.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(r.b)("a",Object(n.a)({parentName:"li"},{id:"gpg_key_id",className:"__target-lic","aria-hidden":""})),Object(r.b)("p",{parentName:"li"},Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"#gpg_key_id","aria-label":"gpg_key_id permalink",className:"__permalink-lic"}),Object(r.b)("inlineCode",{parentName:"a"},"gpg_key_id")),": GPG key ID used for checking image signatures. Default is set by the underlying LXC library."))),Object(r.b)("h2",{className:"g-type-display-3"},Object(r.b)("a",Object(n.a)({parentName:"h2"},{className:"__permalink-h",href:"#networking","aria-label":"networking permalink"}),"\xbb"),Object(r.b)("a",Object(n.a)({parentName:"h2"},{className:"__target-h",id:"networking","aria-hidden":""})),"Networking"),Object(r.b)("p",null,"Currently the ",Object(r.b)("inlineCode",{parentName:"p"},"lxc")," driver only supports host networking. See the ",Object(r.b)("inlineCode",{parentName:"p"},"none"),"\nnetworking type in the ",Object(r.b)("inlineCode",{parentName:"p"},"lxc.container.conf")," ",Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"https://linuxcontainers.org/lxc/manpages/man5/lxc.container.conf.5.html#lbAM"}),"manual")," for more\ninformation."),Object(r.b)("h2",{className:"g-type-display-3"},Object(r.b)("a",Object(n.a)({parentName:"h2"},{className:"__permalink-h",href:"#client-requirements","aria-label":"client requirements permalink"}),"\xbb"),Object(r.b)("a",Object(n.a)({parentName:"h2"},{className:"__target-h",id:"client-requirements","aria-hidden":""})),"Client Requirements"),Object(r.b)("p",null,"The ",Object(r.b)("inlineCode",{parentName:"p"},"lxc")," driver requires the following:"),Object(r.b)("ul",null,Object(r.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),"64-bit Linux host"),Object(r.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),"The ",Object(r.b)("inlineCode",{parentName:"li"},"linux_amd64")," Nomad binary"),Object(r.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),"The LXC driver binary placed in the ",Object(r.b)("a",Object(n.a)({parentName:"li"},{href:"/docs/configuration#plugin_dir"}),"plugin_dir")," directory."),Object(r.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(r.b)("a",Object(n.a)({parentName:"li"},{id:"liblxc",className:"__target-lic","aria-hidden":""})),Object(r.b)("a",Object(n.a)({parentName:"li"},{href:"#liblxc","aria-label":"liblxc permalink",className:"__permalink-lic"}),Object(r.b)("inlineCode",{parentName:"a"},"liblxc"))," to be installed"),Object(r.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(r.b)("a",Object(n.a)({parentName:"li"},{id:"lxc-templates",className:"__target-lic","aria-hidden":""})),Object(r.b)("a",Object(n.a)({parentName:"li"},{href:"#lxc-templates","aria-label":"lxc templates permalink",className:"__permalink-lic"}),Object(r.b)("inlineCode",{parentName:"a"},"lxc-templates"))," to be installed")),Object(r.b)("h2",{className:"g-type-display-3"},Object(r.b)("a",Object(n.a)({parentName:"h2"},{className:"__permalink-h",href:"#plugin-options","aria-label":"plugin options permalink"}),"\xbb"),Object(r.b)("a",Object(n.a)({parentName:"h2"},{className:"__target-h",id:"plugin-options","aria-hidden":""})),"Plugin Options"),Object(r.b)("ul",null,Object(r.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(r.b)("a",Object(n.a)({parentName:"li"},{id:"enabled",className:"__target-lic","aria-hidden":""})),Object(r.b)("p",{parentName:"li"},Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"#enabled","aria-label":"enabled permalink",className:"__permalink-lic"}),Object(r.b)("inlineCode",{parentName:"a"},"enabled"))," - The ",Object(r.b)("inlineCode",{parentName:"p"},"lxc")," driver may be disabled on hosts by setting this option to ",Object(r.b)("inlineCode",{parentName:"p"},"false")," (defaults to ",Object(r.b)("inlineCode",{parentName:"p"},"true"),").")),Object(r.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(r.b)("a",Object(n.a)({parentName:"li"},{id:"volumes_enabled",className:"__target-lic","aria-hidden":""})),Object(r.b)("p",{parentName:"li"},Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"#volumes_enabled","aria-label":"volumes_enabled permalink",className:"__permalink-lic"}),Object(r.b)("inlineCode",{parentName:"a"},"volumes_enabled")),Object(r.b)("a",{id:"volumes_enabled"})," - Specifies whether host can bind-mount host paths to container paths (defaults to ",Object(r.b)("inlineCode",{parentName:"p"},"true"),").")),Object(r.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(r.b)("a",Object(n.a)({parentName:"li"},{id:"lxc_path",className:"__target-lic","aria-hidden":""})),Object(r.b)("p",{parentName:"li"},Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"#lxc_path","aria-label":"lxc_path permalink",className:"__permalink-lic"}),Object(r.b)("inlineCode",{parentName:"a"},"lxc_path"))," - The location in which all containers are stored (commonly defaults to ",Object(r.b)("inlineCode",{parentName:"p"},"/var/lib/lxc"),"). See ",Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"https://linuxcontainers.org/lxc/manpages/man1/lxc-create.1.html"}),Object(r.b)("inlineCode",{parentName:"a"},"lxc-create"))," for more details.")),Object(r.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(r.b)("a",Object(n.a)({parentName:"li"},{id:"gc",className:"__target-lic","aria-hidden":""})),Object(r.b)("p",{parentName:"li"},Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"#gc","aria-label":"gc permalink",className:"__permalink-lic"}),Object(r.b)("inlineCode",{parentName:"a"},"gc"))," stanza:"),Object(r.b)("ul",{parentName:"li"},Object(r.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(r.b)("a",Object(n.a)({parentName:"li"},{id:"container",className:"__target-lic","aria-hidden":""})),Object(r.b)("a",Object(n.a)({parentName:"li"},{href:"#container","aria-label":"container permalink",className:"__permalink-lic"}),Object(r.b)("inlineCode",{parentName:"a"},"container"))," - Defaults to ",Object(r.b)("inlineCode",{parentName:"li"},"true"),". This option can be used to disable Nomad\nfrom removing a container when the task exits. Under a name conflict,\nNomad may still remove the dead container.")))),Object(r.b)("p",null,"An example of using these plugin options with the new ",Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"/docs/configuration/plugin"}),"plugin\nsyntax")," is shown below:"),Object(r.b)("pre",{className:"language-hcl"},Object(r.b)("code",Object(n.a)({parentName:"pre"},{className:"language-hcl"}),"plugin ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"nomad-driver-lxc"')," ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"config")," ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n    ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),"enabled")," ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token boolean"}),"true"),"\n    ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),"volumes_enabled")," ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token boolean"}),"true"),"\n    ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),"lxc_path")," ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token string"}),'"/var/lib/lxc"'),"\n    ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token keyword"}),"gc")," ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n      ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token property"}),"container")," ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token boolean"}),"false"),"\n    ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n  ",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n",Object(r.b)("span",Object(n.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n")),Object(r.b)("p",null,"Please note the plugin name should match whatever name you have specified for the external driver in the ",Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"/docs/configuration#plugin_dir"}),"plugin_dir")," directory."),Object(r.b)("h2",{className:"g-type-display-3"},Object(r.b)("a",Object(n.a)({parentName:"h2"},{className:"__permalink-h",href:"#client-configuration","aria-label":"client configuration permalink"}),"\xbb"),Object(r.b)("a",Object(n.a)({parentName:"h2"},{className:"__target-h",id:"client-configuration","aria-hidden":""})),"Client Configuration"),Object(r.b)("div",{className:"alert alert-info g-type-body",role:"alert"},Object(r.b)("p",{parentName:"div"},"Only use this section for pre-0.9 releases of Nomad. If you are using Nomad\n0.9 or above, please see ",Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"#plugin-options"}),"plugin options"))),Object(r.b)("p",null,"The ",Object(r.b)("inlineCode",{parentName:"p"},"lxc")," driver has the following ",Object(r.b)("a",Object(n.a)({parentName:"p"},{href:"/docs/configuration/client#options"}),"client-level options"),":"),Object(r.b)("ul",null,Object(r.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(r.b)("a",Object(n.a)({parentName:"li"},{id:"lxc-enable",className:"__target-lic","aria-hidden":""})),Object(r.b)("a",Object(n.a)({parentName:"li"},{href:"#lxc-enable","aria-label":"lxc enable permalink",className:"__permalink-lic"}),Object(r.b)("inlineCode",{parentName:"a"},"lxc.enable"))," - The ",Object(r.b)("inlineCode",{parentName:"li"},"lxc")," driver may be disabled on hosts by setting this\noption to ",Object(r.b)("inlineCode",{parentName:"li"},"false")," (defaults to ",Object(r.b)("inlineCode",{parentName:"li"},"true"),").")),Object(r.b)("h2",{className:"g-type-display-3"},Object(r.b)("a",Object(n.a)({parentName:"h2"},{className:"__permalink-h",href:"#client-attributes","aria-label":"client attributes permalink"}),"\xbb"),Object(r.b)("a",Object(n.a)({parentName:"h2"},{className:"__target-h",id:"client-attributes","aria-hidden":""})),"Client Attributes"),Object(r.b)("p",null,"The ",Object(r.b)("inlineCode",{parentName:"p"},"lxc")," driver will set the following client attributes:"),Object(r.b)("ul",null,Object(r.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(r.b)("a",Object(n.a)({parentName:"li"},{id:"driver-lxc",className:"__target-lic","aria-hidden":""})),Object(r.b)("a",Object(n.a)({parentName:"li"},{href:"#driver-lxc","aria-label":"driver lxc permalink",className:"__permalink-lic"}),Object(r.b)("inlineCode",{parentName:"a"},"driver.lxc"))," - Set to ",Object(r.b)("inlineCode",{parentName:"li"},"1")," if LXC is found and enabled on the host node."),Object(r.b)("li",Object(n.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(r.b)("a",Object(n.a)({parentName:"li"},{id:"driver-lxc-version",className:"__target-lic","aria-hidden":""})),Object(r.b)("a",Object(n.a)({parentName:"li"},{href:"#driver-lxc-version","aria-label":"driver lxc version permalink",className:"__permalink-lic"}),Object(r.b)("inlineCode",{parentName:"a"},"driver.lxc.version"))," - Version of ",Object(r.b)("inlineCode",{parentName:"li"},"lxc")," e.g.: ",Object(r.b)("inlineCode",{parentName:"li"},"1.1.0"),".")),Object(r.b)("h2",{className:"g-type-display-3"},Object(r.b)("a",Object(n.a)({parentName:"h2"},{className:"__permalink-h",href:"#resource-isolation","aria-label":"resource isolation permalink"}),"\xbb"),Object(r.b)("a",Object(n.a)({parentName:"h2"},{className:"__target-h",id:"resource-isolation","aria-hidden":""})),"Resource Isolation"),Object(r.b)("p",null,"This driver supports CPU and memory isolation via the ",Object(r.b)("inlineCode",{parentName:"p"},"lxc")," library. Network\nisolation is not supported as of now."))}o.isMDXComponent=!0},TKkj:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/docs/drivers/external/lxc",function(){return t("OdmN")}])}},[["TKkj",0,1,2,4,3,5,6]]]);