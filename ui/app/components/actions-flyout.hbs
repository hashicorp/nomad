{{!
  Copyright (c) HashiCorp, Inc.
  SPDX-License-Identifier: BUSL-1.1
~}}

{{#if this.nomadActions.flyoutActive}}
  <Hds::Flyout id="actions-flyout"
    @onClose={{this.nomadActions.closeFlyout}} @size="large" as |Fly|
  >
    <Fly.Header>
      Actions
      {{#if this.contextualActions.length}}
        <ActionsDropdown
          @actions={{this.contextualActions}}
          @allocation={{this.allocation}}
          @context={{if this.task this.task this.job}}
        />
      {{/if}}
      {{#if this.nomadActions.runningActions.length}}
        {{!-- TODO: Make two-step --}}
        <Hds::Button @text="Stop All" @color="critical" @size="medium" {{on "click" this.nomadActions.stopAll}} />
      {{/if}}
      {{#if this.nomadActions.finishedActions.length}}
        <Hds::Button @text="Clear Finished Actions" @color="secondary" @size="medium" {{on "click" this.nomadActions.clearFinishedActions}} />
      {{/if}}
    </Fly.Header>
    <Fly.Body>
      <ul class="actions-queue">
        {{#each this.actionInstances as |instance|}}
          <ActionCard @instance={{instance}} />
        {{/each}}
      </ul>
    </Fly.Body>
  </Hds::Flyout>
{{/if}}
