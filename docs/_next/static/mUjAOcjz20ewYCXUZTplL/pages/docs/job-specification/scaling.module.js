(window.webpackJsonp=window.webpackJsonp||[]).push([[248],{VcOj:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/docs/job-specification/scaling",function(){return t("fm4S")}])},fm4S:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return j}));var n,c=t("wx14"),s=t("Ff2n"),o=t("q1tI"),b=t.n(o),p=t("7ljp"),l=t("j1un"),i=(b.a.createElement,n="Placement",function(e){return console.warn("Component "+n+" was not imported, exported, or provided by MDXProvider as global scope"),Object(p.b)("div",e)}),r={},m=Object(l.a)({layout:"docs",page_title:"scaling Stanza - Job Specification",sidebar_title:"scaling <sup>Beta</sup>",description:'The "scaling" stanza allows specifying scaling policy for a task group',__resourcePath:"docs/job-specification/scaling.mdx",__scans:{}});function j(e){var{components:a}=e,t=Object(s.a)(e,["components"]);return Object(p.b)(m,Object(c.a)({},r,t,{components:a,mdxType:"MDXLayout"}),Object(p.b)("h1",{className:"g-type-display-2"},Object(p.b)("a",Object(c.a)({parentName:"h1"},{className:"__permalink-h",href:"#scaling-stanza","aria-label":"scaling stanza permalink"}),"\xbb"),Object(p.b)("a",Object(c.a)({parentName:"h1"},{className:"__target-h",id:"scaling-stanza","aria-hidden":""})),Object(p.b)("inlineCode",{parentName:"h1"},"scaling")," Stanza"),Object(p.b)(i,{groups:["job","group"],mdxType:"Placement"}),Object(p.b)("p",null,"The ",Object(p.b)("inlineCode",{parentName:"p"},"scaling")," stanza allows configuring scaling options for a task group, for the purpose\nof supporting external autoscalers like the ",Object(p.b)("a",Object(c.a)({parentName:"p"},{href:"https://github.com/hashicorp/nomad-autoscaler"}),"Nomad Autoscaler"),"\nand scaling via the Nomad UI. This stanza is not supported within jobs of type ",Object(p.b)("inlineCode",{parentName:"p"},"system"),"."),Object(p.b)("pre",{className:"language-hcl"},Object(p.b)("code",Object(c.a)({parentName:"pre"},{className:"language-hcl"}),"job ",Object(p.b)("span",Object(c.a)({parentName:"code"},{className:"token string"}),'"example"')," ",Object(p.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(p.b)("span",Object(c.a)({parentName:"code"},{className:"token property"}),"datacenters")," ",Object(p.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(p.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"["),Object(p.b)("span",Object(c.a)({parentName:"code"},{className:"token string"}),'"dc1"'),Object(p.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"]"),"\n  group ",Object(p.b)("span",Object(c.a)({parentName:"code"},{className:"token string"}),'"cache"')," ",Object(p.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n    task ",Object(p.b)("span",Object(c.a)({parentName:"code"},{className:"token string"}),'"redis"')," ",Object(p.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n      ",Object(p.b)("span",Object(c.a)({parentName:"code"},{className:"token property"}),"driver")," ",Object(p.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(p.b)("span",Object(c.a)({parentName:"code"},{className:"token string"}),'"docker"'),"\n      ",Object(p.b)("span",Object(c.a)({parentName:"code"},{className:"token keyword"}),"config")," ",Object(p.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n        ",Object(p.b)("span",Object(c.a)({parentName:"code"},{className:"token property"}),"image")," ",Object(p.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(p.b)("span",Object(c.a)({parentName:"code"},{className:"token string"}),'"redis:3.2"'),"\n      ",Object(p.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n    ",Object(p.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n    ",Object(p.b)("span",Object(c.a)({parentName:"code"},{className:"token keyword"}),"scaling")," ",Object(p.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n      ",Object(p.b)("span",Object(c.a)({parentName:"code"},{className:"token property"}),"enabled")," ",Object(p.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(p.b)("span",Object(c.a)({parentName:"code"},{className:"token boolean"}),"true"),"\n      ",Object(p.b)("span",Object(c.a)({parentName:"code"},{className:"token property"}),"min")," ",Object(p.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(p.b)("span",Object(c.a)({parentName:"code"},{className:"token number"}),"0"),"\n      ",Object(p.b)("span",Object(c.a)({parentName:"code"},{className:"token property"}),"max")," ",Object(p.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(p.b)("span",Object(c.a)({parentName:"code"},{className:"token number"}),"10"),"\n      ",Object(p.b)("span",Object(c.a)({parentName:"code"},{className:"token keyword"}),"policy")," ",Object(p.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n      ",Object(p.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n    ",Object(p.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n  ",Object(p.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n",Object(p.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n")),Object(p.b)("h2",{className:"g-type-display-3"},Object(p.b)("a",Object(c.a)({parentName:"h2"},{className:"__permalink-h",href:"#scaling-parameters","aria-label":"scaling parameters permalink"}),"\xbb"),Object(p.b)("a",Object(c.a)({parentName:"h2"},{className:"__target-h",id:"scaling-parameters","aria-hidden":""})),Object(p.b)("inlineCode",{parentName:"h2"},"scaling")," Parameters"),Object(p.b)("ul",null,Object(p.b)("li",Object(c.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(p.b)("a",Object(c.a)({parentName:"li"},{id:"min",className:"__target-lic","aria-hidden":""})),Object(p.b)("p",{parentName:"li"},Object(p.b)("a",Object(c.a)({parentName:"p"},{href:"#min","aria-label":"min permalink",className:"__permalink-lic"}),Object(p.b)("inlineCode",{parentName:"a"},"min"))," - ",Object(p.b)("code",null,"(int: nil)")," - The minimum acceptable count for the task group.\nThis should be honored by the external autoscaler. It will also be honored by Nomad\nduring job updates and scaling operations. Defaults to the specified task group ",Object(p.b)("a",Object(c.a)({parentName:"p"},{href:"/docs/job-specification/group/#count",title:"Nomad Task Group specification"}),"count"),".")),Object(p.b)("li",Object(c.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(p.b)("a",Object(c.a)({parentName:"li"},{id:"max",className:"__target-lic","aria-hidden":""})),Object(p.b)("p",{parentName:"li"},Object(p.b)("a",Object(c.a)({parentName:"p"},{href:"#max","aria-label":"max permalink",className:"__permalink-lic"}),Object(p.b)("inlineCode",{parentName:"a"},"max"))," - ",Object(p.b)("code",null,"(int: ","<","required",">",")")," - The maximum acceptable count for the task group.\nThis should be honored by the external autoscaler. It will also be honored by Nomad\nduring job updates and scaling operations.")),Object(p.b)("li",Object(c.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(p.b)("a",Object(c.a)({parentName:"li"},{id:"enabled",className:"__target-lic","aria-hidden":""})),Object(p.b)("p",{parentName:"li"},Object(p.b)("a",Object(c.a)({parentName:"p"},{href:"#enabled","aria-label":"enabled permalink",className:"__permalink-lic"}),Object(p.b)("inlineCode",{parentName:"a"},"enabled"))," - ",Object(p.b)("code",null,"(bool: false)")," - Whether the scaling policy is enabled.\nThis is intended to allow temporarily disabling an autoscaling policy, and should be\nhonored by the external autoscaler.")),Object(p.b)("li",Object(c.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(p.b)("a",Object(c.a)({parentName:"li"},{id:"policy",className:"__target-lic","aria-hidden":""})),Object(p.b)("p",{parentName:"li"},Object(p.b)("a",Object(c.a)({parentName:"p"},{href:"#policy","aria-label":"policy permalink",className:"__permalink-lic"}),Object(p.b)("inlineCode",{parentName:"a"},"policy"))," - ",Object(p.b)("code",null,"(map<string|...>: nil)")," - The autoscaling policy. This is\nopaque to Nomad, consumed and parsed only by the external autoscaler. Therefore,\nits contents are specific to the autoscaler; see autoscaler documentation."))))}j.isMDXComponent=!0}},[["VcOj",0,1,2,4,3,5,6]]]);