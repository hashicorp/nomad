(window.webpackJsonp=window.webpackJsonp||[]).push([[128],{RYNX:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/docs/commands/operator/raft-remove-peer",function(){return t("c3Z2")}])},c3Z2:function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return p}));var r=t("wx14"),n=t("Ff2n"),i=t("q1tI"),c=t.n(i),l=t("7ljp"),b=t("j1un"),o=(c.a.createElement,{}),m=Object(b.a)({layout:"docs",page_title:"Commands: operator raft remove-peer",sidebar_title:"raft remove-peer",description:"Remove a Nomad server from the Raft configuration.\n",__resourcePath:"docs/commands/operator/raft-remove-peer.mdx",__scans:{}});function p(e){var a=e.components,t=Object(n.a)(e,["components"]);return Object(l.b)(m,Object(r.a)({},o,t,{components:a,mdxType:"MDXLayout"}),Object(l.b)("h1",{className:"g-type-display-2"},Object(l.b)("a",Object(r.a)({parentName:"h1"},{className:"__permalink-h",href:"#command-operator-raft-remove-peer","aria-label":"command operator raft remove peer permalink"}),"\xbb"),Object(l.b)("a",Object(r.a)({parentName:"h1"},{className:"__target-h",id:"command-operator-raft-remove-peer","aria-hidden":""})),"Command: operator raft remove-peer"),Object(l.b)("p",null,"Remove the Nomad server with given address from the Raft configuration."),Object(l.b)("p",null,"There are rare cases where a peer may be left behind in the Raft quorum even\nthough the server is no longer present and known to the cluster. This command\ncan be used to remove the failed server so that it is no longer affects the Raft\nquorum. If the server still shows in the output of the ",Object(l.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/commands/server/members",title:"Nomad server members command"}),Object(l.b)("inlineCode",{parentName:"a"},"nomad server members")),"\ncommand, it is preferable to clean up by running ",Object(l.b)("a",Object(r.a)({parentName:"p"},{href:"/docs/commands/server/force-leave",title:"Nomad server force-leave command"}),Object(l.b)("inlineCode",{parentName:"a"},"nomad server force-leave")),"\ninstead of this command."),Object(l.b)("p",null,"See the ",Object(l.b)("a",Object(r.a)({parentName:"p"},{href:"https://learn.hashicorp.com/nomad/operating-nomad/outage"}),"Outage Recovery")," guide for some examples of how this command is used.\nFor an API to perform these operations programmatically, please see the\ndocumentation for the ",Object(l.b)("a",Object(r.a)({parentName:"p"},{href:"/api-docs/operator",title:"Nomad Operator API"}),"Operator")," endpoint."),Object(l.b)("h2",{className:"g-type-display-3"},Object(l.b)("a",Object(r.a)({parentName:"h2"},{className:"__permalink-h",href:"#usage","aria-label":"usage permalink"}),"\xbb"),Object(l.b)("a",Object(r.a)({parentName:"h2"},{className:"__target-h",id:"usage","aria-hidden":""})),"Usage"),Object(l.b)("pre",{className:"language-plaintext"},Object(l.b)("code",Object(r.a)({parentName:"pre"},{className:"language-plaintext"}),"nomad operator raft remove-peer [options]\n")),Object(l.b)("h2",{className:"g-type-display-3"},Object(l.b)("a",Object(r.a)({parentName:"h2"},{className:"__permalink-h",href:"#general-options","aria-label":"general options permalink"}),"\xbb"),Object(l.b)("a",Object(r.a)({parentName:"h2"},{className:"__target-h",id:"general-options","aria-hidden":""})),"General Options"),Object(l.b)("ul",null,Object(l.b)("li",Object(r.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(l.b)("a",Object(r.a)({parentName:"li"},{id:"address",className:"__target-lic","aria-hidden":""})),Object(l.b)("p",{parentName:"li"},Object(l.b)("a",Object(r.a)({parentName:"p"},{href:"#address","aria-label":"address permalink",className:"__permalink-lic"}),Object(l.b)("inlineCode",{parentName:"a"},"-address=<addr>")),": The address of the Nomad server. Overrides the ",Object(l.b)("inlineCode",{parentName:"p"},"NOMAD_ADDR"),"\nenvironment variable if set. Defaults to ",Object(l.b)("inlineCode",{parentName:"p"},"http://127.0.0.1:4646"),".")),Object(l.b)("li",Object(r.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(l.b)("a",Object(r.a)({parentName:"li"},{id:"region",className:"__target-lic","aria-hidden":""})),Object(l.b)("p",{parentName:"li"},Object(l.b)("a",Object(r.a)({parentName:"p"},{href:"#region","aria-label":"region permalink",className:"__permalink-lic"}),Object(l.b)("inlineCode",{parentName:"a"},"-region=<region>")),": The region of the Nomad server to forward commands to.\nOverrides the ",Object(l.b)("inlineCode",{parentName:"p"},"NOMAD_REGION")," environment variable if set. Defaults to the\nAgent's local region.")),Object(l.b)("li",Object(r.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(l.b)("a",Object(r.a)({parentName:"li"},{id:"namespace",className:"__target-lic","aria-hidden":""})),Object(l.b)("p",{parentName:"li"},Object(l.b)("a",Object(r.a)({parentName:"p"},{href:"#namespace","aria-label":"namespace permalink",className:"__permalink-lic"}),Object(l.b)("inlineCode",{parentName:"a"},"-namespace=<namespace>")),": The target namespace for queries and actions bound\nto a namespace. Overrides the NOMAD_NAMESPACE environment variable if set.\nIf set to '*', job and alloc subcommands query all namespacecs authorized to\nuser. Defaults to the \"default\" namespace.")),Object(l.b)("li",Object(r.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(l.b)("a",Object(r.a)({parentName:"li"},{id:"no-color",className:"__target-lic","aria-hidden":""})),Object(l.b)("p",{parentName:"li"},Object(l.b)("a",Object(r.a)({parentName:"p"},{href:"#no-color","aria-label":"no color permalink",className:"__permalink-lic"}),Object(l.b)("inlineCode",{parentName:"a"},"-no-color")),": Disables colored command output. Alternatively,\n",Object(l.b)("inlineCode",{parentName:"p"},"NOMAD_CLI_NO_COLOR")," may be set.")),Object(l.b)("li",Object(r.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(l.b)("a",Object(r.a)({parentName:"li"},{id:"ca-cert",className:"__target-lic","aria-hidden":""})),Object(l.b)("p",{parentName:"li"},Object(l.b)("a",Object(r.a)({parentName:"p"},{href:"#ca-cert","aria-label":"ca cert permalink",className:"__permalink-lic"}),Object(l.b)("inlineCode",{parentName:"a"},"-ca-cert=<path>")),": Path to a PEM encoded CA cert file to use to verify the\nNomad server SSL certificate. Overrides the ",Object(l.b)("inlineCode",{parentName:"p"},"NOMAD_CACERT")," environment\nvariable if set.")),Object(l.b)("li",Object(r.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(l.b)("a",Object(r.a)({parentName:"li"},{id:"ca-path",className:"__target-lic","aria-hidden":""})),Object(l.b)("p",{parentName:"li"},Object(l.b)("a",Object(r.a)({parentName:"p"},{href:"#ca-path","aria-label":"ca path permalink",className:"__permalink-lic"}),Object(l.b)("inlineCode",{parentName:"a"},"-ca-path=<path>")),": Path to a directory of PEM encoded CA cert files to verify\nthe Nomad server SSL certificate. If both ",Object(l.b)("inlineCode",{parentName:"p"},"-ca-cert")," and ",Object(l.b)("inlineCode",{parentName:"p"},"-ca-path")," are\nspecified, ",Object(l.b)("inlineCode",{parentName:"p"},"-ca-cert")," is used. Overrides the ",Object(l.b)("inlineCode",{parentName:"p"},"NOMAD_CAPATH")," environment\nvariable if set.")),Object(l.b)("li",Object(r.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(l.b)("a",Object(r.a)({parentName:"li"},{id:"client-cert",className:"__target-lic","aria-hidden":""})),Object(l.b)("p",{parentName:"li"},Object(l.b)("a",Object(r.a)({parentName:"p"},{href:"#client-cert","aria-label":"client cert permalink",className:"__permalink-lic"}),Object(l.b)("inlineCode",{parentName:"a"},"-client-cert=<path>")),": Path to a PEM encoded client certificate for TLS\nauthentication to the Nomad server. Must also specify ",Object(l.b)("inlineCode",{parentName:"p"},"-client-key"),". Overrides\nthe ",Object(l.b)("inlineCode",{parentName:"p"},"NOMAD_CLIENT_CERT")," environment variable if set.")),Object(l.b)("li",Object(r.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(l.b)("a",Object(r.a)({parentName:"li"},{id:"client-key",className:"__target-lic","aria-hidden":""})),Object(l.b)("p",{parentName:"li"},Object(l.b)("a",Object(r.a)({parentName:"p"},{href:"#client-key","aria-label":"client key permalink",className:"__permalink-lic"}),Object(l.b)("inlineCode",{parentName:"a"},"-client-key=<path>")),": Path to an unencrypted PEM encoded private key matching\nthe client certificate from ",Object(l.b)("inlineCode",{parentName:"p"},"-client-cert"),". Overrides the ",Object(l.b)("inlineCode",{parentName:"p"},"NOMAD_CLIENT_KEY"),"\nenvironment variable if set.")),Object(l.b)("li",Object(r.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(l.b)("a",Object(r.a)({parentName:"li"},{id:"tls-server-name",className:"__target-lic","aria-hidden":""})),Object(l.b)("p",{parentName:"li"},Object(l.b)("a",Object(r.a)({parentName:"p"},{href:"#tls-server-name","aria-label":"tls server name permalink",className:"__permalink-lic"}),Object(l.b)("inlineCode",{parentName:"a"},"-tls-server-name=<value>")),": The server name to use as the SNI host when connecting\nvia TLS. Overrides the ",Object(l.b)("inlineCode",{parentName:"p"},"NOMAD_TLS_SERVER_NAME")," environment variable if set.")),Object(l.b)("li",Object(r.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(l.b)("a",Object(r.a)({parentName:"li"},{id:"tls-skip-verify",className:"__target-lic","aria-hidden":""})),Object(l.b)("p",{parentName:"li"},Object(l.b)("a",Object(r.a)({parentName:"p"},{href:"#tls-skip-verify","aria-label":"tls skip verify permalink",className:"__permalink-lic"}),Object(l.b)("inlineCode",{parentName:"a"},"-tls-skip-verify")),": Do not verify TLS certificate. This is highly not\nrecommended. Verification will also be skipped if ",Object(l.b)("inlineCode",{parentName:"p"},"NOMAD_SKIP_VERIFY")," is set.")),Object(l.b)("li",Object(r.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(l.b)("a",Object(r.a)({parentName:"li"},{id:"token",className:"__target-lic","aria-hidden":""})),Object(l.b)("p",{parentName:"li"},Object(l.b)("a",Object(r.a)({parentName:"p"},{href:"#token","aria-label":"token permalink",className:"__permalink-lic"}),Object(l.b)("inlineCode",{parentName:"a"},"-token")),": The SecretID of an ACL token to use to authenticate API requests with.\nOverrides the ",Object(l.b)("inlineCode",{parentName:"p"},"NOMAD_TOKEN")," environment variable if set."))),Object(l.b)("h2",{className:"g-type-display-3"},Object(l.b)("a",Object(r.a)({parentName:"h2"},{className:"__permalink-h",href:"#remove-peer-options","aria-label":"remove peer options permalink"}),"\xbb"),Object(l.b)("a",Object(r.a)({parentName:"h2"},{className:"__target-h",id:"remove-peer-options","aria-hidden":""})),"Remove Peer Options"),Object(l.b)("ul",null,Object(l.b)("li",Object(r.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(l.b)("a",Object(r.a)({parentName:"li"},{id:"peer-address",className:"__target-lic","aria-hidden":""})),Object(l.b)("p",{parentName:"li"},Object(l.b)("a",Object(r.a)({parentName:"p"},{href:"#peer-address","aria-label":"peer address permalink",className:"__permalink-lic"}),Object(l.b)("inlineCode",{parentName:"a"},"-peer-address")),': Remove a Nomad server with given address from the Raft\nconfiguration. The format is "IP:port"')),Object(l.b)("li",Object(r.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(l.b)("a",Object(r.a)({parentName:"li"},{id:"peer-id",className:"__target-lic","aria-hidden":""})),Object(l.b)("p",{parentName:"li"},Object(l.b)("a",Object(r.a)({parentName:"p"},{href:"#peer-id","aria-label":"peer id permalink",className:"__permalink-lic"}),Object(l.b)("inlineCode",{parentName:"a"},"-peer-id")),': Remove a Nomad server with the given ID from the Raft\nconfiguration. The format is "id"'))))}p.isMDXComponent=!0}},[["RYNX",0,1,2,4,3,5,6]]]);