(window.webpackJsonp=window.webpackJsonp||[]).push([[254],{"r+i8":function(e,a,t){"use strict";t.r(a),t.d(a,"default",(function(){return j}));var n,c=t("wx14"),i=t("Ff2n"),s=t("q1tI"),b=t.n(s),r=t("7ljp"),o=t("j1un"),p=(b.a.createElement,n="Placement",function(e){return console.warn("Component "+n+" was not imported, exported, or provided by MDXProvider as global scope"),Object(r.b)("div",e)}),l={},m=Object(o.a)({layout:"docs",page_title:"task Stanza - Job Specification",sidebar_title:"task",description:'The "task" stanza creates an individual unit of work, such as a Docker\ncontainer, web application, or batch processing.',__resourcePath:"docs/job-specification/task.mdx",__scans:{}});function j(e){var a=e.components,t=Object(i.a)(e,["components"]);return Object(r.b)(m,Object(c.a)({},l,t,{components:a,mdxType:"MDXLayout"}),Object(r.b)("h1",{className:"g-type-display-2"},Object(r.b)("a",Object(c.a)({parentName:"h1"},{className:"__permalink-h",href:"#task-stanza","aria-label":"task stanza permalink"}),"\xbb"),Object(r.b)("a",Object(c.a)({parentName:"h1"},{className:"__target-h",id:"task-stanza","aria-hidden":""})),Object(r.b)("inlineCode",{parentName:"h1"},"task")," Stanza"),Object(r.b)(p,{groups:["job","group","task"],mdxType:"Placement"}),Object(r.b)("p",null,"The ",Object(r.b)("inlineCode",{parentName:"p"},"task")," stanza creates an individual unit of work, such as a Docker\ncontainer, web application, or batch processing."),Object(r.b)("pre",{className:"language-hcl"},Object(r.b)("code",Object(c.a)({parentName:"pre"},{className:"language-hcl"}),"job ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token string"}),'"docs"')," ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n  group ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token string"}),'"example"')," ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n    task ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token string"}),'"server"')," ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n      ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token comment"}),"# ..."),"\n    ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n  ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n")),Object(r.b)("h2",{className:"g-type-display-3"},Object(r.b)("a",Object(c.a)({parentName:"h2"},{className:"__permalink-h",href:"#task-parameters","aria-label":"task parameters permalink"}),"\xbb"),Object(r.b)("a",Object(c.a)({parentName:"h2"},{className:"__target-h",id:"task-parameters","aria-hidden":""})),Object(r.b)("inlineCode",{parentName:"h2"},"task")," Parameters"),Object(r.b)("ul",null,Object(r.b)("li",Object(c.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(r.b)("a",Object(c.a)({parentName:"li"},{id:"artifact",className:"__target-lic","aria-hidden":""})),Object(r.b)("p",{parentName:"li"},Object(r.b)("a",Object(c.a)({parentName:"p"},{href:"#artifact","aria-label":"artifact permalink",className:"__permalink-lic"}),Object(r.b)("inlineCode",{parentName:"a"},"artifact"))," ",Object(r.b)("code",null,"(",Object(r.b)("a",Object(c.a)({parentName:"p"},{href:"/docs/job-specification/artifact",title:"Nomad artifact Job Specification"}),"Artifact"),": nil)")," - Defines an artifact to download\nbefore running the task. This may be specified multiple times to download\nmultiple artifacts.")),Object(r.b)("li",Object(c.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(r.b)("a",Object(c.a)({parentName:"li"},{id:"config",className:"__target-lic","aria-hidden":""})),Object(r.b)("p",{parentName:"li"},Object(r.b)("a",Object(c.a)({parentName:"p"},{href:"#config","aria-label":"config permalink",className:"__permalink-lic"}),Object(r.b)("inlineCode",{parentName:"a"},"config"))," ",Object(r.b)("inlineCode",{parentName:"p"},"(map<string|string>: nil)")," - Specifies the driver configuration,\nwhich is passed directly to the driver to start the task. The details of\nconfigurations are specific to each driver, so please see specific driver\ndocumentation for more information.")),Object(r.b)("li",Object(c.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(r.b)("a",Object(c.a)({parentName:"li"},{id:"constraint",className:"__target-lic","aria-hidden":""})),Object(r.b)("p",{parentName:"li"},Object(r.b)("a",Object(c.a)({parentName:"p"},{href:"#constraint","aria-label":"constraint permalink",className:"__permalink-lic"}),Object(r.b)("inlineCode",{parentName:"a"},"constraint"))," ",Object(r.b)("code",null,"(",Object(r.b)("a",Object(c.a)({parentName:"p"},{href:"/docs/job-specification/constraint",title:"Nomad constraint Job Specification"}),"Constraint"),": nil)")," - Specifies user-defined\nconstraints on the task. This can be provided multiple times to define\nadditional constraints.")),Object(r.b)("li",Object(c.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(r.b)("a",Object(c.a)({parentName:"li"},{id:"affinity",className:"__target-lic","aria-hidden":""})),Object(r.b)("p",{parentName:"li"},Object(r.b)("a",Object(c.a)({parentName:"p"},{href:"#affinity","aria-label":"affinity permalink",className:"__permalink-lic"}),Object(r.b)("inlineCode",{parentName:"a"},"affinity"))," ",Object(r.b)("code",null,"(",Object(r.b)("a",Object(c.a)({parentName:"p"},{href:"/docs/job-specification/affinity",title:"Nomad affinity Job Specification"}),"Affinity"),": nil)")," - This can be provided\nmultiple times to define preferred placement criteria.")),Object(r.b)("li",Object(c.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(r.b)("a",Object(c.a)({parentName:"li"},{id:"dispatch_payload",className:"__target-lic","aria-hidden":""})),Object(r.b)("p",{parentName:"li"},Object(r.b)("a",Object(c.a)({parentName:"p"},{href:"#dispatch_payload","aria-label":"dispatch_payload permalink",className:"__permalink-lic"}),Object(r.b)("inlineCode",{parentName:"a"},"dispatch_payload"))," ",Object(r.b)("code",null,"(",Object(r.b)("a",Object(c.a)({parentName:"p"},{href:"/docs/job-specification/dispatch_payload",title:"Nomad dispatch_payload Job Specification"}),"DispatchPayload"),": nil)")," - Configures the\ntask to have access to dispatch payloads.")),Object(r.b)("li",Object(c.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(r.b)("a",Object(c.a)({parentName:"li"},{id:"driver",className:"__target-lic","aria-hidden":""})),Object(r.b)("p",{parentName:"li"},Object(r.b)("a",Object(c.a)({parentName:"p"},{href:"#driver","aria-label":"driver permalink",className:"__permalink-lic"}),Object(r.b)("inlineCode",{parentName:"a"},"driver"))," - Specifies the task driver that should be used to run the\ntask. See the ",Object(r.b)("a",Object(c.a)({parentName:"p"},{href:"/docs/drivers"}),"driver documentation")," for what\nis available. Examples include ",Object(r.b)("inlineCode",{parentName:"p"},"docker"),", ",Object(r.b)("inlineCode",{parentName:"p"},"qemu"),", ",Object(r.b)("inlineCode",{parentName:"p"},"java")," and ",Object(r.b)("inlineCode",{parentName:"p"},"exec"),".")),Object(r.b)("li",Object(c.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(r.b)("a",Object(c.a)({parentName:"li"},{id:"env",className:"__target-lic","aria-hidden":""})),Object(r.b)("p",{parentName:"li"},Object(r.b)("a",Object(c.a)({parentName:"p"},{href:"#env","aria-label":"env permalink",className:"__permalink-lic"}),Object(r.b)("inlineCode",{parentName:"a"},"env"))," ",Object(r.b)("code",null,"(",Object(r.b)("a",Object(c.a)({parentName:"p"},{href:"/docs/job-specification/env",title:"Nomad env Job Specification"}),"Env"),": nil)")," - Specifies environment variables that will\nbe passed to the running process.")),Object(r.b)("li",Object(c.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(r.b)("a",Object(c.a)({parentName:"li"},{id:"kill_timeout",className:"__target-lic","aria-hidden":""})),Object(r.b)("p",{parentName:"li"},Object(r.b)("a",Object(c.a)({parentName:"p"},{href:"#kill_timeout","aria-label":"kill_timeout permalink",className:"__permalink-lic"}),Object(r.b)("inlineCode",{parentName:"a"},"kill_timeout"))," ",Object(r.b)("inlineCode",{parentName:"p"},'(string: "5s")')," - Specifies the duration to wait for an\napplication to gracefully quit before force-killing. Nomad first sends a\n",Object(r.b)("a",Object(c.a)({parentName:"p"},{href:"/docs/job-specification/task#kill_signal"}),Object(r.b)("inlineCode",{parentName:"a"},"kill_signal")),". If the task does not exit before the configured\ntimeout, ",Object(r.b)("inlineCode",{parentName:"p"},"SIGKILL")," is sent to the task. Note that the value set here is capped\nat the value set for ",Object(r.b)("a",Object(c.a)({parentName:"p"},{href:"/docs/configuration/client#max_kill_timeout"}),Object(r.b)("inlineCode",{parentName:"a"},"max_kill_timeout"))," on the agent running the\ntask, which has a default value of 30 seconds.")),Object(r.b)("li",Object(c.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(r.b)("a",Object(c.a)({parentName:"li"},{id:"kill_signal",className:"__target-lic","aria-hidden":""})),Object(r.b)("p",{parentName:"li"},Object(r.b)("a",Object(c.a)({parentName:"p"},{href:"#kill_signal","aria-label":"kill_signal permalink",className:"__permalink-lic"}),Object(r.b)("inlineCode",{parentName:"a"},"kill_signal"))," ",Object(r.b)("inlineCode",{parentName:"p"},"(string)")," - Specifies a configurable kill signal for a task,\nwhere the default is SIGINT (or SIGTERM for ",Object(r.b)("inlineCode",{parentName:"p"},"docker"),"). Note that this is only\nsupported for drivers sending signals (currently ",Object(r.b)("inlineCode",{parentName:"p"},"docker"),", ",Object(r.b)("inlineCode",{parentName:"p"},"exec"),", ",Object(r.b)("inlineCode",{parentName:"p"},"raw_exec"),", and ",Object(r.b)("inlineCode",{parentName:"p"},"java")," drivers).")),Object(r.b)("li",Object(c.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(r.b)("a",Object(c.a)({parentName:"li"},{id:"leader",className:"__target-lic","aria-hidden":""})),Object(r.b)("p",{parentName:"li"},Object(r.b)("a",Object(c.a)({parentName:"p"},{href:"#leader","aria-label":"leader permalink",className:"__permalink-lic"}),Object(r.b)("inlineCode",{parentName:"a"},"leader"))," ",Object(r.b)("inlineCode",{parentName:"p"},"(bool: false)")," - Specifies whether the task is the leader task of\nthe task group. If set to true, when the leader task completes, all other\ntasks within the task group will be gracefully shutdown.")),Object(r.b)("li",Object(c.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(r.b)("a",Object(c.a)({parentName:"li"},{id:"lifecycle",className:"__target-lic","aria-hidden":""})),Object(r.b)("p",{parentName:"li"},Object(r.b)("a",Object(c.a)({parentName:"p"},{href:"#lifecycle","aria-label":"lifecycle permalink",className:"__permalink-lic"}),Object(r.b)("inlineCode",{parentName:"a"},"lifecycle"))," ",Object(r.b)("code",null,"(",Object(r.b)("a",Object(c.a)({parentName:"p"},{href:"/docs/job-specification/lifecycle",title:"Nomad lifecycle Job Specification"}),"Lifecycle"),": nil)")," - Specifies when a task is run\nwithin the lifecycle of a task group. Added in Nomad v0.11.")),Object(r.b)("li",Object(c.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(r.b)("a",Object(c.a)({parentName:"li"},{id:"logs",className:"__target-lic","aria-hidden":""})),Object(r.b)("p",{parentName:"li"},Object(r.b)("a",Object(c.a)({parentName:"p"},{href:"#logs","aria-label":"logs permalink",className:"__permalink-lic"}),Object(r.b)("inlineCode",{parentName:"a"},"logs"))," ",Object(r.b)("code",null,"(",Object(r.b)("a",Object(c.a)({parentName:"p"},{href:"/docs/job-specification/logs",title:"Nomad logs Job Specification"}),"Logs"),": nil)")," - Specifies logging configuration for the\n",Object(r.b)("inlineCode",{parentName:"p"},"stdout")," and ",Object(r.b)("inlineCode",{parentName:"p"},"stderr")," of the task.")),Object(r.b)("li",Object(c.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(r.b)("a",Object(c.a)({parentName:"li"},{id:"meta",className:"__target-lic","aria-hidden":""})),Object(r.b)("p",{parentName:"li"},Object(r.b)("a",Object(c.a)({parentName:"p"},{href:"#meta","aria-label":"meta permalink",className:"__permalink-lic"}),Object(r.b)("inlineCode",{parentName:"a"},"meta"))," ",Object(r.b)("code",null,"(",Object(r.b)("a",Object(c.a)({parentName:"p"},{href:"/docs/job-specification/meta",title:"Nomad meta Job Specification"}),"Meta"),": nil)")," - Specifies a key-value map that annotates\nwith user-defined metadata.")),Object(r.b)("li",Object(c.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(r.b)("a",Object(c.a)({parentName:"li"},{id:"resources",className:"__target-lic","aria-hidden":""})),Object(r.b)("p",{parentName:"li"},Object(r.b)("a",Object(c.a)({parentName:"p"},{href:"#resources","aria-label":"resources permalink",className:"__permalink-lic"}),Object(r.b)("inlineCode",{parentName:"a"},"resources"))," ",Object(r.b)("code",null,"(",Object(r.b)("a",Object(c.a)({parentName:"p"},{href:"/docs/job-specification/resources",title:"Nomad resources Job Specification"}),"Resources"),": ","<","required",">",")")," - Specifies the minimum\nresource requirements such as RAM, CPU and devices.")),Object(r.b)("li",Object(c.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(r.b)("a",Object(c.a)({parentName:"li"},{id:"service",className:"__target-lic","aria-hidden":""})),Object(r.b)("p",{parentName:"li"},Object(r.b)("a",Object(c.a)({parentName:"p"},{href:"#service","aria-label":"service permalink",className:"__permalink-lic"}),Object(r.b)("inlineCode",{parentName:"a"},"service"))," ",Object(r.b)("code",null,"(",Object(r.b)("a",Object(c.a)({parentName:"p"},{href:"/docs/job-specification/service",title:"Nomad service Job Specification"}),"Service"),": nil)")," - Specifies integrations with\n",Object(r.b)("a",Object(c.a)({parentName:"p"},{href:"https://www.consul.io/",title:"Consul by HashiCorp"}),"Consul")," for service discovery. Nomad automatically registers when a task\nis started and de-registers it when the task dies.")),Object(r.b)("li",Object(c.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(r.b)("a",Object(c.a)({parentName:"li"},{id:"shutdown_delay",className:"__target-lic","aria-hidden":""})),Object(r.b)("p",{parentName:"li"},Object(r.b)("a",Object(c.a)({parentName:"p"},{href:"#shutdown_delay","aria-label":"shutdown_delay permalink",className:"__permalink-lic"}),Object(r.b)("inlineCode",{parentName:"a"},"shutdown_delay"))," ",Object(r.b)("inlineCode",{parentName:"p"},'(string: "0s")')," - Specifies the duration to wait when\nkilling a task between removing it from Consul and sending it a shutdown\nsignal. Ideally services would fail healthchecks once they receive a shutdown\nsignal. Alternatively ",Object(r.b)("inlineCode",{parentName:"p"},"shutdown_delay")," may be set to give in flight requests\ntime to complete before shutting down. In addition, task groups may have their\nown ",Object(r.b)("a",Object(c.a)({parentName:"p"},{href:"/docs/job-specification/group#shutdown_delay"}),Object(r.b)("inlineCode",{parentName:"a"},"shutdown_delay")),"\nwhich waits between deregistering group services and stopping tasks.")),Object(r.b)("li",Object(c.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(r.b)("a",Object(c.a)({parentName:"li"},{id:"user",className:"__target-lic","aria-hidden":""})),Object(r.b)("p",{parentName:"li"},Object(r.b)("a",Object(c.a)({parentName:"p"},{href:"#user","aria-label":"user permalink",className:"__permalink-lic"}),Object(r.b)("inlineCode",{parentName:"a"},"user"))," ",Object(r.b)("inlineCode",{parentName:"p"},"(string: <varies>)")," - Specifies the user that will run the task.\nDefaults to ",Object(r.b)("inlineCode",{parentName:"p"},"nobody")," for the ",Object(r.b)("a",Object(c.a)({parentName:"p"},{href:"/docs/drivers/exec",title:"Nomad exec Driver"}),Object(r.b)("inlineCode",{parentName:"a"},"exec"))," and ",Object(r.b)("a",Object(c.a)({parentName:"p"},{href:"/docs/drivers/java",title:"Nomad Java Driver"}),Object(r.b)("inlineCode",{parentName:"a"},"java"))," drivers.\n",Object(r.b)("a",Object(c.a)({parentName:"p"},{href:"/docs/drivers/docker",title:"Nomad Docker Driver"}),"Docker")," and ",Object(r.b)("a",Object(c.a)({parentName:"p"},{href:"/docs/drivers/rkt",title:"Nomad rkt Driver"}),"rkt")," images specify their own default users. This can only\nbe set on Linux platforms, and clients can restrict\n",Object(r.b)("a",Object(c.a)({parentName:"p"},{href:"/docs/configuration/client#user-checked_drivers"}),"which drivers")," are allowed to run tasks as\n",Object(r.b)("a",Object(c.a)({parentName:"p"},{href:"/docs/configuration/client#user-blacklist"}),"certain users"),".")),Object(r.b)("li",Object(c.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(r.b)("a",Object(c.a)({parentName:"li"},{id:"template",className:"__target-lic","aria-hidden":""})),Object(r.b)("p",{parentName:"li"},Object(r.b)("a",Object(c.a)({parentName:"p"},{href:"#template","aria-label":"template permalink",className:"__permalink-lic"}),Object(r.b)("inlineCode",{parentName:"a"},"template"))," ",Object(r.b)("code",null,"(",Object(r.b)("a",Object(c.a)({parentName:"p"},{href:"/docs/job-specification/template",title:"Nomad template Job Specification"}),"Template"),": nil)")," - Specifies the set of templates\nto render for the task. Templates can be used to inject both static and\ndynamic configuration with data populated from environment variables, Consul\nand Vault.")),Object(r.b)("li",Object(c.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(r.b)("a",Object(c.a)({parentName:"li"},{id:"vault",className:"__target-lic","aria-hidden":""})),Object(r.b)("p",{parentName:"li"},Object(r.b)("a",Object(c.a)({parentName:"p"},{href:"#vault","aria-label":"vault permalink",className:"__permalink-lic"}),Object(r.b)("inlineCode",{parentName:"a"},"vault"))," ",Object(r.b)("code",null,"(",Object(r.b)("a",Object(c.a)({parentName:"p"},{href:"/docs/job-specification/vault",title:"Nomad vault Job Specification"}),"Vault"),": nil)")," - Specifies the set of Vault policies\nrequired by the task. This overrides any ",Object(r.b)("inlineCode",{parentName:"p"},"vault")," block set at the ",Object(r.b)("inlineCode",{parentName:"p"},"group")," or\n",Object(r.b)("inlineCode",{parentName:"p"},"job")," level.")),Object(r.b)("li",Object(c.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(r.b)("a",Object(c.a)({parentName:"li"},{id:"volume_mount",className:"__target-lic","aria-hidden":""})),Object(r.b)("p",{parentName:"li"},Object(r.b)("a",Object(c.a)({parentName:"p"},{href:"#volume_mount","aria-label":"volume_mount permalink",className:"__permalink-lic"}),Object(r.b)("inlineCode",{parentName:"a"},"volume_mount"))," ",Object(r.b)("code",null,"(",Object(r.b)("a",Object(c.a)({parentName:"p"},{href:"/docs/job-specification/volume_mount",title:"Nomad volume_mount Job Specification"}),"VolumeMount"),": nil)")," - Specifies where a group\nvolume should be mounted.")),Object(r.b)("li",Object(c.a)({parentName:"ul"},{className:"g-type-long-body"}),Object(r.b)("a",Object(c.a)({parentName:"li"},{id:"kind",className:"__target-lic","aria-hidden":""})),Object(r.b)("p",{parentName:"li"},Object(r.b)("a",Object(c.a)({parentName:"p"},{href:"#kind","aria-label":"kind permalink",className:"__permalink-lic"}),Object(r.b)("inlineCode",{parentName:"a"},"kind"))," ",Object(r.b)("inlineCode",{parentName:"p"},"(string: <varies>)")," - Used internally to manage tasks according to\nthe value of this field. Initial use case is for Consul Connect."))),Object(r.b)("h2",{className:"g-type-display-3"},Object(r.b)("a",Object(c.a)({parentName:"h2"},{className:"__permalink-h",href:"#task-examples","aria-label":"task examples permalink"}),"\xbb"),Object(r.b)("a",Object(c.a)({parentName:"h2"},{className:"__target-h",id:"task-examples","aria-hidden":""})),Object(r.b)("inlineCode",{parentName:"h2"},"task")," Examples"),Object(r.b)("p",null,"The following examples only show the ",Object(r.b)("inlineCode",{parentName:"p"},"task")," stanzas. Remember that the\n",Object(r.b)("inlineCode",{parentName:"p"},"task")," stanza is only valid in the placements listed above."),Object(r.b)("h3",{className:"g-type-display-4"},Object(r.b)("a",Object(c.a)({parentName:"h3"},{className:"__permalink-h",href:"#docker-container","aria-label":"docker container permalink"}),"\xbb"),Object(r.b)("a",Object(c.a)({parentName:"h3"},{className:"__target-h",id:"docker-container","aria-hidden":""})),"Docker Container"),Object(r.b)("p",null,"This example defines a task that starts a Docker container as a service. Docker\nis just one of many drivers supported by Nomad. Read more about drivers in the\n",Object(r.b)("a",Object(c.a)({parentName:"p"},{href:"/docs/drivers"}),"Nomad drivers documentation"),"."),Object(r.b)("pre",{className:"language-hcl"},Object(r.b)("code",Object(c.a)({parentName:"pre"},{className:"language-hcl"}),"task ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token string"}),'"server"')," ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token property"}),"driver")," ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token string"}),'"docker"'),"\n  ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token keyword"}),"config")," ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n    ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token property"}),"image")," ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token string"}),'"hashicorp/http-echo"'),"\n    ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token property"}),"args"),"  ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"["),Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token string"}),'"-text"'),", ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token string"}),'"hello world"'),Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"]"),"\n  ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n\n  ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token keyword"}),"resources")," ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n    ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token property"}),"cpu")," ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token number"}),"20"),"\n  ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n")),Object(r.b)("h3",{className:"g-type-display-4"},Object(r.b)("a",Object(c.a)({parentName:"h3"},{className:"__permalink-h",href:"#metadata-and-environment-variables","aria-label":"metadata and environment variables permalink"}),"\xbb"),Object(r.b)("a",Object(c.a)({parentName:"h3"},{className:"__target-h",id:"metadata-and-environment-variables","aria-hidden":""})),"Metadata and Environment Variables"),Object(r.b)("p",null,"This example uses custom metadata and environment variables to pass information\nto the task."),Object(r.b)("pre",{className:"language-hcl"},Object(r.b)("code",Object(c.a)({parentName:"pre"},{className:"language-hcl"}),"task ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token string"}),'"server"')," ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token property"}),"driver")," ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token string"}),'"exec"'),"\n  ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token keyword"}),"config")," ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n    ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token property"}),"command")," ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token string"}),'"/bin/env"'),"\n  ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n\n  ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token keyword"}),"meta")," ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n    ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token property"}),"my-key")," ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token string"}),'"my-value"'),"\n  ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n\n  ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token keyword"}),"env")," ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n    ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token property"}),"MY_KEY")," ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token string"}),'"',Object(r.b)("span",Object(c.a)({parentName:"span"},{className:"token interpolation"}),Object(r.b)("span",Object(c.a)({parentName:"span"},{className:"token punctuation"}),"$"),Object(r.b)("span",Object(c.a)({parentName:"span"},{className:"token punctuation"}),"{"),"meta",Object(r.b)("span",Object(c.a)({parentName:"span"},{className:"token punctuation"}),"."),"my-key",Object(r.b)("span",Object(c.a)({parentName:"span"},{className:"token punctuation"}),"}")),'"'),"\n  ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n\n  ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token keyword"}),"resources")," ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n    ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token property"}),"cpu")," ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token number"}),"20"),"\n  ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n")),Object(r.b)("h3",{className:"g-type-display-4"},Object(r.b)("a",Object(c.a)({parentName:"h3"},{className:"__permalink-h",href:"#service-discovery","aria-label":"service discovery permalink"}),"\xbb"),Object(r.b)("a",Object(c.a)({parentName:"h3"},{className:"__target-h",id:"service-discovery","aria-hidden":""})),"Service Discovery"),Object(r.b)("p",null,"This example creates a service in Consul. To read more about service discovery\nin Nomad, please see the ",Object(r.b)("a",Object(c.a)({parentName:"p"},{href:"/docs/integrations/consul-integration#service-discovery",title:"Nomad Service Discovery"}),"Nomad service discovery documentation"),"."),Object(r.b)("pre",{className:"language-hcl"},Object(r.b)("code",Object(c.a)({parentName:"pre"},{className:"language-hcl"}),"task ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token string"}),'"server"')," ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n  ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token property"}),"driver")," ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token string"}),'"docker"'),"\n  ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token keyword"}),"config")," ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n    ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token property"}),"image")," ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token string"}),'"hashicorp/http-echo"'),"\n    ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token property"}),"args"),"  ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"["),Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token string"}),'"-text"'),", ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token string"}),'"hello world"'),Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"]"),"\n  ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n\n  ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token keyword"}),"service")," ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n    ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token property"}),"tags")," ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"["),Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token string"}),'"default"'),Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"]"),"\n\n    ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token keyword"}),"check")," ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n      ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token property"}),"type"),"     ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token string"}),'"tcp"'),"\n      ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token property"}),"interval")," ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token string"}),'"10s"'),"\n      ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token property"}),"timeout"),"  ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token string"}),'"2s"'),"\n    ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n  ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n\n  ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token keyword"}),"resources")," ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"{"),"\n    ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token property"}),"cpu")," ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"=")," ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token number"}),"20"),"\n  ",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n",Object(r.b)("span",Object(c.a)({parentName:"code"},{className:"token punctuation"}),"}"),"\n")))}j.isMDXComponent=!0},yZJ4:function(e,a,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/docs/job-specification/task",function(){return t("r+i8")}])}},[["yZJ4",0,1,2,4,3,5,6]]]);