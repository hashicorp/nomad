sudo: required
dist: trusty

services:
    - docker

language: go

go:
  -  1.8.x

branches:
  only:
    - master

matrix:
  include:
    - env: RUN_UI_TESTS=1 SKIP_NOMAD_TESTS=1
    - env:

cache:
  directories:
    - ui/node_modules

before_install:
    - sudo apt-get update
    - sudo apt-get install -y liblxc1 lxc-dev lxc
    - sudo apt-get install -y qemu
    - ./scripts/install_rkt.sh
    - ./scripts/install_consul.sh
    - ./scripts/install_vault.sh

install:
  - make bootstrap

script:
  - make travis
